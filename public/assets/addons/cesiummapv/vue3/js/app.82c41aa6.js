(function(e){function t(t){for(var a,o,l=t[0],c=t[1],s=t[2],d=0,f=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,s||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,l=1;l<n.length;l++){var c=n[l];0!==i[c]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},i={app:0},r=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/assets/addons/cesiummapv/vue3/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0ac7":function(e,t,n){"use strict";n("9735")},1:function(e,t){},"12cd":function(e,t,n){"use strict";n("8c83")},"1cd3":function(e,t,n){},2:function(e,t){},"20b9":function(e,t,n){"use strict";n("63fc")},"224a":function(e,t,n){},"2d0d":function(e,t,n){"use strict";n("51b8")},"429a":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="429a"},4336:function(e,t,n){"use strict";n("1cd3")},4453:function(e,t,n){"use strict";n("b8c3")},"4ae2":function(e,t,n){"use strict";n("fa20")},"51b8":function(e,t,n){},"5a04":function(e,t,n){"use strict";n("f928")},"5cc1":function(e,t,n){"use strict";n("ff0c")},"5e70":function(e,t,n){"use strict";n("224a")},6e3:function(e,t,n){"use strict";n("ca2f")},"63fc":function(e,t,n){},"7ca1":function(e,t,n){"use strict";n("b988")},"8c83":function(e,t,n){},"8d52":function(e,t,n){"use strict";n("a43b")},9202:function(e,t,n){"use strict";n("9d7f")},"95ab":function(e,t,n){},9735:function(e,t,n){},"9d7f":function(e,t,n){},a43b:function(e,t,n){},b8c3:function(e,t,n){},b988:function(e,t,n){},ca2f:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23");function i(e,t){var n=Object(a["N"])("router-view");return Object(a["E"])(),Object(a["i"])(n)}n("7ca1");const r={};r.render=i;var o=r,l=n("6c02"),c=Object(a["gb"])("data-v-4b0ef630");Object(a["H"])("data-v-4b0ef630");var s={class:"TitleSetCongfig"},u={class:"titleset_con"},d={class:"c_title"},f={class:"c_title"},p={class:"c_title"},m={class:"c_title"},h=Object(a["n"])("br",null,null,-1),v=Object(a["n"])("br",null,null,-1),g=Object(a["n"])("span",{class:"c_title"},"启用打光效果： ",-1),b=Object(a["n"])("br",null,null,-1),C={class:"c_title"},y=Object(a["n"])("br",null,null,-1),O=Object(a["n"])("br",null,null,-1),j={class:"c_title"},w=Object(a["n"])("br",null,null,-1),_=Object(a["m"])("保存当前配置");Object(a["F"])();var k=c((function(e,t,n,i,r,o){var l=Object(a["N"])("el-slider"),k=Object(a["N"])("el-color-picker"),x=Object(a["N"])("el-switch"),M=Object(a["N"])("el-button"),S=Object(a["N"])("PannelBox"),P=Object(a["N"])("CesiumContainer");return Object(a["E"])(),Object(a["i"])(P,{"onUpdate:onReadyMap":e.onReadyMap},{configCom:c((function(){return[Object(a["n"])("div",s,[Object(a["n"])(S,null,{content:c((function(){return[Object(a["n"])("div",u,[Object(a["n"])("span",d,"偏移量lon经度："+Object(a["R"])(e.offSet_lon/1e4),1),Object(a["n"])(l,{modelValue:e.offSet_lon,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.offSet_lon=t}),min:-100,max:100,step:1,"format-tooltip":e.formatTooltip,onInput:e.change_offset},null,8,["modelValue","format-tooltip","onInput"]),Object(a["n"])("span",f,"偏移量lat纬度："+Object(a["R"])(e.offSet_lat/1e4),1),Object(a["n"])(l,{modelValue:e.offSet_lat,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.offSet_lat=t}),min:-100,max:100,step:1,"format-tooltip":e.formatTooltip,onInput:e.change_offset},null,8,["modelValue","format-tooltip","onInput"]),Object(a["n"])("span",p,"偏移量height高度(米)："+Object(a["R"])(e.offSet_height),1),Object(a["n"])(l,{modelValue:e.offSet_height,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.offSet_height=t}),min:-2e3,max:2e3,step:10,onInput:e.change_offset},null,8,["modelValue","onInput"]),Object(a["n"])("span",m,"白膜颜色："+Object(a["R"])(e.color),1),Object(a["n"])(k,{modelValue:e.color,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.color=t}),"show-alpha":"",size:"mini",class:"color-pick-s",onActiveChange:e.change_color},null,8,["modelValue","onActiveChange"]),h,v,g,Object(a["n"])(x,{modelValue:e.effectswitch,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.effectswitch=t}),onChange:e.effectswitch_change},null,8,["modelValue","onChange"]),b,Object(a["n"])("span",C,"打光效果颜色："+Object(a["R"])(e.effect_color),1),Object(a["n"])(k,{modelValue:e.effect_color,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.effect_color=t}),size:"mini",class:"color-pick-s",onActiveChange:e.effect_color_change},null,8,["modelValue","onActiveChange"]),y,O,Object(a["n"])("span",j,"光环的移动范围(高度)单位米："+Object(a["R"])(e.effect_height),1),Object(a["n"])(l,{modelValue:e.effect_height,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.effect_height=t}),min:0,max:1e3,step:10,onInput:e.effect_height_change},null,8,["modelValue","onInput"]),w,Object(a["n"])(M,{onClick:e.save},{default:c((function(){return[_]})),_:1},8,["onClick"])])]})),_:1})])]})),_:1},8,["onUpdate:onReadyMap"])})),x=Object(a["gb"])("data-v-1b320187");Object(a["H"])("data-v-1b320187");var M=Object(a["n"])("div",{class:"Cesium3Dcontainer",id:"cesiumContainer"},null,-1);Object(a["F"])();var S=x((function(e,t,n,i,r,o){var l=Object(a["N"])("ShowLngLat");return Object(a["E"])(),Object(a["i"])(a["b"],null,[M,Object(a["n"])(l,{ref:"ShowLngLatRef"},null,512),Object(a["M"])(e.$slots,"configCom",{},void 0,!0)],64)})),P=n("1da1"),R=(n("96cf"),n("d4ec")),E=n("bee2");n("159b"),n("7039"),n("ac1f"),n("1276"),n("5319"),n("99af"),n("fb6a"),n("b680"),n("d3b7"),n("25f0");function T(e){var t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,n=e.toLowerCase();if(t.test(n)){if(4===n.length){for(var a="#",i=1;i<4;i+=1)a+=n.slice(i,i+1).concat(n.slice(i,i+1));n=a}for(var r=[],o=1;o<7;o+=2)r.push(parseInt("0x"+n.slice(o,o+2)));return r}return[]}function I(e){var t=T(e);return t.forEach((function(e,n){t[n]=(e/255).toFixed(2)})),t}function V(e){var t=e.split(",");if(t.length<=1)return e;var n=parseInt(t[0].split("(")[1]),a=parseInt(t[1]),i=parseInt(t[2].split(")")[0]),r="#"+((1<<24)+(n<<16)+(a<<8)+i).toString(16).slice(1);return r}n("4d63");function L(e){var t=Function;return new t("return "+e)()}function D(e,t){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(t)||[null,"",null])[1].replace(/\+/g,"%20"))||null}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",n=D(e,window.location.href);return"int"===t?parseInt(n):"float"===t?parseFloat(n):n&&"array"===t?(n=n.split(","),[parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2])]):n}var z=n("2a47"),N=function(){function e(){Object(R["a"])(this,e),this.init_data()}return Object(E["a"])(e,[{key:"init_data",value:function(){this.viewer=null}},{key:"init",value:function(e,t){var n="cesiumContainer",a=new Cesium.SingleTileImageryProvider({url:"https://mapv-data.oss-cn-hangzhou.aliyuncs.com/Cesium-1.82-hawk/background.png"});0!==t.length&&(a=this.setOneimageryProvider(t[0]));var i={imageryProvider:a,contextOptions:{webgl:{alpha:!1}},baseLayerPicker:!1,navigationHelpButton:!1,animation:!1,timeline:!1,shadows:!1,shouldAnimate:!0,skyBox:!1,infoBox:!1,fullscreenButton:!1,homeButton:!0,geocoder:!1,sceneModePicker:!0};i=Object.assign(i,e);var r=new Cesium.Viewer(n,i);if(!e["logo"]){var o=r.cesiumWidget.creditContainer;o.style.display="none"}return r.scene.globe.depthTestAgainstTerrain=!0,this.initCesiumNavigation(r),this.setConfigMapList(r,t),this.removeJagged(r),this.viewer=r,r}},{key:"initCesiumNavigation",value:function(e){var t={};t.defaultResetView=new Cesium.Rectangle.fromDegrees(80,22,130,50),t.enableCompass=!0,t.enableZoomControls=!0,t.enableDistanceLegend=!0,t.enableCompassOuterRing=!0,Object(z["a"])(e,t)}},{key:"setOneimageryProvider",value:function(e){return e.classConfig.customTags&&(e.classConfig.customTags=L("("+e.classConfig.customTags+")")),new Cesium[e.type](e.classConfig)}},{key:"setConfigMapList",value:function(e,t){var n=this,a=e.imageryLayers;t.some((function(e,t){if(0===t)return!1;a.addImageryProvider(n.setOneimageryProvider(e))})),t.some((function(t,n){var a=e.imageryLayers.get(n);t.interfaceConfig&&Object.getOwnPropertyNames(t.interfaceConfig).forEach((function(e){a[e]=t.interfaceConfig[e]})),a.invertColor=t.invertswitch,a.filterRGB=[255,255,255],"#000000"!==t.filterRGB&&"#ffffff"!==t.filterRGB&&(a.filterRGB=T(t.filterRGB));var i=t.offset.split(",");if(2===i.length)try{var r=[parseFloat(i[0]),parseFloat(i[1])];a._imageryProvider._tilingScheme._rectangleNortheastInMeters.x+=r[0],a._imageryProvider._tilingScheme._rectangleNortheastInMeters.y+=r[1]}catch(o){console.log(o)}}))}},{key:"removeJagged",value:function(e){e.scene.postProcessStages.fxaa.enabled=!1,e.scene.fxaa=!1;var t=e.cesiumWidget._supportsImageRenderingPixelated;if(t){var n=window.devicePixelRatio;while(n>=2)n/=2;e.resolutionScale=n}}},{key:"changeImageryProviderColors",value:function(e){for(var t=e.scene.globe._surfaceShaderSet.baseFragmentShaderSource.sources,n=0;n<t.length;n++){var a=t[n],i="gl_FragColor = finalColor;\n}\n#ifdef GROUND_ATMOSPHERE\n",r=i;-1!==a.indexOf(i)&&(t[n]=t[n].replace(i,r))}}}]),e}(),B=new N,J=n("5530"),G=(n("4de4"),n("bc3a")),U=n.n(G),H=n("323e"),W=n.n(H);n("a5d8");W.a.configure({easing:"ease",speed:500,showSpinner:!0,trickleSpeed:200,minimum:.3});var q=W.a,A=n("53ca"),K=n("ade3");n("b64b"),n("caad"),n("2532");function $(e,t){return Object.keys(e).filter((function(e){return!t.includes(e)})).reduce((function(t,n){return t[n]=e[n],t}),{})}function X(e,t){var n=t.method,a=["delete","get","head","options"].includes(n.toLocaleLowerCase())?"params":"data";return Object(J["a"])(Object(J["a"])({},t),{},Object(K["a"])({},a,e))}var Z={baseURL:"",timeout:1e4,headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}};function Y(e){if(!e)return Z;var t=e.headers;return t&&"object"===Object(A["a"])(t)&&(Z.headers=Object(J["a"])(Object(J["a"])({},Z.headers),t)),Object(J["a"])(Object(J["a"])({},$(e,"headers")),Z)}var Q=function(){function e(){Object(R["a"])(this,e),this.CancelToken=U.a.CancelToken,this.sourceTokenList=[],this.currentCancelTokenKey="",this.urlPrefix="../addons/cesiummapv",this.beforeRequestCallback=void 0,this.beforeResponseCallback=void 0,this.httpInterceptorsRequest(),this.httpInterceptorsResponse()}return Object(E["a"])(e,[{key:"cancelTokenList",get:function(){return this.sourceTokenList},set:function(e){throw new Error("cancelTokenList不允许赋值")}},{key:"genUniqueKey",value:function(e){return"".concat(e.url,"--").concat(JSON.stringify(e.data))}},{key:"cancelRepeatRequest",value:function(){var e={};this.sourceTokenList=this.sourceTokenList.reduce((function(t,n){var a=n.cancelKey,i=n.cancelExecutor;return e[a]?i():(e[a]=!0,t.push(n)),t}),[])}},{key:"deleteCancelTokenByCancelKey",value:function(e){this.sourceTokenList=this.sourceTokenList.length<1?this.sourceTokenList.filter((function(t){return t.cancelKey!==e})):[]}},{key:"httpInterceptorsRequest",value:function(){var t=this;e.axiosInstance.interceptors.request.use((function(n){var a=n;q.start();var i=t.genUniqueKey(a);return a.cancelToken=new t.CancelToken((function(e){t.sourceTokenList.push({cancelKey:i,cancelExecutor:e})})),t.cancelRepeatRequest(),t.currentCancelTokenKey=i,"function"===typeof t.beforeRequestCallback?(t.beforeRequestCallback(a),t.beforeRequestCallback=void 0,a):e.initConfig.beforeRequestCallback?(e.initConfig.beforeRequestCallback(a),a):a}),(function(e){return Promise.reject(e)}))}},{key:"clearCancelTokenList",value:function(){this.sourceTokenList.length=0}},{key:"httpInterceptorsResponse",value:function(){var t=this,n=e.axiosInstance;n.interceptors.response.use((function(n){var a=t.genUniqueKey(n.config);return t.deleteCancelTokenByCancelKey(a),"function"===typeof t.beforeResponseCallback?(t.beforeResponseCallback(n),t.beforeResponseCallback=void 0,n.data):e.initConfig.beforeResponseCallback?(e.initConfig.beforeResponseCallback(n),n.data):(q.done(),n.data)}),(function(e){var n=e;if(t.currentCancelTokenKey){var a=t.sourceTokenList.filter((function(e){return e.cancelKey===t.currentCancelTokenKey})).length;a&&(t.sourceTokenList=t.sourceTokenList.filter((function(e){return e.cancelKey!==t.currentCancelTokenKey})),t.currentCancelTokenKey="")}return n.isCancelRequest=U.a.isCancel(n),Promise.reject(n)}))}},{key:"request",value:function(t,n,a,i){n=this.urlPrefix+n;var r=X(a,Object(J["a"])({method:t,url:n},i));return null!==i&&void 0!==i&&i.beforeRequestCallback&&(this.beforeRequestCallback=i.beforeRequestCallback),null!==i&&void 0!==i&&i.beforeResponseCallback&&(this.beforeResponseCallback=i.beforeResponseCallback),new Promise((function(t,n){e.axiosInstance.request(r).then((function(e){t(e)})).catch((function(e){n(e)}))}))}},{key:"post",value:function(e,t,n){return this.request("post",e,t,n)}},{key:"get",value:function(e,t,n){return this.request("get",e,t,n)}}]),e}();Q.initConfig={},Q.axiosInstance=U.a.create(Y());var ee=Q,te=new ee,ne=function(){return te.request("get","/base/getMapConfig")},ae=function(){return te.request("get","/base/getMapView")},ie=function(){return te.request("get","/base/getMapImageryList")},re=function(e){return te.post("/base/setMapView",e)},oe=n("2ef0");function le(){return ce.apply(this,arguments)}function ce(){return ce=Object(P["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:return t=e.sent,t=t.data,t=Object(oe["zipObject"])(Object(oe["map"])(t,"name"),Object(oe["map"])(t,"value")),Object(oe["forIn"])(t,(function(e,n){t[n]="1"===e})),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)}))),ce.apply(this,arguments)}function se(){return ue.apply(this,arguments)}function ue(){return ue=Object(P["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ie();case 2:return t=e.sent,t=t.data,t.some((function(e,n){t[n].classConfig=JSON.parse(e.classConfig),t[n].interfaceConfig=""===e.interfaceConfig?[]:JSON.parse(e.interfaceConfig),Object(oe["forIn"])(t[n].interfaceConfig,(function(e,a){isNaN(parseFloat(e))?t[n].interfaceConfig[a]="true"===e:t[n].interfaceConfig[a]=parseFloat(e)}))})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)}))),ue.apply(this,arguments)}var de=Object(a["gb"])("data-v-4d3f6ea5");Object(a["H"])("data-v-4d3f6ea5");var fe={class:"ShowLngLatContainer"},pe=Object(a["m"])();Object(a["F"])();var me=de((function(e,t,n,i,r,o){return Object(a["E"])(),Object(a["i"])("div",fe,[Object(a["n"])("span",null,"lng:"+Object(a["R"])(e.lng),1),pe,Object(a["n"])("span",null,"lat:"+Object(a["R"])(e.lat),1)])})),he=Object(a["o"])({name:"ShowLngLat",components:{},setup:function(){var e=Object(a["J"])(),t=Object(a["J"])(),n=function(n){var a=n.scene.canvas,i=n.scene.globe.ellipsoid,r=new Cesium.ScreenSpaceEventHandler(a);r.setInputAction((function(a){var r=n.camera.pickEllipsoid(a.endPosition,i);if(r){var o=n.scene.globe.ellipsoid.cartesianToCartographic(r);t.value=Cesium.Math.toDegrees(o.latitude).toFixed(4),e.value=Cesium.Math.toDegrees(o.longitude).toFixed(4)}}),Cesium.ScreenSpaceEventType.MOUSE_MOVE)};return{lng:e,lat:t,initCesiumHandler:n}}});n("4ae2"),n("4336");he.render=me,he.__scopeId="data-v-4d3f6ea5";var ve=he,ge=Object(a["o"])({name:"Cesium3Dcontainer",props:{isImagery:{type:Boolean,default:!1}},components:{ShowLngLat:ve},setup:function(e,t){var n=Object(a["J"])(),i=Object(a["J"])(),r=function(e,a){var i=B.init(e,a);window.Gviewer=i,n.value.initCesiumHandler(i),t.emit("update:onReadyMap",null)},o=function(e){var a=B.init(i,e);window.Gviewer=a,n.value.initCesiumHandler(a),t.emit("update:onReadyMap",null)};return Object(a["x"])((function(){Object(a["v"])(Object(P["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,le();case 2:if(i.value=t.sent,e.isImagery){t.next=8;break}return t.next=6,se();case 6:n=t.sent,r(i.value,n);case 8:case"end":return t.stop()}}),t)}))))})),{ShowLngLatRef:n,BaseMapConfig:i,initImageryMap:o}}});n("f5b7");ge.render=S,ge.__scopeId="data-v-1b320187";var be=ge,Ce=Object(a["gb"])("data-v-c043ac04");Object(a["H"])("data-v-c043ac04");var ye={class:"PannelBoxContainer"},Oe=Object(a["l"])('<div class="bk bk-left-top" data-v-c043ac04></div><div class="bk bk-left-top2" data-v-c043ac04></div><div class="bk bk-left-bottom" data-v-c043ac04></div><div class="bk bk-left-bottom2" data-v-c043ac04></div><div class="bk bk-right-top" data-v-c043ac04></div><div class="bk bk-right-top2" data-v-c043ac04></div><div class="bk bk-right-bottom" data-v-c043ac04></div><div class="bk bk-right-bottom2" data-v-c043ac04></div>',8),je={class:"content"};Object(a["F"])();var we=Ce((function(e,t,n,i,r,o){return Object(a["E"])(),Object(a["i"])("div",ye,[Oe,Object(a["n"])("div",je,[Object(a["M"])(e.$slots,"content",{},void 0,!0)])])})),_e={name:"PannelBox"};n("20b9");_e.render=we,_e.__scopeId="data-v-c043ac04";var ke=_e,xe=function(){return te.request("get","/titleset/getTitlesetList")},Me=function(e){return te.request("get","/titleset/getOneTitleset?id="+e)},Se=function(){function e(t){Object(R["a"])(this,e),this.viewer=t,this.modalPrimitives=[],this.curEleDatas=[],this.curSourceShaders=[]}return Object(E["a"])(e,[{key:"effect_height_change",value:function(e){var t=this.modalPrimitives[0];if(!t)return null;this.curEleDatas[0].height=e}},{key:"effect_color_change",value:function(e){var t=this.modalPrimitives[0];if(!t)return null;this.curEleDatas[0].effect_color=e}},{key:"effectswitch_change",value:function(e){var t=this.modalPrimitives[0];if(!t)return null;this.curEleDatas[0].effectswitch=e?1:0}},{key:"change_color",value:function(e){var t=this.modalPrimitives[0];t&&(t.style=new Cesium.Cesium3DTileStyle({color:{conditions:[["true","color('".concat(e,"')")]]}}))}},{key:"setOneModalOff",value:function(e){var t=this.modalPrimitives[0];t&&this.update3dtilesMaxtrix(t,e)}},{key:"showConfigCom",value:function(e){this.curEleDatas=e,this.addOne3dTitleset(e[0],0,!0)}},{key:"showOne",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Me(t);case 2:if(n=e.sent,this.curEleDatas=n.data,0!==n.data.length&&n.data[0].url){e.next=6;break}return e.abrupt("return",!1);case 6:return this.addOne3dTitleset(n.data[0],0,!0),e.abrupt("return",n.data[0]);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"init",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xe();case 2:t=e.sent,n=this,t.data&&(n.curEleDatas=t.data,t.data.forEach((function(e,t){e.url&&n.addOne3dTitleset(e,t)})));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"addOne3dTitleset",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this,i=this.viewer.scene.primitives.add(new Cesium.Cesium3DTileset({url:e.url,shadows:4,maximumScreenSpaceError:1,maximumNumberOfLoadedTiles:1e3}));i.readyPromise.then((function(i){1===e.flytoswitch&&a.viewer.zoomTo(i),a.update3dtilesMaxtrix(i,e),i.style=new Cesium.Cesium3DTileStyle({color:{conditions:[["true","color('".concat(e.color,"')")]]}}),(1===e.effectswitch||n)&&a.makeEffect(i,e,t,n)})),a.modalPrimitives.push(i)}},{key:"tileVisible_addEventListener_fun",value:function(e){for(var t=this,n=t.curEleDatas[t.index],a=e.content,i=a.featuresLength,r=I(n.effect_color),o=function(e){var i=a.getFeature(e).content._model;i&&i._sourcePrograms&&i._rendererResources&&(Object.getOwnPropertyNames(i._sourcePrograms).forEach((function(e){var a=i._sourcePrograms[e];t.curSourceShaders[t.index]||(t.curSourceShaders[t.index]=i._rendererResources.sourceShaders[a.fragmentShader]),1!==n.effectswitch?i._rendererResources.sourceShaders[a.fragmentShader]=t.curSourceShaders[t.index]:i._rendererResources.sourceShaders[a.fragmentShader]="\n            varying vec3 v_positionEC;\n            void main(void){\n              vec4 position = czm_inverseModelView * vec4(v_positionEC,1); // 位置\n              float glowRange = ".concat(n.height.toFixed(2),"; // 光环的移动范围(高度)\n              gl_FragColor = vec4(").concat(r[0],", ").concat(r[1],", ").concat(r[2],", 1.0); // 颜色\n              gl_FragColor *= vec4(vec3(position.z / 100.0), 1.0); // 渐变\n              // 动态光环\n              float time = fract(czm_frameNumber / 360.0);\n              time = abs(time - 0.5) * 2.0;\n              float diff = step(0.005, abs( clamp(position.z / glowRange, 0.0, 1.0) - time));\n              gl_FragColor.rgb += gl_FragColor.rgb * (1.0 - diff);\n            }\n            ")})),i._shouldRegenerateShaders=1===n.effectswitch||t.isConfig)},l=0;l<i;l+=2)o(l)}},{key:"makeEffect",value:function(e,t,n,a){var i=this;e.tileVisible.addEventListener(i.tileVisible_addEventListener_fun,{curEleDatas:i.curEleDatas,ele:t,index:n,curSourceShaders:i.curSourceShaders,isConfig:a})}},{key:"update3dtilesMaxtrix",value:function(e,t){if(e.ready){var n=Cesium.Cartographic.fromCartesian(e.boundingSphere.center),a=Cesium.Cartesian3.fromRadians(n.longitude,n.latitude,n.height),i=Cesium.Cartesian3.fromRadians(n.longitude+Cesium.Math.toRadians(t.offset_x),n.latitude+Cesium.Math.toRadians(t.offset_y),n.height+t.offset_z),r=Cesium.Cartesian3.subtract(i,a,new Cesium.Cartesian3);e.modelMatrix=Cesium.Matrix4.fromTranslation(r)}}},{key:"move3dtilesMaxtrix",value:function(e){var t=Cesium.Cartographic.fromCartesian(e.boundingSphere.center),n=Cesium.Cartesian3.fromRadians(t.longitude,t.latitude,0),a=Cesium.Cartesian3.fromRadians(t.longitude,t.latitude,-500);a.x+=100;var i=Cesium.Cartesian3.subtract(a,n,new Cesium.Cartesian3);e.modelMatrix=Cesium.Matrix4.fromTranslation(i)}},{key:"addtest",value:function(){var e=this;this.viewer.scene.primitives.add(new Cesium.Cesium3DTileset({url:"http://myhome.217dan.com:8081/chengdu_all/tileset.json"})).readyPromise.then((function(t){setTimeout((function(){e.viewer.zoomTo(t)}),2e3),e.move3dtilesMaxtrix(t),t.style=new Cesium.Cesium3DTileStyle({color:{conditions:[["true","color('rgba(255,255,255,0.9)')"]]}}),t.tileVisible.addEventListener((function(e){for(var t=e.content,n=t.featuresLength,a=function(e){var n=t.getFeature(e).content._model;n&&n._sourcePrograms&&n._rendererResources&&(Object.getOwnPropertyNames(n._sourcePrograms).forEach((function(e){var t=n._sourcePrograms[e];n._rendererResources.sourceShaders[t.fragmentShader]="\n                varying vec3 v_positionEC;\n                void main(void){\n                  vec4 position = czm_inverseModelView * vec4(v_positionEC,1); // 位置\n                  float glowRange = 100.0; // 光环的移动范围(高度)\n                  gl_FragColor = vec4(0.2,  0.5, 1.0, 1.0); // 颜色\n                  gl_FragColor *= vec4(vec3(position.z / 100.0), 1.0); // 渐变\n                  // 动态光环\n                  float time = fract(czm_frameNumber / 360.0);\n                  time = abs(time - 0.5) * 2.0;\n                  float diff = step(0.005, abs( clamp(position.z / glowRange, 0.0, 1.0) - time));\n                  gl_FragColor.rgb += gl_FragColor.rgb * (1.0 - diff);\n                }\n                "})),n._shouldRegenerateShaders=!0)},i=0;i<n;i+=2)a(i)}))}))}},{key:"add",value:function(e){console.log(e);var t="https://lab.earthsdk.com/model/702aa950d03c11e99f7ddd77cbe22fea/tileset.json",n=new Cesium.Cesium3DTileset({url:t});this.modalPrimitives=this.viewer.scene.primitives.add(n),this.viewer.scene.camera.setView({destination:{x:-2395783.5309640486,y:5392694.777928539,z:2424816.601754499},orientation:{heading:.42631000693466764,pitch:-.8022459306450823,roll:.4179249271708612},duration:1})}}]),e}(),Pe=Se,Re=n("3fd4"),Ee=Object(a["o"])({name:"TitleSetCongfig",components:{CesiumContainer:be,PannelBox:ke},setup:function(){var e=Object(a["J"])(0),t=Object(a["J"])(0),n=Object(a["J"])(0),i=Object(a["J"])("rgba(19, 206, 102, 0.8)"),r=Object(a["J"])("rgba(119, 6, 32)"),o=Object(a["J"])(!0),l=Object(a["J"])(100),c=null,s=function(){Re["b"].confirm("提交保存当前白膜的配置信息, 是否继续?","提示",{confirmButtonText:"保存",cancelButtonText:"取消",type:"warning"}).then((function(){window.parent.postMessage({offSet_lon:e.value/1e4,offSet_lat:t.value/1e4,offSet_height:n.value,color:i.value,effect_color:r.value,effectswitch:o.value,effect_height:l.value},"*"),Object(Re["a"])({type:"success",message:"保存成功!"})})).catch((function(e){console.log(e)}))},u=function(e){c&&c.effect_height_change(e)},d=function(e){e||(e="rgb(255,255,255)",r.value=e),c&&c.effect_color_change(e)},f=function(e){c.effectswitch_change(e)},p=function(){var a={flytoswitch:1},s=F("url");s=decodeURI(s),a.url=s,a.offset_x=F("offset_x","float"),e.value=1e4*a.offset_x,a.offset_y=F("offset_y","float"),t.value=1e4*a.offset_y,a.offset_z=F("offset_z","int"),n.value=a.offset_z,a.color=F("color"),i.value=a.color,a.effect_color=F("effect_color"),r.value=a.effect_color,a.effectswitch=F("effectswitch","int"),o.value=1===a.effectswitch,a.height=F("height","int"),l.value=a.height,c=new Pe(window.Gviewer),c.showConfigCom([a])},m=function(e){return e/1e4},h=function(e){e||(e="rgba(255,255,255,1)",i.value=e),c&&c.change_color(e)},v=function(){c&&c.setOneModalOff({offset_x:e.value/1e4,offset_y:t.value/1e4,offset_z:n.value})};return{onReadyMap:p,offSet_lon:e,offSet_lat:t,offSet_height:n,formatTooltip:m,change_offset:v,color:i,change_color:h,effectswitch:o,effectswitch_change:f,effect_color_change:d,effect_color:r,effect_height_change:u,effect_height:l,save:s}}});n("0ac7"),n("9202");Ee.render=k,Ee.__scopeId="data-v-4b0ef630";var Te=Ee,Ie=Object(a["gb"])("data-v-6662c565");Object(a["H"])("data-v-6662c565");var Ve={class:"LinesCongfig"},Le={class:"lines_con"},De={class:"c_title"},Fe=Object(a["m"])("重新生成"),ze=Object(a["n"])("span",{class:"c_title"},"起始lon经度：",-1),Ne=Object(a["n"])("br",null,null,-1),Be=Object(a["n"])("br",null,null,-1),Je=Object(a["n"])("span",{class:"c_title"},"起始lat纬度：",-1),Ge=Object(a["n"])("br",null,null,-1),Ue=Object(a["n"])("br",null,null,-1),He=Object(a["n"])("span",{class:"c_title"},"终止lon经度：",-1),We=Object(a["n"])("br",null,null,-1),qe=Object(a["n"])("br",null,null,-1),Ae=Object(a["n"])("span",{class:"c_title"},"终止lat纬度：",-1),Ke=Object(a["n"])("br",null,null,-1),$e=Object(a["n"])("br",null,null,-1),Xe={class:"c_title"},Ze=Object(a["m"])("以上需要重新生成"),Ye={class:"c_title"},Qe={class:"c_title"},et={class:"c_title"},tt={class:"c_title"},nt=Object(a["n"])("br",null,null,-1),at=Object(a["n"])("br",null,null,-1),it={class:"c_title"},rt=Object(a["n"])("br",null,null,-1),ot={class:"c_title"},lt=Object(a["n"])("br",null,null,-1),ct=Object(a["m"])("保存当前设置");Object(a["F"])();var st=Ie((function(e,t,n,i,r,o){var l=Object(a["N"])("el-button"),c=Object(a["N"])("el-slider"),s=Object(a["N"])("el-input"),u=Object(a["N"])("el-divider"),d=Object(a["N"])("el-color-picker"),f=Object(a["N"])("PannelBox"),p=Object(a["N"])("CesiumContainer");return Object(a["E"])(),Object(a["i"])(p,{"onUpdate:onReadyMap":e.onReadyMap},{configCom:Ie((function(){return[Object(a["n"])("div",Ve,[Object(a["n"])(f,null,{content:Ie((function(){return[Object(a["n"])("div",Le,["FlyLines"===e.type?(Object(a["E"])(),Object(a["i"])(a["b"],{key:0},[Object(a["n"])("span",De,[Object(a["m"])("飞线数："+Object(a["R"])(e.random)+" 条 ",1),Object(a["n"])(l,{onClick:e.makeLines,size:"mini",style:{float:"right","margin-top":"-6px"}},{default:Ie((function(){return[Fe]})),_:1},8,["onClick"])]),Object(a["n"])(c,{modelValue:e.random,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.random=t}),min:10,max:1e3,step:10},null,8,["modelValue"]),ze,Object(a["n"])(s,{type:"number",class:"input_c_p",size:"small",modelValue:e.bbox[0],"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.bbox[0]=t})},null,8,["modelValue"]),Ne,Be,Je,Object(a["n"])(s,{type:"number",class:"input_c_p",size:"small",modelValue:e.bbox[1],"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.bbox[1]=t})},null,8,["modelValue"]),Ge,Ue,He,Object(a["n"])(s,{type:"number",class:"input_c_p",size:"small",modelValue:e.bbox[2],"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.bbox[2]=t})},null,8,["modelValue"]),We,qe,Ae,Object(a["n"])(s,{type:"number",class:"input_c_p",size:"small",modelValue:e.bbox[3],"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.bbox[3]=t})},null,8,["modelValue"]),Ke,$e,Object(a["n"])("span",Xe,"最大高度："+Object(a["R"])(e.height)+" 米",1),Object(a["n"])(c,{modelValue:e.height,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.height=t}),min:100,max:1e4,step:100},null,8,["modelValue"]),Object(a["n"])(u,null,{default:Ie((function(){return[Ze]})),_:1})],64)):Object(a["j"])("",!0),Object(a["n"])("span",Ye,"宽度："+Object(a["R"])(e.width),1),Object(a["n"])(c,{modelValue:e.width,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.width=t}),min:.1,max:10,step:.1,onInput:e.lines_width_change},null,8,["modelValue","min","step","onInput"]),"RoadPic"===e.type?(Object(a["E"])(),Object(a["i"])(a["b"],{key:1},[Object(a["n"])("span",Qe,"延迟时间: "+Object(a["R"])(e.time)+" ms",1),Object(a["n"])(c,{modelValue:e.time,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.time=t}),min:100,max:1e4,step:100,onInput:e.lines_time_change},null,8,["modelValue","onInput"])],64)):Object(a["j"])("",!0),"RoadPic"!==e.type?(Object(a["E"])(),Object(a["i"])(a["b"],{key:2},[Object(a["n"])("span",et,"速度："+Object(a["R"])(e.speed),1),Object(a["n"])(c,{modelValue:e.speed,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.speed=t}),min:.5,max:20,step:.5,onInput:e.lines_speed_change},null,8,["modelValue","min","step","onInput"]),Object(a["n"])("span",tt,"效果颜色："+Object(a["R"])(e.color),1),Object(a["n"])(d,{modelValue:e.color,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.color=t}),size:"mini",class:"color-pick-s",onActiveChange:e.change_color},null,8,["modelValue","onActiveChange"]),nt,at,Object(a["n"])("span",it,"拖尾长："+Object(a["R"])(e.percent),1),Object(a["n"])(c,{modelValue:e.percent,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.percent=t}),min:.01,max:.6,step:.02,onInput:e.lines_percent_change},null,8,["modelValue","min","max","step","onInput"]),rt,Object(a["n"])("span",ot,"变化率："+Object(a["R"])(e.gradient),1),Object(a["n"])(c,{modelValue:e.gradient,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.gradient=t}),min:.01,max:.3,step:.02,onInput:e.lines_gradient_change},null,8,["modelValue","min","max","step","onInput"]),lt],64)):Object(a["j"])("",!0),Object(a["n"])(l,{onClick:e.save,size:"mini"},{default:Ie((function(){return[ct]})),_:1},8,["onClick"])])]})),_:1})])]})),_:1},8,["onUpdate:onReadyMap"])})),ut=(n("ddb0"),n("d81d"),function(){return te.request("get","/effect/getPointsEffectList")}),dt=function(){return te.request("get","/effect/getLinesEffectList")};function ft(e){this._definitionChanged=new Cesium.Event,this.colorSubscription=void 0,this.speed=e.speed||6*Math.random(),this.color=e.color||Cesium.Color.RED,this.percent=e.percent||.1,this.gradient=e.gradient||.01}function pt(){console.log("PolylineTrailMaterialProperty init")}function mt(e,t){this._definitionChanged=new Cesium.Event,this.duration=e,this.image=t,this._time=performance.now()}function ht(){console.log("Spriteline1MaterialProperty init")}Object.defineProperties(ft.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed"),gradient:Cesium.createPropertyDescriptor("gradient"),percent:Cesium.createPropertyDescriptor("percent")}),ft.prototype.getType=function(e){return"PolylineTrail"},ft.prototype.getValue=function(e,t){return Cesium.defined(t)||(t={}),t.color=Cesium.Property.getValueOrClonedDefault(this.color,e,Cesium.Color.WHITE,t.color),t.speed=this.speed,t.gradient=this.gradient,t.percent=this.percent,t},ft.prototype.equals=function(e){return this===e||e instanceof ft&&this.speed===e.speed&&Cesium.Property.equals(this.color,e.color)},Cesium.PolylineTrailMaterialProperty=ft,Cesium.Material.PolylineTrailType="PolylineTrail",Cesium.Material.PolylineTrailSource="\nuniform vec4 color;\nuniform float speed;\nuniform float percent;\nuniform float gradient;\n\nczm_material czm_getMaterial(czm_materialInput materialInput){\n  czm_material material = czm_getDefaultMaterial(materialInput);\n  vec2 st = materialInput.st;\n  float t = fract(czm_frameNumber * speed / 1000.0);\n  t *= (1.0 + percent);\n  float alpha = smoothstep(t- percent, t, st.s) * step(-t, -st.s);\n  alpha += gradient;\n  material.diffuse = color.rgb;\n  material.alpha = alpha;\n  return material;\n}\n",Cesium.Material._materialCache.addMaterial(Cesium.Material.PolylineTrailType,{fabric:{type:Cesium.Material.PolylineTrailType,uniforms:{color:new Cesium.Color(1,0,0,.5),transparent:!0,speed:0,gradient:.01,percent:.1},source:Cesium.Material.PolylineTrailSource},translucent:function(e){return!0}}),Object.defineProperties(mt.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color"),duration:Cesium.createPropertyDescriptor("duration")}),mt.prototype.getType=function(e){return"Spriteline1"},mt.prototype.getValue=function(e,t){return Cesium.defined(t)||(t={}),t.image=this.image,t.time=(performance.now()-this._time)%this.duration/this.duration,t},mt.prototype.equals=function(e){return this===e||e instanceof mt&&this.duration===e.duration},Cesium.Spriteline1MaterialProperty=mt,Cesium.Material.Spriteline1Type="Spriteline1",Cesium.Material.Spriteline1Source="\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n   czm_material material = czm_getDefaultMaterial(materialInput);\n   vec2 st = materialInput.st;\n   vec4 colorImage = texture2D(image, vec2(fract(st.s - time), st.t));\n   material.alpha = colorImage.a;\n   material.diffuse = colorImage.rgb * 1.5 ;\n   return material;\n}\n",Cesium.Material._materialCache.addMaterial(Cesium.Material.Spriteline1Type,{fabric:{type:Cesium.Material.Spriteline1Type,uniforms:{color:new Cesium.Color(1,0,0,.5),image:"",transparent:!0,time:20},source:Cesium.Material.Spriteline1Source},translucent:function(e){return!0}});var vt=n("595b"),gt=function(){function e(t,n){Object(R["a"])(this,e),this.viewer=t,this.id=n,this.FlyLinesEntities=[],this.BusLinesEntities=[],this.RoadPicEntities=[]}return Object(E["a"])(e,[{key:"init",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,dt();case 2:t=e.sent,this,t.data&&t.data.forEach((function(e,t){var a=JSON.parse(e.setup_param);for(var i in a)"color"!==i&&(a[i]=parseFloat(a[i]));"FlyLines"===e.type?n.addFlyLines([a.startPoint_lng,a.startPoint_lat,a.endPoint_ing,a.endPoint_lat],a.color,e.width,a.height,a.speed,a.percent,a.gradient,a.random):"BusLines"===e.type?n.addBusLines(e.geojsonfile,a.color,e.width,a.speed,a.percent,a.gradient):"RoadPic"===e.type&&n.addRoadPic(e.geojsonfile,e.effectimage,e.width,a.time)}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"changeLinesPercent",value:function(e,t){var n=null;"FlyLines"===e&&(n=this.FlyLinesEntities),"BusLines"===e&&(n=this.BusLinesEntities),n.forEach((function(e){e.polyline.material.percent=t}))}},{key:"changeLinesSpeed",value:function(e,t){var n=null;"FlyLines"===e&&(n=this.FlyLinesEntities),"BusLines"===e&&(n=this.BusLinesEntities),n.forEach((function(e){e.polyline.material.speed=t}))}},{key:"changeLinesGradient",value:function(e,t){var n=null;"FlyLines"===e&&(n=this.FlyLinesEntities),"BusLines"===e&&(n=this.BusLinesEntities),n.forEach((function(e){e.polyline.material.gradient=t}))}},{key:"changeLinesColor",value:function(e,t){var n=null;"FlyLines"===e&&(n=this.FlyLinesEntities),"BusLines"===e&&(n=this.BusLinesEntities),n.forEach((function(e){e.polyline.material.color=new Cesium.Color.fromCssColorString(t)}))}},{key:"changeLinesWidth",value:function(e,t){var n=null;"FlyLines"===e&&(n=this.FlyLinesEntities),"BusLines"===e&&(n=this.BusLinesEntities),"RoadPic"===e&&(n=this.RoadPicEntities),n.forEach((function(e){e.polyline.width=t}))}},{key:"changeLinesTime",value:function(e,t){var n=this.RoadPicEntities;n.forEach((function(e){e.polyline.material.duration=t}))}},{key:"remakeFlyLines",value:function(e,t,n,a,i,r,o,l){this.clearFlyLines(),this.addFlyLines(e,t,n,a,i,r,o,l)}},{key:"clearFlyLines",value:function(){var e=this;this.FlyLinesEntities.forEach((function(t){e.viewer.entities.removeById(t.id)})),this.FlyLinesEntities=[]}},{key:"addFlyLines",value:function(e,t,n,a,i,r,o,l){pt();var c,s,u,d=this,f=vt["randomPoint"](l,{bbox:e}),p=f.features;p.forEach((function(e){c=e.geometry.coordinates,s=Cesium.Cartesian3.fromDegrees(c[0],c[1],0),u=Cesium.Cartesian3.fromDegrees(c[0],c[1],a*Math.random()),d.FlyLinesEntities.push(d.viewer.entities.add({polyline:{positions:[s,u],width:n,material:new Cesium.PolylineTrailMaterialProperty({speed:i*Math.random(),color:new Cesium.Color.fromCssColorString(t),percent:r,gradient:o})}}))}))}},{key:"addBusLines",value:function(e,t,n,a,i,r){pt();var o=this,l=Cesium.GeoJsonDataSource.load(e);l.then((function(e){o.viewer.dataSources.add(e),o.BusLinesEntities=e.entities.values;for(var l=[],c=0;c<o.BusLinesEntities.length;c++){var s=o.BusLinesEntities[c];s.polyline.positions._value.length>6?(s.polyline.width=n,s.polyline.material=new Cesium.PolylineTrailMaterialProperty({speed:a*Math.random(),color:new Cesium.Color.fromCssColorString(t),percent:i,gradient:r})):l.push(s.id)}l.forEach((function(t){e.entities.removeById(t)}))}))}},{key:"addRoadPic",value:function(e,t,n,a){ht();var i=this,r=Cesium.GeoJsonDataSource.load(e);r.then((function(e){i.viewer.dataSources.add(e),i.RoadPicEntities=e.entities.values;for(var r=0;r<i.RoadPicEntities.length;r++){var o=i.RoadPicEntities[r];o.polyline.width=n,o.polyline.material=new Cesium.Spriteline1MaterialProperty(a,t)}}))}},{key:"loadFlyLines",value:function(){pt();var e=this;Cesium.Resource.fetchJson("https://mapv-data.oss-cn-hangzhou.aliyuncs.com/geojson/nanshan-road1.geojson").then((function(t){var n,a,i,r=vt["bbox"](t),o=vt["randomPoint"](100,{bbox:r}),l=o.features;l.forEach((function(t){n=t.geometry.coordinates,a=Cesium.Cartesian3.fromDegrees(n[0],n[1],0),i=Cesium.Cartesian3.fromDegrees(n[0],n[1],3e3*Math.random()),e.viewer.entities.add({polyline:{positions:[a,i],width:2,material:new Cesium.PolylineTrailMaterialProperty({speed:6*Math.random(),color:new Cesium.Color.fromCssColorString("#32B47E"),percent:.1,gradient:.01})}})}))}))}},{key:"loadRoadPicEffect",value:function(){ht();var e=this,t=Cesium.GeoJsonDataSource.load("https://mapv-data.oss-cn-hangzhou.aliyuncs.com/geojson/nanshan-road1.geojson");t.then((function(t){e.viewer.dataSources.add(t);for(var n=t.entities.values,a=0;a<n.length;a++){var i=n[a];i.polyline.width=3,i.polyline.material=new Cesium.Spriteline1MaterialProperty(1e3,"https://mapv-data.oss-cn-hangzhou.aliyuncs.com/pic/spriteline1.png")}})),t=Cesium.GeoJsonDataSource.load("https://mapv-data.oss-cn-hangzhou.aliyuncs.com/geojson/nanshan-road2.geojson"),t.then((function(t){e.viewer.dataSources.add(t);for(var n=t.entities.values,a=0;a<n.length;a++){var i=n[a];i.polyline.width=3,i.polyline.material=new Cesium.Spriteline1MaterialProperty(500,"https://mapv-data.oss-cn-hangzhou.aliyuncs.com/pic/spriteline2.png")}})),t=Cesium.GeoJsonDataSource.load("https://mapv-data.oss-cn-hangzhou.aliyuncs.com/geojson/nanshan-road3.geojson"),t.then((function(t){e.viewer.dataSources.add(t);for(var n=t.entities.values,a=0;a<n.length;a++){var i=n[a];i.polyline.width=3,i.polyline.material=new Cesium.Spriteline1MaterialProperty(500,"https://mapv-data.oss-cn-hangzhou.aliyuncs.com/pic/spriteline3.png")}}))}},{key:"loadShenZhengLinesData",value:function(){pt();var e=this,t=Cesium.GeoJsonDataSource.load("https://mapv-data.oss-cn-hangzhou.aliyuncs.com/geojson/shenzhen-nanshan.geojson");t.then((function(t){e.viewer.dataSources.add(t);for(var n=t.entities.values,a=[],i=0;i<n.length;i++){var r=n[i];r.polyline.positions._value.length>6?(r.polyline.width=3.6,r.polyline.material=new Cesium.PolylineTrailMaterialProperty({speed:12*Math.random(),color:new Cesium.Color.fromCssColorString("#32B47E"),percent:.3,gradient:.02})):a.push(r.id)}a.forEach((function(e){t.entities.removeById(e)}))}))}},{key:"loadBeijingLinesData",value:function(){var e=this;Cesium.Resource.fetchJson("https://mapv-data.oss-cn-hangzhou.aliyuncs.com/geojson/bj-lines-bus.json").then((function(t){var n=[];t.map((function(e,t){for(var a=[],i=[],r=0;r<e.length;r+=2){var o=[e[r],e[r+1]];r>0&&(o=[a[0]+o[0],a[1]+o[1]]),a=o;var l=o[0]/1e4,c=o[1]/1e4;i.push(l),i.push(c)}n.push({positions:i,color:new Cesium.Color(0,.8*Math.random()+.2,.5*Math.random()+.5,1),width:2})})),e.addLineDatas(n)}))}},{key:"addLineDatas",value:function(e){var t=this;e.forEach((function(e){t.viewer.entities.add({polyline:{positions:Cesium.Cartesian3.fromDegreesArray(e.positions),width:e.width,material:new Cesium.PolylineTrailMaterialProperty({speed:30*Math.random(),color:e.color,percent:.01,gradient:.1})}})}))}}]),e}(),bt=gt,Ct=Object(a["o"])({name:"LinesCongfig",components:{CesiumContainer:be,PannelBox:ke},setup:function(){var e=null,t=Object(a["J"])("#FF006D");t.value=F("color")?F("color"):t.value;var n=Object(a["J"])([113.89,22.48,113.9694,22.5692]);n.value[0]=F("startPoint_lng")?F("startPoint_lng"):n.value[0],n.value[1]=F("startPoint_lat")?F("startPoint_lat"):n.value[1],n.value[2]=F("endPoint_ing")?F("endPoint_ing"):n.value[2],n.value[3]=F("endPoint_lat")?F("endPoint_lat"):n.value[3];var i=Object(a["J"])(2);i.value=F("width")?parseFloat(F("width")):i.value;var r=F("Geojsonfile")?decodeURI(F("Geojsonfile")):"",o=F("Effectimage")?decodeURI(F("Effectimage")):"",l=Object(a["J"])(1e3);l.value=F("time")?parseFloat(F("time")):l.value;var c=Object(a["J"])(3e3);c.value=F("height")?parseFloat(F("height")):c.value;var s=Object(a["J"])(6);s.value=F("speed")?parseFloat(F("speed")):s.value;var u=Object(a["J"])(.1);u.value=F("percent")?parseFloat(F("percent")):u.value;var d=Object(a["J"])(.1);d.value=F("gradient")?parseFloat(F("gradient")):d.value;var f=Object(a["J"])(300);f.value=F("random")?parseFloat(F("random")):f.value;var p=Object(a["J"])("FlyLines");p.value=F("type")?F("type"):p.value;var m=function(t){e&&window.Gviewer.entities&&t&&e.changeLinesColor(p.value,t)},h=function(t){e&&window.Gviewer.entities&&e.changeLinesGradient(p.value,t)},v=function(t){e&&window.Gviewer.entities&&e.changeLinesSpeed(p.value,t)},g=function(t){e&&window.Gviewer.entities&&e.changeLinesPercent(p.value,t)},b=function(t){e&&window.Gviewer.entities&&e.changeLinesWidth(p.value,t)},C=function(t){e&&window.Gviewer.entities&&e.changeLinesTime(p.value,t)},y=function(){if(e&&window.Gviewer.entities){var a=n.value;n.value=[parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3])],e.remakeFlyLines(n.value,t.value,i.value,c.value,s.value,u.value,d.value,f.value)}},O=function(){var a=new Pe(window.Gviewer);if(a.init(),e=new bt(window.Gviewer,"road"),"FlyLines"===p.value){var m=n.value;n.value=[parseFloat(m[0]),parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3])],e.addFlyLines(n.value,t.value,i.value,c.value,s.value,u.value,d.value,f.value)}else"BusLines"===p.value?e.addBusLines(r,t.value,i.value,s.value,u.value,d.value):"RoadPic"===p.value&&e.addRoadPic(r,o,i.value,l.value)},j=function(){Re["b"].confirm("提交保存当前效果配置信息, 是否继续?","提示",{confirmButtonText:"保存",cancelButtonText:"取消",type:"warning"}).then((function(){var e=null;"FlyLines"===p.value?e={bbox:JSON.stringify(n.value),color:t.value,width:i.value,height:c.value,speed:s.value,percent:u.value,gradient:d.value,random:f.value}:"BusLines"===p.value?e={color:t.value,width:i.value,speed:s.value,percent:u.value,gradient:d.value}:"RoadPic"===p.value&&(e={width:i.value,time:l.value}),window.parent.postMessage(e,"*"),Object(Re["a"])({type:"success",message:"保存成功!"})})).catch((function(e){console.log(e)}))};return{onReadyMap:O,type:p,random:f,makeLines:y,height:c,width:i,lines_width_change:b,color:t,change_color:m,percent:u,lines_percent_change:g,lines_gradient_change:h,gradient:d,speed:s,lines_speed_change:v,bbox:n,save:j,time:l,lines_time_change:C}}});n("6000"),n("5e70");Ct.render=st,Ct.__scopeId="data-v-6662c565";var yt=Ct,Ot=Object(a["gb"])("data-v-78f23ff3");Object(a["H"])("data-v-78f23ff3");var jt={class:"EffectCongfig"},wt={class:"effect_con"},_t=Object(a["n"])("span",{class:"c_title"},"请选择效果：",-1),kt=Object(a["n"])("br",null,null,-1),xt=Object(a["n"])("br",null,null,-1),Mt=Object(a["n"])("span",{class:"c_title"},"lon经度：",-1),St=Object(a["n"])("br",null,null,-1),Pt=Object(a["n"])("br",null,null,-1),Rt=Object(a["n"])("span",{class:"c_title"},"lat纬度：",-1),Et=Object(a["n"])("br",null,null,-1),Tt=Object(a["n"])("br",null,null,-1),It=Object(a["n"])("span",{class:"c_title"},"高度(米)：",-1),Vt=Object(a["n"])("br",null,null,-1),Lt=Object(a["n"])("br",null,null,-1),Dt={class:"c_title"},Ft=Object(a["n"])("br",null,null,-1),zt=Object(a["n"])("br",null,null,-1),Nt={class:"c_title"},Bt=Object(a["n"])("br",null,null,-1),Jt={class:"c_title"},Gt=Object(a["n"])("br",null,null,-1),Ut={class:"c_title"},Ht=Object(a["n"])("br",null,null,-1),Wt={class:"c_title"},qt=Object(a["n"])("br",null,null,-1),At={class:"c_title"},Kt=Object(a["n"])("br",null,null,-1),$t={class:"c_title"},Xt=Object(a["n"])("br",null,null,-1),Zt=Object(a["m"])("保存当前设置");Object(a["F"])();var Yt=Ot((function(e,t,n,i,r,o){var l=Object(a["N"])("el-select-v2"),c=Object(a["N"])("el-input"),s=Object(a["N"])("el-color-picker"),u=Object(a["N"])("el-slider"),d=Object(a["N"])("el-button"),f=Object(a["N"])("PannelBox"),p=Object(a["N"])("CesiumContainer");return Object(a["E"])(),Object(a["i"])(p,{"onUpdate:onReadyMap":e.onReadyMap},{configCom:Ot((function(){return[Object(a["n"])("div",jt,[Object(a["n"])(f,null,{content:Ot((function(){return[Object(a["n"])("div",wt,[_t,Object(a["n"])(l,{modelValue:e.selEffect,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selEffect=t}),size:"mini",placeholder:"效果类型",onChange:e.effect_selEffect_change,options:e.effectsList},null,8,["modelValue","onChange","options"]),kt,xt,Mt,Object(a["n"])(c,{class:"input_c_p",size:"small",modelValue:e.positionEffect[0],"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.positionEffect[0]=t}),onChange:e.effect_position_change},null,8,["modelValue","onChange"]),St,Pt,Rt,Object(a["n"])(c,{class:"input_c_p",size:"small",modelValue:e.positionEffect[1],"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.positionEffect[1]=t}),onChange:e.effect_position_change},null,8,["modelValue","onChange"]),Et,Tt,"SpreadWall"===e.selEffect?(Object(a["E"])(),Object(a["i"])(a["b"],{key:0},[It,Object(a["n"])(c,{class:"input_c_p",size:"small",modelValue:e.positionEffect[2],"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.positionEffect[2]=t}),onChange:e.effect_position_change},null,8,["modelValue","onChange"]),Vt,Lt],64)):Object(a["j"])("",!0),Object(a["n"])("span",Dt,"效果颜色："+Object(a["R"])(e.color),1),Object(a["n"])(s,{modelValue:e.color,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.color=t}),"show-alpha":"",size:"mini",class:"color-pick-s",onActiveChange:e.change_color},null,8,["modelValue","onActiveChange"]),Ft,zt,Object(a["n"])("span",Nt,"最大半径："+Object(a["R"])(e.maxRadius)+" 米",1),Object(a["n"])(u,{modelValue:e.maxRadius,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.maxRadius=t}),min:200,max:1e4,step:200,onInput:e.effect_maxRadius_change},null,8,["modelValue","onInput"]),Bt,"CircleScan"!==e.selEffect?(Object(a["E"])(),Object(a["i"])(a["b"],{key:1},[Object(a["n"])("span",Jt,"效果延迟："+Object(a["R"])(e.duration)+" 毫秒",1),Object(a["n"])(u,{modelValue:e.duration,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.duration=t}),min:500,max:1e4,step:500,onInput:e.effect_duration_change},null,8,["modelValue","onInput"]),Gt],64)):Object(a["j"])("",!0),"CircleScan"===e.selEffect?(Object(a["E"])(),Object(a["i"])(a["b"],{key:2},[Object(a["n"])("span",Ut,"步长："+Object(a["R"])(e.step),1),Object(a["n"])(u,{modelValue:e.step,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.step=t}),min:-.3,max:.3,step:.005,onInput:e.effect_step_change},null,8,["modelValue","min","max","step","onInput"]),Ht],64)):Object(a["j"])("",!0),"CircleWave"===e.selEffect?(Object(a["E"])(),Object(a["i"])(a["b"],{key:3},[Object(a["n"])("span",Wt,"波浪条纹数："+Object(a["R"])(e.waveCount)+" 个",1),Object(a["n"])(u,{modelValue:e.waveCount,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.waveCount=t}),min:1,max:10,step:1,onInput:e.effect_waveCount_change},null,8,["modelValue","onInput"]),qt],64)):Object(a["j"])("",!0),"SpreadWall"===e.selEffect?(Object(a["E"])(),Object(a["i"])(a["b"],{key:4},[Object(a["n"])("span",At,"效果墙高度："+Object(a["R"])(e.height)+" 米",1),Object(a["n"])(u,{modelValue:e.height,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.height=t}),min:0,max:1e3,step:20,onInput:e.effect_height_change},null,8,["modelValue","onInput"]),Kt,Object(a["n"])("span",$t,"多边形边数："+Object(a["R"])(e.edgeCount)+" 个{0为圆形}",1),Object(a["n"])(u,{modelValue:e.edgeCount,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.edgeCount=t}),min:0,max:10,step:1,onInput:e.effect_edgeCount_change},null,8,["modelValue","onInput"]),Xt],64)):Object(a["j"])("",!0),Object(a["n"])(d,{onClick:e.save,size:"mini"},{default:Ot((function(){return[Zt]})),_:1},8,["onClick"])])]})),_:1})])]})),_:1},8,["onUpdate:onReadyMap"])})),Qt=n("45eb"),en=n("7e84"),tn=n("262e"),nn=n("2caf"),an=function(){function e(t,n){Object(R["a"])(this,e),this.viewer=t,this.id=n,this.duration=1e3,this.maxRadius=1e3,this.pointDraged=null,this.leftDownFlag=!1}return Object(E["a"])(e,[{key:"change_duration",value:function(e){this.duration=e}},{key:"change_color",value:function(e){var t=this.viewer.entities.getById(this.id);t._ellipse._material.color=new Cesium.Color.fromCssColorString(e)}},{key:"change_position",value:function(e){var t=Cesium.Cartesian3.fromDegrees(parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2])),n=this.viewer.entities.getById(this.id);n.position=t}},{key:"del",value:function(){this.viewer.entities.removeById(this.id)}},{key:"add",value:function(e,t,n,a){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=this;function o(e){r.pointDraged=r.viewer.scene.pick(e.position),r.pointDraged&&r.pointDraged.id&&r.pointDraged.id.id===r.id&&(r.leftDownFlag=!0,r.viewer.scene.screenSpaceCameraController.enableRotate=!1)}function l(e){r.leftDownFlag=!1,r.pointDraged=null,r.viewer.scene.screenSpaceCameraController.enableRotate=!0}function c(e){if(!0===r.leftDownFlag&&null!==r.pointDraged&&void 0!==r.pointDraged){var t=r.viewer.camera.getPickRay(e.endPosition),n=r.viewer.scene.globe.pick(t,r.viewer.scene);r.pointDraged.id.position=n;var a=r.viewer.scene.globe.ellipsoid,i=a.cartesianToCartographic(n),o=Cesium.Math.toDegrees(i.latitude),l=Cesium.Math.toDegrees(i.longitude),c=i.height;c=c<0?0:c,r.update_position&&r.update_position([l.toFixed(8),o.toFixed(8),c])}}this.duration=a,this.maxRadius=n,i&&(this.viewer.screenSpaceEventHandler.setInputAction(o,Cesium.ScreenSpaceEventType.LEFT_DOWN),this.viewer.screenSpaceEventHandler.setInputAction(l,Cesium.ScreenSpaceEventType.LEFT_UP),this.viewer.screenSpaceEventHandler.setInputAction(c,Cesium.ScreenSpaceEventType.MOUSE_MOVE))}}]),e}(),rn=an;function on(e,t){this._definitionChanged=new Cesium.Event,this._color=void 0,this._colorSubscription=void 0,this.color=e,this.duration=t,this._time=(new Date).getTime()}function ln(){console.log("EllipsoidFadeMaterialProperty init")}Object.defineProperties(on.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color")}),on.prototype.getType=function(e){return"EllipsoidFade"},on.prototype.getValue=function(e,t){return Cesium.defined(t)||(t={}),t.color=Cesium.Property.getValueOrClonedDefault(this._color,e,Cesium.Color.WHITE,t.color),t.time=((new Date).getTime()-this._time)%this.duration/this.duration,t},on.prototype.equals=function(e){var t=this===e||e instanceof on&&Cesium.Property.equals(this._color,e._color);return t},Cesium.EllipsoidFadeMaterialProperty=on,Cesium.Material.EllipsoidFadeType="EllipsoidFade",Cesium.Material.EllipsoidFadeSource="\nczm_material czm_getMaterial(czm_materialInput materialInput) {\n\tczm_material material = czm_getDefaultMaterial(materialInput);\n  \n\tmaterial.diffuse = 1.5 * color.rgb;\n\tvec2 st = materialInput.st;\n\tfloat dis = distance(st, vec2(0.5, 0.5));\n  float bl = .0;\n  float offset = 0.42;\n  if( dis > 0.5) {\n\t\tmaterial.alpha = 0.0;\n\t\tdiscard;\n\t}\n  if( dis > offset) {\n    bl = color.a * 1.0 / (0.5 - offset) * (dis - offset);\n    material.alpha =  pow(bl, 3.0);\n\t} else {\n    material.alpha = 0.0;\n\t\tdiscard;\n  }\n\treturn material;\n}\n",Cesium.Material._materialCache.addMaterial(Cesium.Material.EllipsoidFadeType,{fabric:{type:Cesium.Material.EllipsoidFadeType,uniforms:{color:new Cesium.Color(1,0,0,.5),time:0},source:Cesium.Material.EllipsoidFadeSource},translucent:function(e){return!0}});var cn=function(e){Object(tn["a"])(n,e);var t=Object(nn["a"])(n);function n(e,a){return Object(R["a"])(this,n),t.call(this,e,a)}return Object(E["a"])(n,[{key:"add",value:function(e,t,a,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];ln(),Object(Qt["a"])(Object(en["a"])(n.prototype),"add",this).call(this,e,t,a,i,r);var o=this,l=1,c=this.viewer.entities.add({id:o.id,position:Cesium.Cartesian3.fromDegrees(e[0],e[1],e[2]),ellipse:{semiMajorAxis:new Cesium.CallbackProperty((function(e){return l+=1e3/o.duration*50,l>o.maxRadius&&(l=1),l}),!1),semiMinorAxis:new Cesium.CallbackProperty((function(e){return l}),!1),material:new Cesium.EllipsoidFadeMaterialProperty(new Cesium.Color.fromCssColorString(t),o.duration)}});return c.id}}]),n}(rn),sn=cn;function un(e){this._definitionChanged=new Cesium.Event,this._color=void 0,this._colorSubscription=void 0,this.color=e,this._time=(new Date).getTime()}function dn(){console.log("HexagonSpreadMaterialProperty init")}Object.defineProperties(un.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color")}),un.prototype.getType=function(e){return Cesium.Material.HexagonSpreadMaterialType},un.prototype.getValue=function(e,t){return Cesium.defined(t)||(t={}),t.color=Cesium.Property.getValueOrClonedDefault(this._color,e,Cesium.Color.WHITE,t.color),t.image=Cesium.Material.HexagonSpreadMaterialImage,t},un.prototype.equals=function(e){var t=this===e||e instanceof un&&Cesium.Property.equals(this._color,e._color);return t},Cesium.HexagonSpreadMaterialProperty=un,Cesium.Material.HexagonSpreadMaterialType="HexagonSpreadMaterial",Cesium.Material.HexagonSpreadMaterialImage="https://mapv-data.oss-cn-hangzhou.aliyuncs.com/pic/hexagon.png",Cesium.Material.HexagonSpreadSource="\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n     czm_material material = czm_getDefaultMaterial(materialInput);\n     vec2 st = materialInput.st;\n     vec4 colorImage = texture2D(image,  vec2(st));\n     material.alpha = colorImage.a * color.a * 0.5;\n     material.diffuse =  1.8 * color.rgb  ;\n     return material;\n }\n ",Cesium.Material._materialCache.addMaterial(Cesium.Material.HexagonSpreadMaterialType,{fabric:{type:Cesium.Material.HexagonSpreadMaterialType,uniforms:{color:new Cesium.Color(1,0,0,.5),image:Cesium.Material.HexagonSpreadMaterialImage},source:Cesium.Material.HexagonSpreadSource},translucent:function(e){return!0}});var fn=function(e){Object(tn["a"])(n,e);var t=Object(nn["a"])(n);function n(e,a){return Object(R["a"])(this,n),t.call(this,e,a)}return Object(E["a"])(n,[{key:"add",value:function(e,t,a,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];dn(),Object(Qt["a"])(Object(en["a"])(n.prototype),"add",this).call(this,e,t,a,i,r);var o=this,l=1;this.viewer.entities.add({id:o.id,position:Cesium.Cartesian3.fromDegrees(e[0],e[1],e[2]),ellipse:{semiMajorAxis:new Cesium.CallbackProperty((function(e){return l+=1e3/o.duration*50,l>o.maxRadius&&(l=1),l}),!1),semiMinorAxis:new Cesium.CallbackProperty((function(e){return l}),!1),material:new Cesium.HexagonSpreadMaterialProperty(new Cesium.Color.fromCssColorString(t))}})}}]),n}(rn),pn=fn;function mn(e,t){this._definitionChanged=new Cesium.Event,this.color=e||Cesium.Color.YELLOW,this.speed=t||10}function hn(){console.log("ScanlineMaterialProperty init")}Object.defineProperties(mn.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed")}),mn.prototype.getType=function(e){return Cesium.Material.ScanlineType},mn.prototype.getValue=function(e,t){return Cesium.defined(t)||(t={}),t.color=Cesium.Property.getValueOrClonedDefault(this._color,e,Cesium.Color.WHITE,t.color),t.speed=this.speed,t},mn.prototype.equals=function(e){var t=this===e||e instanceof mn&&Cesium.Property.equals(this.color,e.color)&&Cesium.Property.equals(this.speed,e.speed);return t},Cesium.ScanlineMaterialProperty=mn,Cesium.Material.ScanlineType="Scanline",Cesium.Material.ScanlineSource="\nuniform vec4 color;\nuniform float speed;\nfloat circle(vec2 uv, float r, float blur) {\n  float d = length(uv) * 1.0; /* 2.0 */\n  float c = smoothstep(r+blur, r, d);\n  return c;\n}\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n  czm_material material = czm_getDefaultMaterial(materialInput);\n  vec2 st = materialInput.st - 0.5;\n  material.diffuse = 2.8 * color.rgb;\n  material.emission = vec3(0);\n  float t = fract(czm_frameNumber * (11000.0 - speed) / 500000.0);\n  float s = 0.3;\n  float radius1 = smoothstep(.0, s, t) * 0.5;\n  float alpha1 = circle(st, radius1, 0.01) * circle(st, radius1, -0.01);\n  float alpha2 = circle(st, radius1, 0.01 - radius1) * circle(st, radius1, 0.01);\n  float radius2 = 0.5 + smoothstep(s, 1.0, t) * 0.5;\n  float alpha3 = circle(st, radius1, radius2 + 0.01 - radius1) * circle(st, radius1, -0.01);\n  material.alpha = smoothstep(1.0, s, t) * (alpha1 + alpha2*0.1 + alpha3*0.1);\n  material.alpha *= color.a ;\n  return material;\n}\n",Cesium.Material._materialCache.addMaterial(Cesium.Material.ScanlineType,{fabric:{type:Cesium.Material.ScanlineType,uniforms:{color:new Cesium.Color(1,0,0,.5),time:0,speed:10},source:Cesium.Material.ScanlineSource},translucent:function(e){return!0}});var vn=function(e){Object(tn["a"])(n,e);var t=Object(nn["a"])(n);function n(e,a){return Object(R["a"])(this,n),t.call(this,e,a)}return Object(E["a"])(n,[{key:"change_duration",value:function(e){Object(Qt["a"])(Object(en["a"])(n.prototype),"change_duration",this).call(this,e);var t=this.viewer.entities.getById(this.id);t._ellipse._material.speed=e}},{key:"add",value:function(e,t,a,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];hn(),Object(Qt["a"])(Object(en["a"])(n.prototype),"add",this).call(this,e,t,a,i,r);var o=this;this.viewer.entities.add({id:o.id,position:Cesium.Cartesian3.fromDegrees(e[0],e[1],e[2]),ellipse:{semiMinorAxis:new Cesium.CallbackProperty((function(e){return o.maxRadius}),!1),semiMajorAxis:new Cesium.CallbackProperty((function(e){return o.maxRadius}),!1),material:new Cesium.ScanlineMaterialProperty(new Cesium.Color.fromCssColorString(t),i),classificationType:Cesium.ClassificationType.BOTH}})}}]),n}(rn),gn=vn;function bn(e){this._definitionChanged=new Cesium.Event,this._color=void 0,this._colorSubscription=void 0,this.color=e.color,this.duration=Cesium.defaultValue(e.duration,1e3),this.count=Cesium.defaultValue(e.count,2),this.count<=0&&(this.count=1),this.gradient=Cesium.defaultValue(e.gradient,.1),0===this.gradient&&(this.gradient=0),this.gradient>1&&(this.gradient=1),this._time=(new Date).getTime()}function Cn(){console.log("CircleWaveMaterialProperty init")}Object.defineProperties(bn.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color"),duration:Cesium.createPropertyDescriptor("duration"),count:Cesium.createPropertyDescriptor("count")}),bn.prototype.getType=function(e){return Cesium.Material.CircleWaveMaterialType},bn.prototype.getValue=function(e,t){return Cesium.defined(t)||(t={}),t.color=Cesium.Property.getValueOrClonedDefault(this._color,e,Cesium.Color.WHITE,t.color),t.time=((new Date).getTime()-this._time)%this.duration/this.duration,t.count=this.count,t.gradient=1+10*(1-this.gradient),t},bn.prototype.equals=function(e){var t=this===e||e instanceof bn&&Cesium.Property.equals(this._color,e._color);return t},Cesium.CircleWaveMaterialProperty=bn,Cesium.Material.CircleWaveMaterialType="CircleWaveMaterial",Cesium.Material.CircleWaveSource="\n                                  czm_material czm_getMaterial(czm_materialInput materialInput) {\n                                    czm_material material = czm_getDefaultMaterial(materialInput);\n                                    material.diffuse = 1.5 * color.rgb;\n                                    vec2 st = materialInput.st;\n                                    vec3 str = materialInput.str;\n                                    float dis = distance(st, vec2(0.5, 0.5));\n                                    float per = fract(time);\n                                    if (abs(str.z) > 0.001) {\n                                      discard;\n                                    }\n                                    if (dis > 0.5) {\n                                      discard;\n                                    } else {\n                                      float perDis = 0.5 / count;\n                                      float disNum;\n                                      float bl = .0;\n                                      for (int i = 0; i <= 9; i++) {\n                                        if (float(i) <= count) {\n                                          disNum = perDis *float(i) - dis + per / count;\n                                          if (disNum > 0.0) {\n                                            if (disNum < perDis) {\n                                              bl = 1.0 - disNum / perDis;\n                                            } else if(disNum - perDis < perDis) {\n                                              bl = 1.0 - abs(1.0 - disNum / perDis);\n                                            }\n                                            material.alpha = pow(bl, gradient);\n                                          }\n                                        }\n                                      }\n                                    }\n                                    return material;\n                                  }\n                                  ",Cesium.Material._materialCache.addMaterial(Cesium.Material.CircleWaveMaterialType,{fabric:{type:Cesium.Material.CircleWaveMaterialType,uniforms:{color:new Cesium.Color(1,0,0,1),time:1,count:1,gradient:.1},source:Cesium.Material.CircleWaveSource},translucent:function(e){return!0}});var yn=function(e){Object(tn["a"])(n,e);var t=Object(nn["a"])(n);function n(e,a){return Object(R["a"])(this,n),t.call(this,e,a)}return Object(E["a"])(n,[{key:"change_duration",value:function(e){Object(Qt["a"])(Object(en["a"])(n.prototype),"change_duration",this).call(this,e);var t=this.viewer.entities.getById(this.id);t._ellipse._material.duration=e}},{key:"change_waveCount",value:function(e){var t=this.viewer.entities.getById(this.id);t._ellipse._material.count=e}},{key:"add",value:function(e,t,a,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;Cn(),Object(Qt["a"])(Object(en["a"])(n.prototype),"add",this).call(this,e,t,a,i,r);var l=this;this.count=o,this.viewer.entities.add({id:l.id,position:Cesium.Cartesian3.fromDegrees(e[0],e[1],e[2]),ellipse:{semiMinorAxis:new Cesium.CallbackProperty((function(e){return l.maxRadius}),!1),semiMajorAxis:new Cesium.CallbackProperty((function(e){return l.maxRadius}),!1),material:new Cesium.CircleWaveMaterialProperty({duration:i,gradient:0,color:new Cesium.Color.fromCssColorString(t),count:o})}})}}]),n}(rn),On=yn,jn=(n("a15b"),n("cb29"),function(e){Object(tn["a"])(n,e);var t=Object(nn["a"])(n);function n(e,a){var i;return Object(R["a"])(this,n),i=t.call(this,e,a),i.step=-.2,i.scanColor="rgba(19, 206, 102, 0.8)",i}return Object(E["a"])(n,[{key:"change_step",value:function(e){this.step=e}},{key:"change_color",value:function(e){this.scanColor=e}},{key:"add",value:function(e,t,a,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(Qt["a"])(Object(en["a"])(n.prototype),"add",this).call(this,e,t,a,i,r),this.step=i,this.scanColor=t;var o=this,l=0,c=document.createElement("canvas");c.setAttribute("width","800px"),c.setAttribute("height","800px"),c.setAttribute("id","canvas-a");var s=document.createElement("canvas");s.setAttribute("width","800px"),s.setAttribute("height","800px"),s.setAttribute("id","canvas-b");var u=c;this.viewer.entities.add({id:o.id,position:Cesium.Cartesian3.fromDegrees(e[0],e[1],e[2]),ellipse:{semiMinorAxis:new Cesium.CallbackProperty((function(e){return o.maxRadius}),!1),semiMajorAxis:new Cesium.CallbackProperty((function(e){return o.maxRadius}),!1),rotation:new Cesium.CallbackProperty((function(){return l-=o.step||-.02,l}),!1),stRotation:new Cesium.CallbackProperty((function(){return l-=o.step||-.02,l}),!1),material:new Cesium.ImageMaterialProperty({image:new Cesium.CallbackProperty((function(){u="canvas-a"===u.id?s:c;var e=u.getContext("2d");e.clearRect(0,0,u.width,u.height);var t=o.scanColor||"rgba(255,0,0,1)",n=t.split(",");n[3]="0)";var a=n.join(),i=e.createLinearGradient(175,100,u.width,u.height/2);return i.addColorStop(0,t),i.addColorStop(1,a),e.fillStyle=i,e.beginPath(),e.moveTo(400,400),e.arc(400,400,400,-30/180*Math.PI,0*Math.PI),e.fill(),u}),!1),transparent:!0})}})}}]),n}(rn)),wn=jn;function _n(e){this._definitionChanged=new Cesium.Event,this._color=void 0,this._colorSubscription=void 0,this.color=e}function kn(){console.log("WallGradientsMaterialProperty init")}Object.defineProperties(_n.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color")}),_n.prototype.getType=function(e){return Cesium.Material.WallGradientsType},_n.prototype.getValue=function(e,t){return Cesium.defined(t)||(t={}),t.color=Cesium.Property.getValueOrClonedDefault(this._color,e,Cesium.Color.WHITE,t.color),t.image=Cesium.Material.WallGradientsImage,t},_n.prototype.equals=function(e){var t=this===e||e instanceof _n&&Cesium.Property.equals(this._color,e._color);return t},Cesium.WallGradientsMaterialProperty=_n,Cesium.Material.WallGradientsType="WallGradients",Cesium.Material.WallGradientsImage="https://mapv-data.oss-cn-hangzhou.aliyuncs.com/pic/wallgradients.png",Cesium.Material.WallGradientsSource="\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n     czm_material material = czm_getDefaultMaterial(materialInput);\n     vec2 st = materialInput.st;\n     vec4 colorImage = texture2D(image, vec2(fract(st.t - time), st.t));\n     material.alpha = colorImage.a * color.a;\n     material.diffuse =  2.5 * color.rgb  ;\n     return material;\n }\n",Cesium.Material._materialCache.addMaterial(Cesium.Material.WallGradientsType,{fabric:{type:Cesium.Material.WallGradientsType,uniforms:{color:new Cesium.Color(0,1,0,.5),image:Cesium.Material.WallGradientsImage,time:0},source:Cesium.Material.WallGradientsSource},translucent:function(e){return!0}});var xn=function(){function e(t,n){Object(R["a"])(this,e),this.viewer=t,this.id=n,this.duration=1e3,this.maxRadius=1e3,this.pointDraged=null,this.leftDownFlag=!1,this.position=null,this.edgeCount=0}return Object(E["a"])(e,[{key:"del",value:function(){this.viewer.entities.removeById(this.id)}},{key:"change_position",value:function(e){var t=Cesium.Cartographic.fromDegrees(parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));t.height<0&&(t.height=0),this.position=t}},{key:"change_color",value:function(e){var t=this.viewer.entities.getById(this.id);t._wall._material.color=new Cesium.Color.fromCssColorString(e)}},{key:"change_height",value:function(e){this.wallHeight=e}},{key:"change_duration",value:function(e){this.duration=e}},{key:"add",value:function(e,t,n,a,i){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];kn(),e=Cesium.Cartographic.fromDegrees(e[0],e[1],e[2]),e.height<0&&(e.height=0),this.position=e,this.wallHeight=i,this.duration=a,this.maxRadius=n,this.edgeCount=r;var l=n,c=this.getrPositions({},n,e,r,l),s=this;o&&this.mouseEvent(),this.viewer.entities.add({id:s.id,wall:{positions:new Cesium.CallbackProperty((function(e){var t=s.getPositions(l,s.maxRadius,s.getrPositions(c,s.maxRadius,s.position,s.edgeCount,l),s.getcenterDegrees(s.position),s.duration,s.edgeCount);return l=t.currentRadius,c=t.rPositions,c[l]}),!1),minimumHeights:new Cesium.CallbackProperty((function(e){var t=s.getminimumHeights(c[s.maxRadius]);return t}),!1),maximumHeights:new Cesium.CallbackProperty((function(e){var t=s.getmaximumHeights(c[s.maxRadius]);return t}),!1),material:new Cesium.WallGradientsMaterialProperty(new Cesium.Color.fromCssColorString(t))}})}},{key:"mouseEvent",value:function(){var e=this;function t(t){e.pointDraged=e.viewer.scene.pick(t.position),e.pointDraged&&e.pointDraged.id&&e.pointDraged.id.id===e.id&&(e.leftDownFlag=!0,e.viewer.scene.screenSpaceCameraController.enableRotate=!1)}function n(t){e.leftDownFlag=!1,e.pointDraged=null,e.viewer.scene.screenSpaceCameraController.enableRotate=!0}function a(t){if(!0===e.leftDownFlag&&null!==e.pointDraged&&void 0!==e.pointDraged){var n=e.viewer.camera.getPickRay(t.endPosition),a=e.viewer.scene.globe.pick(n,e.viewer.scene),i=e.viewer.scene.globe.ellipsoid,r=i.cartesianToCartographic(a),o=Cesium.Math.toDegrees(r.latitude),l=Cesium.Math.toDegrees(r.longitude),c=r.height;c=c<0?0:c,e.update_position&&e.update_position([l.toFixed(8),o.toFixed(8),c]),e.change_position([l.toFixed(8),o.toFixed(8),c])}}this.viewer.screenSpaceEventHandler.setInputAction(t,Cesium.ScreenSpaceEventType.LEFT_DOWN),this.viewer.screenSpaceEventHandler.setInputAction(n,Cesium.ScreenSpaceEventType.LEFT_UP),this.viewer.screenSpaceEventHandler.setInputAction(a,Cesium.ScreenSpaceEventType.MOUSE_MOVE)}},{key:"getrPositions",value:function(e,t,n,a,i){var r=this.getcenterDegrees(this.position);return n=this.generateCirclePoints([r[0],r[1]],i,a),n=this.pointsToPositions(n,r[2]),e[t]=n,e}},{key:"getcenterDegrees",value:function(e){var t=[Cesium.Math.toDegrees(e.longitude),Cesium.Math.toDegrees(e.latitude),e.height];return t}},{key:"getminimumHeights",value:function(e){return new Array(e.length).fill(this.position.height)}},{key:"getmaximumHeights",value:function(e){return new Array(e.length).fill(this.position.height+this.wallHeight)}},{key:"getPositions",value:function(e,t,n,a,i,r){if(e+=1e3/i*20,e>t&&(e=1))return{rPositions:n,currentRadius:e};var o=this.generateCirclePoints([a[0],a[1]],e,r);return o=this.pointsToPositions(o,a[2]),n[e]=o,{rPositions:n,currentRadius:e}}},{key:"pointsToPositions",value:function(e,t){var n=[];return e.map((function(e){n.push(Cesium.Cartesian3.fromDegrees(e[0],e[1],t))})),n}},{key:"generateCirclePoints",value:function(e,t,n){var a=[];if(n)for(var i=360/n,r=0;r<=360;r+=i)a.push(this.getCirclePoint(e[0],e[1],r,t));else for(var o=0;o<=360;o+=2)a.push(this.getCirclePoint(e[0],e[1],o,t));return a}},{key:"getCirclePoint",value:function(e,t,n,a){var i=a*Math.sin(n*Math.PI/180);return a*=Math.cos(n*Math.PI/180),[180*(i/((n=6356725+21412*(90-t)/90)*Math.cos(t*Math.PI/180))+e*Math.PI/180)/Math.PI,180*(a/n+t*Math.PI/180)/Math.PI]}}]),e}(),Mn=xn,Sn=Object(a["o"])({name:"EffectCongfig",components:{CesiumContainer:be,PannelBox:ke},setup:function(){var e=Object(a["J"])("CircleDiffusion");e.value=F("selEffect")?F("selEffect"):e.value;var t=Object(a["J"])([{value:"CircleDiffusion",label:"圆扩散"},{value:"Scanline",label:"线圈发光扩散"},{value:"CircleWave",label:"水波纹"},{value:"HexagonSpread",label:"六边形扩散"},{value:"CircleScan",label:"雷达圆扫"},{value:"SpreadWall",label:"墙推扩散"}]),n=Object(a["J"])("rgba(198, 6, 88, 0.7)");n.value=F("color")?F("color"):n.value;var i=Object(a["J"])(3e3);i.value=isNaN(F("duration","int"))?i.value:F("duration","int");var r=Object(a["J"])(1e3);r.value=isNaN(F("maxRadius","int"))?r.value:F("maxRadius","int");var o=Object(a["J"])(3);o.value=isNaN(F("waveCount","int"))?o.value:F("waveCount","int");var l=Object(a["J"])(-.01);l.value=isNaN(F("step","float"))?l.value:F("step","float");var c=Object(a["J"])(500);c.value=isNaN(F("height","int"))?c.value:F("height","int");var s=Object(a["J"])(5);s.value=isNaN(F("edgeCount","int"))?s.value:F("edgeCount","int");var u=Object(a["J"])([113.9218,22.5116,0]);u.value=F("position","array")?F("position","array"):u.value;var d=null,f=function(){var t=new Pe(window.Gviewer);t.init(),p(e.value)},p=function(e){d&&d.del();var t=u.value;switch(t=[parseFloat(t[0]),parseFloat(t[1]),parseFloat(t[2])],e){case"CircleDiffusion":d=new sn(window.Gviewer,"effect-set-config"+e),d.add(t,n.value,r.value,i.value,!0);break;case"Scanline":d=new gn(window.Gviewer,"effect-set-config"+e),d.add(t,n.value,r.value,i.value,!0);break;case"CircleWave":d=new On(window.Gviewer,"effect-set-config"+e),d.add(t,n.value,r.value,i.value,!0,o.value);break;case"HexagonSpread":d=new pn(window.Gviewer,"effect-set-config"+e),d.add(t,n.value,r.value,i.value,!0);break;case"CircleScan":d=new wn(window.Gviewer,"effect-set-config"+e),d.add(t,n.value,r.value,l.value,!0);break;case"SpreadWall":d=new Mn(window.Gviewer,"effect-set-config"+e),d.add(t,n.value,r.value,i.value,c.value,s.value,!0);break;default:}d.update_position=m},m=function(e){u.value=e},h=function(e){d.change_position(u.value)},v=function(e){d&&window.Gviewer.entities&&d.change_height(e)},g=function(e){d&&window.Gviewer.entities&&(d.edgeCount=e)},b=function(e){e||(e="rgba(255,255,255,1)",n.value=e),d&&window.Gviewer.entities&&d.change_color(e)},C=function(e){d&&window.Gviewer.entities&&d.change_duration(e)},y=function(e){d&&window.Gviewer.entities&&(d.maxRadius=e)},O=function(e){d&&window.Gviewer.entities&&d.change_waveCount(e)},j=function(e){d&&window.Gviewer.entities&&d.change_step(e)},w=function(){Re["b"].confirm("提交保存当前效果配置信息, 是否继续?","提示",{confirmButtonText:"保存",cancelButtonText:"取消",type:"warning"}).then((function(){window.parent.postMessage({selEffect:e.value,color:n.value,duration:i.value,maxRadius:r.value,waveCount:o.value,step:l.value,height:c.value,edgeCount:s.value,positionx:u.value[0],positiony:u.value[1],positionz:u.value[2]},"*"),Object(Re["a"])({type:"success",message:"保存成功!"})})).catch((function(e){console.log(e)}))};return{onReadyMap:f,selEffect:e,effectsList:t,change_color:b,color:n,duration:i,effect_duration_change:C,maxRadius:r,effect_maxRadius_change:y,positionEffect:u,effect_position_change:h,waveCount:o,effect_waveCount_change:O,effect_selEffect_change:p,step:l,effect_step_change:j,height:c,effect_height_change:v,edgeCount:s,effect_edgeCount_change:g,save:w}}});n("12cd"),n("4453");Sn.render=Yt,Sn.__scopeId="data-v-78f23ff3";var Pn=Sn,Rn=Object(a["gb"])("data-v-7c95958c");Object(a["H"])("data-v-7c95958c");var En={class:"ImageryCongfig"},Tn={class:"imagery_con"},In={class:"c_title"},Vn={class:"c_title"},Ln={class:"c_title"},Dn={class:"c_title"},Fn={class:"c_title"},zn=Object(a["n"])("span",{class:"c_title"},"是否反色：",-1),Nn=Object(a["n"])("br",null,null,-1),Bn={class:"c_title"},Jn=Object(a["n"])("br",null,null,-1),Gn=Object(a["n"])("br",null,null,-1),Un=Object(a["m"])("保存当前配置");Object(a["F"])();var Hn=Rn((function(e,t,n,i,r,o){var l=Object(a["N"])("el-slider"),c=Object(a["N"])("el-switch"),s=Object(a["N"])("el-color-picker"),u=Object(a["N"])("el-button"),d=Object(a["N"])("PannelBox"),f=Object(a["N"])("CesiumContainer");return Object(a["E"])(),Object(a["i"])(f,{ref:"CesiumContainerRef",isImagery:!0,"onUpdate:onReadyMap":e.onReadyMap},{configCom:Rn((function(){return[Object(a["n"])("div",En,[Object(a["n"])(d,null,{content:Rn((function(){return[Object(a["n"])("div",Tn,[Object(a["n"])("span",In,"饱和度："+Object(a["R"])(e.saturation),1),Object(a["n"])(l,{modelValue:e.saturation,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.saturation=t}),min:-5,max:5,step:.05,onInput:t[2]||(t[2]=function(t){return e.change_interfaceConfig("saturation")})},null,8,["modelValue","step"]),Object(a["n"])("span",Vn,"亮度："+Object(a["R"])(e.brightness),1),Object(a["n"])(l,{modelValue:e.brightness,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.brightness=t}),min:-10,max:10,step:.1,onInput:t[4]||(t[4]=function(t){return e.change_interfaceConfig("brightness")})},null,8,["modelValue","step"]),Object(a["n"])("span",Ln,"对比度："+Object(a["R"])(e.contrast),1),Object(a["n"])(l,{modelValue:e.contrast,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.contrast=t}),min:-10,max:10,step:.1,onInput:t[6]||(t[6]=function(t){return e.change_interfaceConfig("contrast")})},null,8,["modelValue","step"]),Object(a["n"])("span",Dn,"色调："+Object(a["R"])(e.hue),1),Object(a["n"])(l,{modelValue:e.hue,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.hue=t}),min:-2,max:2,step:.02,onInput:t[8]||(t[8]=function(t){return e.change_interfaceConfig("hue")})},null,8,["modelValue","step"]),Object(a["n"])("span",Fn,"伽马校正："+Object(a["R"])(e.gamma),1),Object(a["n"])(l,{modelValue:e.gamma,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.gamma=t}),min:-5,max:5,step:.05,onInput:t[10]||(t[10]=function(t){return e.change_interfaceConfig("gamma")})},null,8,["modelValue","step"]),zn,Object(a["n"])(c,{modelValue:e.invertColor,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.invertColor=t}),onChange:t[12]||(t[12]=function(t){return e.change_interfaceConfig("invertColor")})},null,8,["modelValue"]),Nn,Object(a["n"])("span",Bn,"滤镜颜色："+Object(a["R"])(e.color),1),Object(a["n"])(s,{modelValue:e.color,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.color=t}),"color-format":"rgb",size:"mini",class:"color-pick-s",onActiveChange:t[14]||(t[14]=function(t){return e.change_interfaceConfig("color",t)})},null,8,["modelValue"]),Jn,Gn,Object(a["n"])(u,{onClick:e.save},{default:Rn((function(){return[Un]})),_:1},8,["onClick"])])]})),_:1})])]})),_:1},8,["onUpdate:onReadyMap"])})),Wn=Object(a["o"])({name:"ImageryCongfig",components:{CesiumContainer:be,PannelBox:ke},setup:function(){var e=Object(a["J"])(1),t=Object(a["J"])(1),n=Object(a["J"])(1),i=Object(a["J"])(0),r=Object(a["J"])(1),o=Object(a["J"])(!0),l=Object(a["J"])("rgb(255,255,255)"),c=Object(a["J"])(),s=function(){Re["b"].confirm("提交保存当前图层的配置信息, 是否继续?","提示",{confirmButtonText:"保存",cancelButtonText:"取消",type:"warning"}).then((function(){window.parent.postMessage({color:V(l.value),invertColor:o.value,interfaceConfig:{saturation:e.value,brightness:t.value,contrast:n.value,hue:i.value,gamma:r.value}},"*"),Object(Re["a"])({type:"success",message:"保存成功!"})})).catch((function(e){console.log(e)}))};Object(a["B"])((function(){var a=F("urlArr");a=decodeURI(a),a=JSON.parse(a);var s=F("interfaceConfig");s=JSON.parse(decodeURI(s)),s&&((s.saturation||0===s.saturation)&&(e.value=s.saturation),(s.brightness||0===s.brightness)&&(t.value=s.brightness),(s.contrast||0===s.contrast)&&(n.value=s.contrast),(s.hue||0===s.hue)&&(i.value=s.hue),(s.gamma||0===s.gamma)&&(r.value=s.gamma));var u=F("invertColor","int");isNaN(u)||(o.value=1===u);var d=F("color");isNaN(d)&&!d||(l.value=d);var f=F("type"),p={type:f,classConfig:a,interfaceConfig:s,invertswitch:u,offset:"0,0",filterRGB:d};c.value.initImageryMap([p])}));var u=function(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=window.Gviewer.imageryLayers.get(0),u=null;try{switch(a){case"saturation":s[a]=e.value;break;case"brightness":s[a]=t.value;break;case"contrast":s[a]=n.value;break;case"hue":s[a]=i.value;break;case"gamma":s[a]=r.value;break;case"invertColor":s[a]=o.value?1:0;break;case"color":c||(c="rgba(255,255,255,0)",l.value=c),u=new Cesium.Color.fromCssColorString(c).toBytes(),s.filterRGB=[u[0],u[1],u[2]];break;default:}}catch(d){console.log(d)}},d=function(){};return{onReadyMap:d,CesiumContainerRef:c,saturation:e,change_interfaceConfig:u,brightness:t,contrast:n,hue:i,gamma:r,invertColor:o,color:l,save:s}}});n("5a04"),n("2d0d");Wn.render=Hn,Wn.__scopeId="data-v-7c95958c";var qn=Wn,An=Object(a["gb"])("data-v-410b6936");Object(a["H"])("data-v-410b6936");var Kn=Object(a["n"])("div",{class:"Cesium3DIndex",id:"cesiumContainer"},null,-1);Object(a["F"])();var $n=An((function(e,t,n,i,r,o){var l=Object(a["N"])("ShowLngLat"),c=Object(a["N"])("ButtonTools");return Object(a["E"])(),Object(a["i"])(a["b"],null,[Kn,Object(a["n"])(l,{ref:"ShowLngLatRef"},null,512),Object(a["n"])(c,{ref:"ButtonToolsRef"},null,512)],64)})),Xn=Object(a["gb"])("data-v-b0e4a3b0");Object(a["H"])("data-v-b0e4a3b0");var Zn={class:"ButtonToolsContainer"},Yn=Object(a["m"])("记录视角位置");Object(a["F"])();var Qn=Xn((function(e,t,n,i,r,o){var l=Object(a["N"])("el-button");return Object(a["E"])(),Object(a["i"])("div",Zn,[e.IsShow?(Object(a["E"])(),Object(a["i"])(l,{key:0,type:"info",plain:"",onClick:t[1]||(t[1]=function(t){return e.save()})},{default:Xn((function(){return[Yn]})),_:1})):Object(a["j"])("",!0)])})),ea=Object(a["o"])({name:"ButtonTools",components:{},setup:function(){var e=Object(a["J"])(!1),t=Object(a["J"])(),n=function(){var e=window.Gviewer.scene.camera,t=e.direction,n=e.up,a=e.position,i=window.Gviewer.scene.globe.ellipsoid,r=new Cesium.Cartesian3(a.x,a.y,a.z),o=i.cartesianToCartographic(r),l=Cesium.Math.toDegrees(o.latitude),c=Cesium.Math.toDegrees(o.longitude),s=o.height;Re["b"].confirm("提交保存此摄像头视图, 是否继续?","提示",{confirmButtonText:"保存",cancelButtonText:"取消",type:"warning"}).then(Object(P["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,re({lat:l,lng:c,height:s,direction:t,up:n});case 2:a=e.sent,i=a.reData,console.log(i),Object(Re["a"])({type:"success",message:"保存成功!"});case 6:case"end":return e.stop()}}),e)})))).catch((function(e){console.log(e)}))},i=function(){var n=Object(P["a"])(regeneratorRuntime.mark((function n(){var a,i,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,ae();case 2:if(t.value=n.sent.data,t.value=Object(oe["zipObject"])(Object(oe["map"])(t.value,"name"),Object(oe["map"])(t.value,"value")),e.value="1"===t.value.showSaveButton,"0"!==t.value.flytoView){n.next=7;break}return n.abrupt("return");case 7:a=window.Gviewer.scene.globe.ellipsoid,i=Cesium.Cartographic.fromDegrees(parseFloat(t.value.lng),parseFloat(t.value.lat),parseFloat(t.value.height)),r=a.cartographicToCartesian(i),window.Gviewer.scene.camera.flyTo({destination:{x:r.x,y:r.y,z:r.z},orientation:{direction:new Cesium.Cartesian3(parseFloat(t.value.direction_x),parseFloat(t.value.direction_y),parseFloat(t.value.direction_z)),up:new Cesium.Cartesian3(parseFloat(t.value.up_x),parseFloat(t.value.up_y),parseFloat(t.value.up_z))},duration:t.value.duration});case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(a["x"])((function(){})),{IsShow:e,FirstMapView:t,save:n,flyTo:i}}});n("8d52");ea.render=Qn,ea.__scopeId="data-v-b0e4a3b0";var ta=ea,na=function(){function e(t){Object(R["a"])(this,e),this.viewer=t,this.EffectsList=[]}return Object(E["a"])(e,[{key:"init",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ut();case 2:t=e.sent,n=this,t.data&&t.data.forEach((function(e,t){n.add(e,t)}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"add",value:function(e,t){var n,a=null,i=[e.lon,e.lat,e.height];switch(e.effect_type){case"CircleDiffusion":a=new sn(this.viewer,"effect-set-config"+e.effect_type+t),a.add(i,e.color,e.radius,e.duration);break;case"Scanline":a=new gn(this.viewer,"effect-set-config"+e.effect_type+t),a.add(i,e.color,e.radius,e.duration);break;case"CircleWave":a=new On(this.viewer,"effect-set-config"+e.effect_type+t),n=JSON.parse(e.ext),a.add(i,e.color,e.radius,e.duration,!1,n.waveCount);break;case"HexagonSpread":a=new pn(this.viewer,"effect-set-config"+e.effect_type+t),a.add(i,e.color,e.radius,e.duration);break;case"CircleScan":a=new wn(this.viewer,"effect-set-config"+e.effect_type+t),n=JSON.parse(e.ext),a.add(i,e.color,e.radius,n.step);break;case"SpreadWall":a=new Mn(this.viewer,"effect-set-config"+e.effect_type+t),n=JSON.parse(e.ext),a.add(i,e.color,e.radius,e.duration,n.height,n.edgeCount);break;default:}a&&this.EffectsList.push(a)}}]),e}(),aa=na,ia=Object(a["o"])({name:"Cesium3DIndex",components:{ShowLngLat:ve,ButtonTools:ta},setup:function(){var e=Object(a["J"])(),t=Object(a["J"])(),n=Object(a["J"])(),i=function(a,i){e=B.init(a,i),window.Gviewer=e,t.value.initCesiumHandler(e),n.value.flyTo();var r=new Pe(e);r.init();var o=new aa(e);o.init();var l=new bt(e,"road");l.init()};return Object(a["x"])((function(){Object(a["v"])(Object(P["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:return t=e.sent,e.next=5,se();case 5:n=e.sent,i(t,n);case 7:case"end":return e.stop()}}),e)}))))})),{viewer:e,ShowLngLatRef:t,ButtonToolsRef:n}}});n("5cc1");ia.render=$n,ia.__scopeId="data-v-410b6936";var ra=ia,oa=[{path:"/effect",name:"Effect",component:Pn},{path:"/imagery",name:"Imagery",component:qn},{path:"/lines",name:"Lines",component:yt},{path:"/titleset",name:"TitleSet",component:Te},{path:"/",name:"Cesium",component:ra}],la=Object(l["a"])({history:Object(l["b"])("/assets/addons/cesiummapv/vue3/"),routes:oa}),ca=la,sa=n("5502"),ua=Object(sa["a"])({state:{},mutations:{},actions:{},modules:{}}),da=(n("7dd6"),Object(a["h"])(o).use(ua).use(ca));da.use(Re["c"],{size:"small",zIndex:3e3}),da.mount("#app")},f5b7:function(e,t,n){"use strict";n("95ab")},f928:function(e,t,n){},fa20:function(e,t,n){},ff0c:function(e,t,n){}});