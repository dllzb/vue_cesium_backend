(function(e){function t(t){for(var i,r,l=t[0],c=t[1],s=t[2],d=0,f=[];d<l.length;d++)r=l[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&f.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(f.length)f.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,l=1;l<n.length;l++){var c=n[l];0!==a[c]&&(i=!1)}i&&(o.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},a={app:0},o=[];function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/assets/addons/cesiummapv/vue3/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0ac7":function(e,t,n){"use strict";n("9735")},1:function(e,t){},"12cd":function(e,t,n){"use strict";n("8c83")},"1cd3":function(e,t,n){},2:function(e,t){},"20b9":function(e,t,n){"use strict";n("63fc")},"21a6":function(e,t,n){"use strict";n("a74b")},"224a":function(e,t,n){},"2d0d":function(e,t,n){"use strict";n("51b8")},"35cb":function(e,t,n){"use strict";n("3a0c")},"3a0c":function(e,t,n){},"429a":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="429a"},4336:function(e,t,n){"use strict";n("1cd3")},4453:function(e,t,n){"use strict";n("b8c3")},"4aa1":function(e,t,n){"use strict";n("fcde")},"4ae2":function(e,t,n){"use strict";n("fa20")},"51b8":function(e,t,n){},"5a04":function(e,t,n){"use strict";n("f928")},"5e70":function(e,t,n){"use strict";n("224a")},6e3:function(e,t,n){"use strict";n("ca2f")},"63fc":function(e,t,n){},"7ca1":function(e,t,n){"use strict";n("b988")},"8c83":function(e,t,n){},"8d52":function(e,t,n){"use strict";n("a43b")},9202:function(e,t,n){"use strict";n("9d7f")},"95ab":function(e,t,n){},9735:function(e,t,n){},"9d7f":function(e,t,n){},a43b:function(e,t,n){},a74b:function(e,t,n){},b8c3:function(e,t,n){},b988:function(e,t,n){},ca2f:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("7a23");function a(e,t){var n=Object(i["N"])("router-view");return Object(i["E"])(),Object(i["i"])(n)}n("7ca1");const o={};o.render=a;var r=o,l=n("6c02"),c=Object(i["gb"])("data-v-4b0ef630");Object(i["H"])("data-v-4b0ef630");var s={class:"TitleSetCongfig"},u={class:"titleset_con"},d={class:"c_title"},f={class:"c_title"},p={class:"c_title"},m={class:"c_title"},v=Object(i["n"])("br",null,null,-1),h=Object(i["n"])("br",null,null,-1),g=Object(i["n"])("span",{class:"c_title"},"启用打光效果： ",-1),b=Object(i["n"])("br",null,null,-1),C={class:"c_title"},O=Object(i["n"])("br",null,null,-1),j=Object(i["n"])("br",null,null,-1),y={class:"c_title"},w=Object(i["n"])("br",null,null,-1),_=Object(i["m"])("保存当前配置");Object(i["F"])();var M=c((function(e,t,n,a,o,r){var l=Object(i["N"])("el-slider"),M=Object(i["N"])("el-color-picker"),P=Object(i["N"])("el-switch"),S=Object(i["N"])("el-button"),k=Object(i["N"])("PannelBox"),x=Object(i["N"])("CesiumContainer");return Object(i["E"])(),Object(i["i"])(x,{"onUpdate:onReadyMap":e.onReadyMap},{configCom:c((function(){return[Object(i["n"])("div",s,[Object(i["n"])(k,null,{content:c((function(){return[Object(i["n"])("div",u,[Object(i["n"])("span",d,"偏移量lon经度："+Object(i["R"])(e.offSet_lon/1e4),1),Object(i["n"])(l,{modelValue:e.offSet_lon,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.offSet_lon=t}),min:-100,max:100,step:1,"format-tooltip":e.formatTooltip,onInput:e.change_offset},null,8,["modelValue","format-tooltip","onInput"]),Object(i["n"])("span",f,"偏移量lat纬度："+Object(i["R"])(e.offSet_lat/1e4),1),Object(i["n"])(l,{modelValue:e.offSet_lat,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.offSet_lat=t}),min:-100,max:100,step:1,"format-tooltip":e.formatTooltip,onInput:e.change_offset},null,8,["modelValue","format-tooltip","onInput"]),Object(i["n"])("span",p,"偏移量height高度(米)："+Object(i["R"])(e.offSet_height),1),Object(i["n"])(l,{modelValue:e.offSet_height,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.offSet_height=t}),min:-2e3,max:2e3,step:10,onInput:e.change_offset},null,8,["modelValue","onInput"]),Object(i["n"])("span",m,"白膜颜色："+Object(i["R"])(e.color),1),Object(i["n"])(M,{modelValue:e.color,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.color=t}),"show-alpha":"",size:"mini",class:"color-pick-s",onActiveChange:e.change_color},null,8,["modelValue","onActiveChange"]),v,h,g,Object(i["n"])(P,{modelValue:e.effectswitch,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.effectswitch=t}),onChange:e.effectswitch_change},null,8,["modelValue","onChange"]),b,Object(i["n"])("span",C,"打光效果颜色："+Object(i["R"])(e.effect_color),1),Object(i["n"])(M,{modelValue:e.effect_color,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.effect_color=t}),size:"mini",class:"color-pick-s",onActiveChange:e.effect_color_change},null,8,["modelValue","onActiveChange"]),O,j,Object(i["n"])("span",y,"光环的移动范围(高度)单位米："+Object(i["R"])(e.effect_height),1),Object(i["n"])(l,{modelValue:e.effect_height,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.effect_height=t}),min:0,max:1e3,step:10,onInput:e.effect_height_change},null,8,["modelValue","onInput"]),w,Object(i["n"])(S,{onClick:e.save},{default:c((function(){return[_]})),_:1},8,["onClick"])])]})),_:1})])]})),_:1},8,["onUpdate:onReadyMap"])})),P=Object(i["gb"])("data-v-1b320187");Object(i["H"])("data-v-1b320187");var S=Object(i["n"])("div",{class:"Cesium3Dcontainer",id:"cesiumContainer"},null,-1);Object(i["F"])();var k=P((function(e,t,n,a,o,r){var l=Object(i["N"])("ShowLngLat");return Object(i["E"])(),Object(i["i"])(i["b"],null,[S,Object(i["n"])(l,{ref:"ShowLngLatRef"},null,512),Object(i["M"])(e.$slots,"configCom",{},void 0,!0)],64)})),x=n("1da1"),R=(n("96cf"),n("d4ec")),I=n("bee2");n("159b"),n("7039"),n("ac1f"),n("1276"),n("5319"),n("99af"),n("fb6a"),n("b680"),n("d3b7"),n("25f0");function E(e){var t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,n=e.toLowerCase();if(t.test(n)){if(4===n.length){for(var i="#",a=1;a<4;a+=1)i+=n.slice(a,a+1).concat(n.slice(a,a+1));n=i}for(var o=[],r=1;r<7;r+=2)o.push(parseInt("0x"+n.slice(r,r+2)));return o}return[]}function T(e){var t=E(e);return t.forEach((function(e,n){t[n]=(e/255).toFixed(2)})),t}function L(e){var t=e.split(",");if(t.length<=1)return e;var n=parseInt(t[0].split("(")[1]),i=parseInt(t[1]),a=parseInt(t[2].split(")")[0]),o="#"+((1<<24)+(n<<16)+(i<<8)+a).toString(16).slice(1);return o}n("4d63");function V(e){var t=Function;return new t("return "+e)()}function D(e,t){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(t)||[null,"",null])[1].replace(/\+/g,"%20"))||null}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",n=D(e,window.location.href);return"int"===t?parseInt(n):"float"===t?parseFloat(n):n&&"array"===t?(n=n.split(","),[parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2])]):n}var z=n("2a47"),B=function(){function e(){Object(R["a"])(this,e),this.init_data()}return Object(I["a"])(e,[{key:"init_data",value:function(){this.viewer=null}},{key:"init",value:function(e,t){var n="cesiumContainer",i=new Cesium.SingleTileImageryProvider({url:"https://mapv-data.oss-cn-hangzhou.aliyuncs.com/Cesium-1.82-hawk/background.png"});0!==t.length&&(i=this.setOneimageryProvider(t[0]));var a={imageryProvider:i,contextOptions:{webgl:{alpha:!1}},baseLayerPicker:!1,navigationHelpButton:!1,animation:!1,timeline:!1,shadows:!1,shouldAnimate:!0,skyBox:!1,infoBox:!1,fullscreenButton:!1,homeButton:!0,geocoder:!1,sceneModePicker:!0};a=Object.assign(a,e);var o=new Cesium.Viewer(n,a);if(!e["logo"]){var r=o.cesiumWidget.creditContainer;r.style.display="none"}return o.scene.globe.depthTestAgainstTerrain=!0,this.initCesiumNavigation(o),this.setConfigMapList(o,t),this.removeJagged(o),this.viewer=o,o}},{key:"initCesiumNavigation",value:function(e){var t={};t.defaultResetView=new Cesium.Rectangle.fromDegrees(80,22,130,50),t.enableCompass=!0,t.enableZoomControls=!0,t.enableDistanceLegend=!0,t.enableCompassOuterRing=!0,Object(z["a"])(e,t)}},{key:"setOneimageryProvider",value:function(e){return e.classConfig.customTags&&(e.classConfig.customTags=V("("+e.classConfig.customTags+")")),new Cesium[e.type](e.classConfig)}},{key:"setConfigMapList",value:function(e,t){var n=this,i=e.imageryLayers;t.some((function(e,t){if(0===t)return!1;i.addImageryProvider(n.setOneimageryProvider(e))})),t.some((function(t,n){var i=e.imageryLayers.get(n);t.interfaceConfig&&Object.getOwnPropertyNames(t.interfaceConfig).forEach((function(e){i[e]=t.interfaceConfig[e]})),i.invertColor=t.invertswitch,i.filterRGB=[255,255,255],"#000000"!==t.filterRGB&&"#ffffff"!==t.filterRGB&&(i.filterRGB=E(t.filterRGB));var a=t.offset.split(",");if(2===a.length)try{var o=[parseFloat(a[0]),parseFloat(a[1])];i._imageryProvider._tilingScheme._rectangleNortheastInMeters.x+=o[0],i._imageryProvider._tilingScheme._rectangleNortheastInMeters.y+=o[1]}catch(r){console.log(r)}}))}},{key:"removeJagged",value:function(e){e.scene.postProcessStages.fxaa.enabled=!1,e.scene.fxaa=!1;var t=e.cesiumWidget._supportsImageRenderingPixelated;if(t){var n=window.devicePixelRatio;while(n>=2)n/=2;e.resolutionScale=n}}},{key:"changeImageryProviderColors",value:function(e){for(var t=e.scene.globe._surfaceShaderSet.baseFragmentShaderSource.sources,n=0;n<t.length;n++){var i=t[n],a="gl_FragColor = finalColor;\n}\n#ifdef GROUND_ATMOSPHERE\n",o=a;-1!==i.indexOf(a)&&(t[n]=t[n].replace(a,o))}}},{key:"getCurCenterlonLat",value:function(e){var t=e.camera.pickEllipsoid(new Cesium.Cartesian2(e.canvas.clientWidth/2,e.canvas.clientHeight/2)),n=Cesium.Ellipsoid.WGS84.cartesianToCartographic(t),i=180*n.longitude/Math.PI,a=180*n.latitude/Math.PI;return{lon:i,lat:a}}}]),e}(),N=new B,G=n("5530"),H=(n("4de4"),n("bc3a")),U=n.n(H),J=n("323e"),A=n.n(J);n("a5d8");A.a.configure({easing:"ease",speed:500,showSpinner:!0,trickleSpeed:200,minimum:.3});var W=A.a,q=n("53ca"),K=n("ade3");n("b64b"),n("caad"),n("2532");function X(e,t){return Object.keys(e).filter((function(e){return!t.includes(e)})).reduce((function(t,n){return t[n]=e[n],t}),{})}function $(e,t){var n=t.method,i=["delete","get","head","options"].includes(n.toLocaleLowerCase())?"params":"data";return Object(G["a"])(Object(G["a"])({},t),{},Object(K["a"])({},i,e))}var Z={baseURL:"",timeout:1e4,headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}};function Y(e){if(!e)return Z;var t=e.headers;return t&&"object"===Object(q["a"])(t)&&(Z.headers=Object(G["a"])(Object(G["a"])({},Z.headers),t)),Object(G["a"])(Object(G["a"])({},X(e,"headers")),Z)}var Q=function(){function e(){Object(R["a"])(this,e),this.CancelToken=U.a.CancelToken,this.sourceTokenList=[],this.currentCancelTokenKey="",this.urlPrefix="http://map.217dan.com/addons/cesiummapv",this.beforeRequestCallback=void 0,this.beforeResponseCallback=void 0,this.httpInterceptorsRequest(),this.httpInterceptorsResponse()}return Object(I["a"])(e,[{key:"cancelTokenList",get:function(){return this.sourceTokenList},set:function(e){throw new Error("cancelTokenList不允许赋值")}},{key:"genUniqueKey",value:function(e){return"".concat(e.url,"--").concat(JSON.stringify(e.data))}},{key:"cancelRepeatRequest",value:function(){var e={};this.sourceTokenList=this.sourceTokenList.reduce((function(t,n){var i=n.cancelKey,a=n.cancelExecutor;return e[i]?a():(e[i]=!0,t.push(n)),t}),[])}},{key:"deleteCancelTokenByCancelKey",value:function(e){this.sourceTokenList=this.sourceTokenList.length<1?this.sourceTokenList.filter((function(t){return t.cancelKey!==e})):[]}},{key:"httpInterceptorsRequest",value:function(){var t=this;e.axiosInstance.interceptors.request.use((function(n){var i=n;W.start();var a=t.genUniqueKey(i);return i.cancelToken=new t.CancelToken((function(e){t.sourceTokenList.push({cancelKey:a,cancelExecutor:e})})),t.cancelRepeatRequest(),t.currentCancelTokenKey=a,"function"===typeof t.beforeRequestCallback?(t.beforeRequestCallback(i),t.beforeRequestCallback=void 0,i):e.initConfig.beforeRequestCallback?(e.initConfig.beforeRequestCallback(i),i):i}),(function(e){return Promise.reject(e)}))}},{key:"clearCancelTokenList",value:function(){this.sourceTokenList.length=0}},{key:"httpInterceptorsResponse",value:function(){var t=this,n=e.axiosInstance;n.interceptors.response.use((function(n){var i=t.genUniqueKey(n.config);return t.deleteCancelTokenByCancelKey(i),"function"===typeof t.beforeResponseCallback?(t.beforeResponseCallback(n),t.beforeResponseCallback=void 0,n.data):e.initConfig.beforeResponseCallback?(e.initConfig.beforeResponseCallback(n),n.data):(W.done(),n.data)}),(function(e){var n=e;if(t.currentCancelTokenKey){var i=t.sourceTokenList.filter((function(e){return e.cancelKey===t.currentCancelTokenKey})).length;i&&(t.sourceTokenList=t.sourceTokenList.filter((function(e){return e.cancelKey!==t.currentCancelTokenKey})),t.currentCancelTokenKey="")}return n.isCancelRequest=U.a.isCancel(n),Promise.reject(n)}))}},{key:"request",value:function(t,n,i,a){n=this.urlPrefix+n;var o=$(i,Object(G["a"])({method:t,url:n},a));return null!==a&&void 0!==a&&a.beforeRequestCallback&&(this.beforeRequestCallback=a.beforeRequestCallback),null!==a&&void 0!==a&&a.beforeResponseCallback&&(this.beforeResponseCallback=a.beforeResponseCallback),new Promise((function(t,n){e.axiosInstance.request(o).then((function(e){t(e)})).catch((function(e){n(e)}))}))}},{key:"post",value:function(e,t,n){return this.request("post",e,t,n)}},{key:"get",value:function(e,t,n){return this.request("get",e,t,n)}}]),e}();Q.initConfig={},Q.axiosInstance=U.a.create(Y());var ee=Q,te=new ee,ne=function(){return te.request("get","/base/getMapConfig")},ie=function(){return te.request("get","/base/getMapView")},ae=function(){return te.request("get","/base/getMapImageryList")},oe=function(e){return te.post("/base/setMapView",e)},re=n("2ef0");function le(){return ce.apply(this,arguments)}function ce(){return ce=Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:return t=e.sent,t=t.data,t=Object(re["zipObject"])(Object(re["map"])(t,"name"),Object(re["map"])(t,"value")),Object(re["forIn"])(t,(function(e,n){t[n]="1"===e})),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)}))),ce.apply(this,arguments)}function se(){return ue.apply(this,arguments)}function ue(){return ue=Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ae();case 2:return t=e.sent,t=t.data,t.some((function(e,n){t[n].classConfig=JSON.parse(e.classConfig),t[n].interfaceConfig=""===e.interfaceConfig?[]:JSON.parse(e.interfaceConfig),Object(re["forIn"])(t[n].interfaceConfig,(function(e,i){isNaN(parseFloat(e))?t[n].interfaceConfig[i]="true"===e:t[n].interfaceConfig[i]=parseFloat(e)}))})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)}))),ue.apply(this,arguments)}var de=Object(i["gb"])("data-v-4d3f6ea5");Object(i["H"])("data-v-4d3f6ea5");var fe={class:"ShowLngLatContainer"},pe=Object(i["m"])();Object(i["F"])();var me=de((function(e,t,n,a,o,r){return Object(i["E"])(),Object(i["i"])("div",fe,[Object(i["n"])("span",null,"lng:"+Object(i["R"])(e.lng),1),pe,Object(i["n"])("span",null,"lat:"+Object(i["R"])(e.lat),1)])})),ve=Object(i["o"])({name:"ShowLngLat",components:{},setup:function(){var e=Object(i["J"])(),t=Object(i["J"])(),n=function(n){var i=n.scene.canvas,a=n.scene.globe.ellipsoid,o=new Cesium.ScreenSpaceEventHandler(i);o.setInputAction((function(i){var o=n.camera.pickEllipsoid(i.endPosition,a);if(o){var r=n.scene.globe.ellipsoid.cartesianToCartographic(o);t.value=Cesium.Math.toDegrees(r.latitude).toFixed(4),e.value=Cesium.Math.toDegrees(r.longitude).toFixed(4)}}),Cesium.ScreenSpaceEventType.MOUSE_MOVE)};return{lng:e,lat:t,initCesiumHandler:n}}});n("4ae2"),n("4336");ve.render=me,ve.__scopeId="data-v-4d3f6ea5";var he=ve,ge=Object(i["o"])({name:"Cesium3Dcontainer",props:{isImagery:{type:Boolean,default:!1}},components:{ShowLngLat:he},setup:function(e,t){var n=Object(i["J"])(),a=Object(i["J"])(),o=function(e,i){var a=N.init(e,i);window.Gviewer=a,n.value.initCesiumHandler(a),t.emit("update:onReadyMap",null)},r=function(e){var i=N.init(a,e);window.Gviewer=i,n.value.initCesiumHandler(i),t.emit("update:onReadyMap",null)};return Object(i["x"])((function(){Object(i["v"])(Object(x["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,le();case 2:if(a.value=t.sent,e.isImagery){t.next=8;break}return t.next=6,se();case 6:n=t.sent,o(a.value,n);case 8:case"end":return t.stop()}}),t)}))))})),{ShowLngLatRef:n,BaseMapConfig:a,initImageryMap:r}}});n("f5b7");ge.render=k,ge.__scopeId="data-v-1b320187";var be=ge,Ce=Object(i["gb"])("data-v-c043ac04");Object(i["H"])("data-v-c043ac04");var Oe={class:"PannelBoxContainer"},je=Object(i["l"])('<div class="bk bk-left-top" data-v-c043ac04></div><div class="bk bk-left-top2" data-v-c043ac04></div><div class="bk bk-left-bottom" data-v-c043ac04></div><div class="bk bk-left-bottom2" data-v-c043ac04></div><div class="bk bk-right-top" data-v-c043ac04></div><div class="bk bk-right-top2" data-v-c043ac04></div><div class="bk bk-right-bottom" data-v-c043ac04></div><div class="bk bk-right-bottom2" data-v-c043ac04></div>',8),ye={class:"content"};Object(i["F"])();var we=Ce((function(e,t,n,a,o,r){return Object(i["E"])(),Object(i["i"])("div",Oe,[je,Object(i["n"])("div",ye,[Object(i["M"])(e.$slots,"content",{},void 0,!0)])])})),_e={name:"PannelBox"};n("20b9");_e.render=we,_e.__scopeId="data-v-c043ac04";var Me=_e,Pe=function(){return te.request("get","/titleset/getTitlesetList")},Se=function(e){return te.request("get","/titleset/getOneTitleset?id="+e)},ke=function(){function e(t){Object(R["a"])(this,e),this.viewer=t,this.modalPrimitives=[],this.curEleDatas=[],this.curSourceShaders=[]}return Object(I["a"])(e,[{key:"effect_height_change",value:function(e){var t=this.modalPrimitives[0];if(!t)return null;this.curEleDatas[0].height=e}},{key:"effect_color_change",value:function(e){var t=this.modalPrimitives[0];if(!t)return null;this.curEleDatas[0].effect_color=e}},{key:"effectswitch_change",value:function(e){var t=this.modalPrimitives[0];if(!t)return null;this.curEleDatas[0].effectswitch=e?1:0}},{key:"change_color",value:function(e){var t=this.modalPrimitives[0];t&&(t.style=new Cesium.Cesium3DTileStyle({color:{conditions:[["true","color('".concat(e,"')")]]}}))}},{key:"setOneModalOff",value:function(e){var t=this.modalPrimitives[0];t&&this.update3dtilesMaxtrix(t,e)}},{key:"showConfigCom",value:function(e){this.curEleDatas=e,this.addOne3dTitleset(e[0],0,!0)}},{key:"showOne",value:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Se(t);case 2:if(n=e.sent,this.curEleDatas=n.data,0!==n.data.length&&n.data[0].url){e.next=6;break}return e.abrupt("return",!1);case 6:return this.addOne3dTitleset(n.data[0],0,!0),e.abrupt("return",n.data[0]);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"init",value:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe();case 2:t=e.sent,n=this,t.data&&(n.curEleDatas=t.data,t.data.forEach((function(e,t){e.url&&n.addOne3dTitleset(e,t)})));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"addOne3dTitleset",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this,a=this.viewer.scene.primitives.add(new Cesium.Cesium3DTileset({url:e.url,shadows:4,maximumScreenSpaceError:1,maximumNumberOfLoadedTiles:1e3}));a.readyPromise.then((function(a){1===e.flytoswitch&&i.viewer.zoomTo(a),i.update3dtilesMaxtrix(a,e),a.style=new Cesium.Cesium3DTileStyle({color:{conditions:[["true","color('".concat(e.color,"')")]]}}),(1===e.effectswitch||n)&&i.makeEffect(a,e,t,n)})),i.modalPrimitives.push(a)}},{key:"tileVisible_addEventListener_fun",value:function(e){for(var t=this,n=t.curEleDatas[t.index],i=e.content,a=i.featuresLength,o=T(n.effect_color),r=function(e){var a=i.getFeature(e).content._model;a&&a._sourcePrograms&&a._rendererResources&&(Object.getOwnPropertyNames(a._sourcePrograms).forEach((function(e){var i=a._sourcePrograms[e];t.curSourceShaders[t.index]||(t.curSourceShaders[t.index]=a._rendererResources.sourceShaders[i.fragmentShader]),1!==n.effectswitch?a._rendererResources.sourceShaders[i.fragmentShader]=t.curSourceShaders[t.index]:a._rendererResources.sourceShaders[i.fragmentShader]="\n            varying vec3 v_positionEC;\n            void main(void){\n              vec4 position = czm_inverseModelView * vec4(v_positionEC,1); // 位置\n              float glowRange = ".concat(n.height.toFixed(2),"; // 光环的移动范围(高度)\n              gl_FragColor = vec4(").concat(o[0],", ").concat(o[1],", ").concat(o[2],", 1.0); // 颜色\n              // 底楼 亮度太暗了，那么把20%以内的底楼，都不再变暗\n              if((position.z / 100.0) < 0.2) {\n                gl_FragColor *= vec4(vec3(position.z / 100.0 * 2.0), 1.0);\n              }else{\n                gl_FragColor *= vec4(vec3(position.z / 100.0), 1.0); // 渐变\n              }\n              // 动态光环\n              float time = fract(czm_frameNumber / 360.0);\n              time = abs(time - 0.5) * 2.0;\n              float diff = step(0.005, abs( clamp(position.z / glowRange, 0.0, 1.0) - time));\n              gl_FragColor.rgb += gl_FragColor.rgb * (1.0 - diff);\n            }\n            ")})),a._shouldRegenerateShaders=1===n.effectswitch||t.isConfig)},l=0;l<a;l+=2)r(l)}},{key:"makeEffect",value:function(e,t,n,i){var a=this;e.tileVisible.addEventListener(a.tileVisible_addEventListener_fun,{curEleDatas:a.curEleDatas,ele:t,index:n,curSourceShaders:a.curSourceShaders,isConfig:i})}},{key:"update3dtilesMaxtrix",value:function(e,t){if(e.ready){var n=Cesium.Cartographic.fromCartesian(e.boundingSphere.center),i=Cesium.Cartesian3.fromRadians(n.longitude,n.latitude,n.height),a=Cesium.Cartesian3.fromRadians(n.longitude+Cesium.Math.toRadians(t.offset_x),n.latitude+Cesium.Math.toRadians(t.offset_y),n.height+t.offset_z),o=Cesium.Cartesian3.subtract(a,i,new Cesium.Cartesian3);e.modelMatrix=Cesium.Matrix4.fromTranslation(o)}}},{key:"move3dtilesMaxtrix",value:function(e){var t=Cesium.Cartographic.fromCartesian(e.boundingSphere.center),n=Cesium.Cartesian3.fromRadians(t.longitude,t.latitude,0),i=Cesium.Cartesian3.fromRadians(t.longitude,t.latitude,-500);i.x+=100;var a=Cesium.Cartesian3.subtract(i,n,new Cesium.Cartesian3);e.modelMatrix=Cesium.Matrix4.fromTranslation(a)}},{key:"addtest",value:function(){var e=this;this.viewer.scene.primitives.add(new Cesium.Cesium3DTileset({url:"http://myhome.217dan.com:8081/chengdu_all/tileset.json"})).readyPromise.then((function(t){setTimeout((function(){e.viewer.zoomTo(t)}),2e3),e.move3dtilesMaxtrix(t),t.style=new Cesium.Cesium3DTileStyle({color:{conditions:[["true","color('rgba(255,255,255,0.9)')"]]}}),t.tileVisible.addEventListener((function(e){for(var t=e.content,n=t.featuresLength,i=function(e){var n=t.getFeature(e).content._model;n&&n._sourcePrograms&&n._rendererResources&&(Object.getOwnPropertyNames(n._sourcePrograms).forEach((function(e){var t=n._sourcePrograms[e];n._rendererResources.sourceShaders[t.fragmentShader]="\n                varying vec3 v_positionEC;\n                void main(void){\n                  vec4 position = czm_inverseModelView * vec4(v_positionEC,1); // 位置\n                  float glowRange = 100.0; // 光环的移动范围(高度)\n                  gl_FragColor = vec4(0.2,  0.5, 1.0, 1.0); // 颜色\n                  gl_FragColor *= vec4(vec3(position.z / 100.0), 1.0); // 渐变\n                  // 动态光环\n                  float time = fract(czm_frameNumber / 360.0);\n                  time = abs(time - 0.5) * 2.0;\n                  float diff = step(0.005, abs( clamp(position.z / glowRange, 0.0, 1.0) - time));\n                  gl_FragColor.rgb += gl_FragColor.rgb * (1.0 - diff);\n                }\n                "})),n._shouldRegenerateShaders=!0)},a=0;a<n;a+=2)i(a)}))}))}},{key:"add",value:function(e){console.log(e);var t="https://lab.earthsdk.com/model/702aa950d03c11e99f7ddd77cbe22fea/tileset.json",n=new Cesium.Cesium3DTileset({url:t});this.modalPrimitives=this.viewer.scene.primitives.add(n),this.viewer.scene.camera.setView({destination:{x:-2395783.5309640486,y:5392694.777928539,z:2424816.601754499},orientation:{heading:.42631000693466764,pitch:-.8022459306450823,roll:.4179249271708612},duration:1})}}]),e}(),xe=ke,Re=n("3fd4"),Ie=Object(i["o"])({name:"TitleSetCongfig",components:{CesiumContainer:be,PannelBox:Me},setup:function(){var e=Object(i["J"])(0),t=Object(i["J"])(0),n=Object(i["J"])(0),a=Object(i["J"])("rgba(19, 206, 102, 0.8)"),o=Object(i["J"])("rgba(119, 6, 32)"),r=Object(i["J"])(!0),l=Object(i["J"])(100),c=null,s=function(){Re["b"].confirm("提交保存当前白膜的配置信息, 是否继续?","提示",{confirmButtonText:"保存",cancelButtonText:"取消",type:"warning"}).then((function(){window.parent.postMessage({offSet_lon:e.value/1e4,offSet_lat:t.value/1e4,offSet_height:n.value,color:a.value,effect_color:o.value,effectswitch:r.value,effect_height:l.value},"*"),Object(Re["a"])({type:"success",message:"保存成功!"})})).catch((function(e){console.log(e)}))},u=function(e){c&&c.effect_height_change(e)},d=function(e){e||(e="rgb(255,255,255)",o.value=e),c&&c.effect_color_change(e)},f=function(e){c.effectswitch_change(e)},p=function(){var i={flytoswitch:1},s=F("url");s=decodeURI(s),i.url=s,i.offset_x=F("offset_x","float"),e.value=1e4*i.offset_x,i.offset_y=F("offset_y","float"),t.value=1e4*i.offset_y,i.offset_z=F("offset_z","int"),n.value=i.offset_z,i.color=F("color"),a.value=i.color,i.effect_color=F("effect_color"),o.value=i.effect_color,i.effectswitch=F("effectswitch","int"),r.value=1===i.effectswitch,i.height=F("height","int"),l.value=i.height,c=new xe(window.Gviewer),c.showConfigCom([i])},m=function(e){return e/1e4},v=function(e){e||(e="rgba(255,255,255,1)",a.value=e),c&&c.change_color(e)},h=function(){c&&c.setOneModalOff({offset_x:e.value/1e4,offset_y:t.value/1e4,offset_z:n.value})};return{onReadyMap:p,offSet_lon:e,offSet_lat:t,offSet_height:n,formatTooltip:m,change_offset:h,color:a,change_color:v,effectswitch:r,effectswitch_change:f,effect_color_change:d,effect_color:o,effect_height_change:u,effect_height:l,save:s}}});n("0ac7"),n("9202");Ie.render=M,Ie.__scopeId="data-v-4b0ef630";var Ee=Ie,Te=Object(i["gb"])("data-v-6662c565");Object(i["H"])("data-v-6662c565");var Le={class:"LinesCongfig"},Ve={class:"lines_con"},De={class:"c_title"},Fe=Object(i["m"])("重新生成"),ze=Object(i["n"])("span",{class:"c_title"},"起始lon经度：",-1),Be=Object(i["n"])("br",null,null,-1),Ne=Object(i["n"])("br",null,null,-1),Ge=Object(i["n"])("span",{class:"c_title"},"起始lat纬度：",-1),He=Object(i["n"])("br",null,null,-1),Ue=Object(i["n"])("br",null,null,-1),Je=Object(i["n"])("span",{class:"c_title"},"终止lon经度：",-1),Ae=Object(i["n"])("br",null,null,-1),We=Object(i["n"])("br",null,null,-1),qe=Object(i["n"])("span",{class:"c_title"},"终止lat纬度：",-1),Ke=Object(i["n"])("br",null,null,-1),Xe=Object(i["n"])("br",null,null,-1),$e={class:"c_title"},Ze=Object(i["m"])("以上需要重新生成"),Ye={class:"c_title"},Qe={class:"c_title"},et={class:"c_title"},tt={class:"c_title"},nt=Object(i["n"])("br",null,null,-1),it=Object(i["n"])("br",null,null,-1),at={class:"c_title"},ot=Object(i["n"])("br",null,null,-1),rt={class:"c_title"},lt=Object(i["n"])("br",null,null,-1),ct=Object(i["m"])("保存当前设置");Object(i["F"])();var st=Te((function(e,t,n,a,o,r){var l=Object(i["N"])("el-button"),c=Object(i["N"])("el-slider"),s=Object(i["N"])("el-input"),u=Object(i["N"])("el-divider"),d=Object(i["N"])("el-color-picker"),f=Object(i["N"])("PannelBox"),p=Object(i["N"])("CesiumContainer");return Object(i["E"])(),Object(i["i"])(p,{"onUpdate:onReadyMap":e.onReadyMap},{configCom:Te((function(){return[Object(i["n"])("div",Le,[Object(i["n"])(f,null,{content:Te((function(){return[Object(i["n"])("div",Ve,["FlyLines"===e.type?(Object(i["E"])(),Object(i["i"])(i["b"],{key:0},[Object(i["n"])("span",De,[Object(i["m"])("飞线数："+Object(i["R"])(e.random)+" 条 ",1),Object(i["n"])(l,{onClick:e.makeLines,size:"mini",style:{float:"right","margin-top":"-6px"}},{default:Te((function(){return[Fe]})),_:1},8,["onClick"])]),Object(i["n"])(c,{modelValue:e.random,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.random=t}),min:10,max:1e3,step:10},null,8,["modelValue"]),ze,Object(i["n"])(s,{type:"number",class:"input_c_p",size:"small",modelValue:e.bbox[0],"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.bbox[0]=t})},null,8,["modelValue"]),Be,Ne,Ge,Object(i["n"])(s,{type:"number",class:"input_c_p",size:"small",modelValue:e.bbox[1],"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.bbox[1]=t})},null,8,["modelValue"]),He,Ue,Je,Object(i["n"])(s,{type:"number",class:"input_c_p",size:"small",modelValue:e.bbox[2],"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.bbox[2]=t})},null,8,["modelValue"]),Ae,We,qe,Object(i["n"])(s,{type:"number",class:"input_c_p",size:"small",modelValue:e.bbox[3],"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.bbox[3]=t})},null,8,["modelValue"]),Ke,Xe,Object(i["n"])("span",$e,"最大高度："+Object(i["R"])(e.height)+" 米",1),Object(i["n"])(c,{modelValue:e.height,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.height=t}),min:100,max:1e4,step:100},null,8,["modelValue"]),Object(i["n"])(u,null,{default:Te((function(){return[Ze]})),_:1})],64)):Object(i["j"])("",!0),Object(i["n"])("span",Ye,"宽度："+Object(i["R"])(e.width),1),Object(i["n"])(c,{modelValue:e.width,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.width=t}),min:.1,max:10,step:.1,onInput:e.lines_width_change},null,8,["modelValue","min","step","onInput"]),"RoadPic"===e.type?(Object(i["E"])(),Object(i["i"])(i["b"],{key:1},[Object(i["n"])("span",Qe,"延迟时间: "+Object(i["R"])(e.time)+" ms",1),Object(i["n"])(c,{modelValue:e.time,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.time=t}),min:100,max:1e4,step:100,onInput:e.lines_time_change},null,8,["modelValue","onInput"])],64)):Object(i["j"])("",!0),"RoadPic"!==e.type?(Object(i["E"])(),Object(i["i"])(i["b"],{key:2},[Object(i["n"])("span",et,"速度："+Object(i["R"])(e.speed),1),Object(i["n"])(c,{modelValue:e.speed,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.speed=t}),min:.5,max:20,step:.5,onInput:e.lines_speed_change},null,8,["modelValue","min","step","onInput"]),Object(i["n"])("span",tt,"效果颜色："+Object(i["R"])(e.color),1),Object(i["n"])(d,{modelValue:e.color,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.color=t}),size:"mini",class:"color-pick-s",onActiveChange:e.change_color},null,8,["modelValue","onActiveChange"]),nt,it,Object(i["n"])("span",at,"拖尾长："+Object(i["R"])(e.percent),1),Object(i["n"])(c,{modelValue:e.percent,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.percent=t}),min:.01,max:.6,step:.02,onInput:e.lines_percent_change},null,8,["modelValue","min","max","step","onInput"]),ot,Object(i["n"])("span",rt,"变化率："+Object(i["R"])(e.gradient),1),Object(i["n"])(c,{modelValue:e.gradient,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.gradient=t}),min:.01,max:.3,step:.02,onInput:e.lines_gradient_change},null,8,["modelValue","min","max","step","onInput"]),lt],64)):Object(i["j"])("",!0),Object(i["n"])(l,{onClick:e.save,size:"mini"},{default:Te((function(){return[ct]})),_:1},8,["onClick"])])]})),_:1})])]})),_:1},8,["onUpdate:onReadyMap"])})),ut=(n("ddb0"),n("d81d"),function(){return te.request("get","/effect/getPointsEffectList")}),dt=function(){return te.request("get","/effect/getLinesEffectList")};function ft(e){this._definitionChanged=new Cesium.Event,this.colorSubscription=void 0,this.speed=e.speed||6*Math.random(),this.color=e.color||Cesium.Color.RED,this.percent=e.percent||.1,this.gradient=e.gradient||.01}function pt(){console.log("PolylineTrailMaterialProperty init")}function mt(e,t){this._definitionChanged=new Cesium.Event,this.duration=e,this.image=t,this._time=performance.now()}function vt(){console.log("Spriteline1MaterialProperty init")}Object.defineProperties(ft.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed"),gradient:Cesium.createPropertyDescriptor("gradient"),percent:Cesium.createPropertyDescriptor("percent")}),ft.prototype.getType=function(e){return"PolylineTrail"},ft.prototype.getValue=function(e,t){return Cesium.defined(t)||(t={}),t.color=Cesium.Property.getValueOrClonedDefault(this.color,e,Cesium.Color.WHITE,t.color),t.speed=this.speed,t.gradient=this.gradient,t.percent=this.percent,t},ft.prototype.equals=function(e){return this===e||e instanceof ft&&this.speed===e.speed&&Cesium.Property.equals(this.color,e.color)},Cesium.PolylineTrailMaterialProperty=ft,Cesium.Material.PolylineTrailType="PolylineTrail",Cesium.Material.PolylineTrailSource="\nuniform vec4 color;\nuniform float speed;\nuniform float percent;\nuniform float gradient;\n\nczm_material czm_getMaterial(czm_materialInput materialInput){\n  czm_material material = czm_getDefaultMaterial(materialInput);\n  vec2 st = materialInput.st;\n  float t = fract(czm_frameNumber * speed / 1000.0);\n  t *= (1.0 + percent);\n  float alpha = smoothstep(t- percent, t, st.s) * step(-t, -st.s);\n  alpha += gradient;\n  material.diffuse = color.rgb;\n  material.alpha = alpha;\n  return material;\n}\n",Cesium.Material._materialCache.addMaterial(Cesium.Material.PolylineTrailType,{fabric:{type:Cesium.Material.PolylineTrailType,uniforms:{color:new Cesium.Color(1,0,0,.5),transparent:!0,speed:0,gradient:.01,percent:.1},source:Cesium.Material.PolylineTrailSource},translucent:function(e){return!0}}),Object.defineProperties(mt.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color"),duration:Cesium.createPropertyDescriptor("duration")}),mt.prototype.getType=function(e){return"Spriteline1"},mt.prototype.getValue=function(e,t){return Cesium.defined(t)||(t={}),t.image=this.image,t.time=(performance.now()-this._time)%this.duration/this.duration,t},mt.prototype.equals=function(e){return this===e||e instanceof mt&&this.duration===e.duration},Cesium.Spriteline1MaterialProperty=mt,Cesium.Material.Spriteline1Type="Spriteline1",Cesium.Material.Spriteline1Source="\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n   czm_material material = czm_getDefaultMaterial(materialInput);\n   vec2 st = materialInput.st;\n   vec4 colorImage = texture2D(image, vec2(fract(st.s - time), st.t));\n   material.alpha = colorImage.a;\n   material.diffuse = colorImage.rgb * 1.5 ;\n   return material;\n}\n",Cesium.Material._materialCache.addMaterial(Cesium.Material.Spriteline1Type,{fabric:{type:Cesium.Material.Spriteline1Type,uniforms:{color:new Cesium.Color(1,0,0,.5),image:"",transparent:!0,time:20},source:Cesium.Material.Spriteline1Source},translucent:function(e){return!0}});var ht=n("595b"),gt=function(){function e(t,n){Object(R["a"])(this,e),this.viewer=t,this.id=n,this.FlyLinesEntities=[],this.BusLinesEntities=[],this.RoadPicEntities=[]}return Object(I["a"])(e,[{key:"init",value:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,dt();case 2:t=e.sent,this,t.data&&t.data.forEach((function(e,t){var i=JSON.parse(e.setup_param);for(var a in i)"color"!==a&&(i[a]=parseFloat(i[a]));"FlyLines"===e.type?n.addFlyLines([i.startPoint_lng,i.startPoint_lat,i.endPoint_ing,i.endPoint_lat],i.color,e.width,i.height,i.speed,i.percent,i.gradient,i.random):"BusLines"===e.type?n.addBusLines(e.geojsonfile,i.color,e.width,i.speed,i.percent,i.gradient):"RoadPic"===e.type&&n.addRoadPic(e.geojsonfile,e.effectimage,e.width,i.time)}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"changeLinesPercent",value:function(e,t){var n=null;"FlyLines"===e&&(n=this.FlyLinesEntities),"BusLines"===e&&(n=this.BusLinesEntities),n.forEach((function(e){e.polyline.material.percent=t}))}},{key:"changeLinesSpeed",value:function(e,t){var n=null;"FlyLines"===e&&(n=this.FlyLinesEntities),"BusLines"===e&&(n=this.BusLinesEntities),n.forEach((function(e){e.polyline.material.speed=t}))}},{key:"changeLinesGradient",value:function(e,t){var n=null;"FlyLines"===e&&(n=this.FlyLinesEntities),"BusLines"===e&&(n=this.BusLinesEntities),n.forEach((function(e){e.polyline.material.gradient=t}))}},{key:"changeLinesColor",value:function(e,t){var n=null;"FlyLines"===e&&(n=this.FlyLinesEntities),"BusLines"===e&&(n=this.BusLinesEntities),n.forEach((function(e){e.polyline.material.color=new Cesium.Color.fromCssColorString(t)}))}},{key:"changeLinesWidth",value:function(e,t){var n=null;"FlyLines"===e&&(n=this.FlyLinesEntities),"BusLines"===e&&(n=this.BusLinesEntities),"RoadPic"===e&&(n=this.RoadPicEntities),n.forEach((function(e){e.polyline.width=t}))}},{key:"changeLinesTime",value:function(e,t){var n=this.RoadPicEntities;n.forEach((function(e){e.polyline.material.duration=t}))}},{key:"remakeFlyLines",value:function(e,t,n,i,a,o,r,l){this.clearFlyLines(),this.addFlyLines(e,t,n,i,a,o,r,l)}},{key:"clearFlyLines",value:function(){var e=this;this.FlyLinesEntities.forEach((function(t){e.viewer.entities.removeById(t.id)})),this.FlyLinesEntities=[]}},{key:"addFlyLines",value:function(e,t,n,i,a,o,r,l){pt();var c,s,u,d=this,f=ht["randomPoint"](l,{bbox:e}),p=f.features;p.forEach((function(e){c=e.geometry.coordinates,s=Cesium.Cartesian3.fromDegrees(c[0],c[1],0),u=Cesium.Cartesian3.fromDegrees(c[0],c[1],i*Math.random()),d.FlyLinesEntities.push(d.viewer.entities.add({polyline:{positions:[s,u],width:n,material:new Cesium.PolylineTrailMaterialProperty({speed:a*Math.random(),color:new Cesium.Color.fromCssColorString(t),percent:o,gradient:r})}}))}))}},{key:"addBusLines",value:function(e,t,n,i,a,o){pt();var r=this,l=Cesium.GeoJsonDataSource.load(e);l.then((function(e){r.viewer.dataSources.add(e),r.BusLinesEntities=e.entities.values;for(var l=[],c=0;c<r.BusLinesEntities.length;c++){var s=r.BusLinesEntities[c];s.polyline.positions._value.length>6?(s.polyline.width=n,s.polyline.material=new Cesium.PolylineTrailMaterialProperty({speed:i*Math.random(),color:new Cesium.Color.fromCssColorString(t),percent:a,gradient:o})):l.push(s.id)}l.forEach((function(t){e.entities.removeById(t)}))}))}},{key:"addRoadPic",value:function(e,t,n,i){vt();var a=this,o=Cesium.GeoJsonDataSource.load(e);o.then((function(e){a.viewer.dataSources.add(e),a.RoadPicEntities=e.entities.values;for(var o=0;o<a.RoadPicEntities.length;o++){var r=a.RoadPicEntities[o];r.polyline.width=n,r.polyline.material=new Cesium.Spriteline1MaterialProperty(i,t)}}))}},{key:"loadFlyLines",value:function(){pt();var e=this;Cesium.Resource.fetchJson("https://mapv-data.oss-cn-hangzhou.aliyuncs.com/geojson/nanshan-road1.geojson").then((function(t){var n,i,a,o=ht["bbox"](t),r=ht["randomPoint"](100,{bbox:o}),l=r.features;l.forEach((function(t){n=t.geometry.coordinates,i=Cesium.Cartesian3.fromDegrees(n[0],n[1],0),a=Cesium.Cartesian3.fromDegrees(n[0],n[1],3e3*Math.random()),e.viewer.entities.add({polyline:{positions:[i,a],width:2,material:new Cesium.PolylineTrailMaterialProperty({speed:6*Math.random(),color:new Cesium.Color.fromCssColorString("#32B47E"),percent:.1,gradient:.01})}})}))}))}},{key:"loadRoadPicEffect",value:function(){vt();var e=this,t=Cesium.GeoJsonDataSource.load("https://mapv-data.oss-cn-hangzhou.aliyuncs.com/geojson/nanshan-road1.geojson");t.then((function(t){e.viewer.dataSources.add(t);for(var n=t.entities.values,i=0;i<n.length;i++){var a=n[i];a.polyline.width=3,a.polyline.material=new Cesium.Spriteline1MaterialProperty(1e3,"https://mapv-data.oss-cn-hangzhou.aliyuncs.com/pic/spriteline1.png")}})),t=Cesium.GeoJsonDataSource.load("https://mapv-data.oss-cn-hangzhou.aliyuncs.com/geojson/nanshan-road2.geojson"),t.then((function(t){e.viewer.dataSources.add(t);for(var n=t.entities.values,i=0;i<n.length;i++){var a=n[i];a.polyline.width=3,a.polyline.material=new Cesium.Spriteline1MaterialProperty(500,"https://mapv-data.oss-cn-hangzhou.aliyuncs.com/pic/spriteline2.png")}})),t=Cesium.GeoJsonDataSource.load("https://mapv-data.oss-cn-hangzhou.aliyuncs.com/geojson/nanshan-road3.geojson"),t.then((function(t){e.viewer.dataSources.add(t);for(var n=t.entities.values,i=0;i<n.length;i++){var a=n[i];a.polyline.width=3,a.polyline.material=new Cesium.Spriteline1MaterialProperty(500,"https://mapv-data.oss-cn-hangzhou.aliyuncs.com/pic/spriteline3.png")}}))}},{key:"loadShenZhengLinesData",value:function(){pt();var e=this,t=Cesium.GeoJsonDataSource.load("https://mapv-data.oss-cn-hangzhou.aliyuncs.com/geojson/shenzhen-nanshan.geojson");t.then((function(t){e.viewer.dataSources.add(t);for(var n=t.entities.values,i=[],a=0;a<n.length;a++){var o=n[a];o.polyline.positions._value.length>6?(o.polyline.width=3.6,o.polyline.material=new Cesium.PolylineTrailMaterialProperty({speed:12*Math.random(),color:new Cesium.Color.fromCssColorString("#32B47E"),percent:.3,gradient:.02})):i.push(o.id)}i.forEach((function(e){t.entities.removeById(e)}))}))}},{key:"loadBeijingLinesData",value:function(){var e=this;Cesium.Resource.fetchJson("https://mapv-data.oss-cn-hangzhou.aliyuncs.com/geojson/bj-lines-bus.json").then((function(t){var n=[];t.map((function(e,t){for(var i=[],a=[],o=0;o<e.length;o+=2){var r=[e[o],e[o+1]];o>0&&(r=[i[0]+r[0],i[1]+r[1]]),i=r;var l=r[0]/1e4,c=r[1]/1e4;a.push(l),a.push(c)}n.push({positions:a,color:new Cesium.Color(0,.8*Math.random()+.2,.5*Math.random()+.5,1),width:2})})),e.addLineDatas(n)}))}},{key:"addLineDatas",value:function(e){var t=this;e.forEach((function(e){t.viewer.entities.add({polyline:{positions:Cesium.Cartesian3.fromDegreesArray(e.positions),width:e.width,material:new Cesium.PolylineTrailMaterialProperty({speed:30*Math.random(),color:e.color,percent:.01,gradient:.1})}})}))}}]),e}(),bt=gt,Ct=Object(i["o"])({name:"LinesCongfig",components:{CesiumContainer:be,PannelBox:Me},setup:function(){var e=null,t=Object(i["J"])("#FF006D");t.value=F("color")?F("color"):t.value;var n=Object(i["J"])([113.89,22.48,113.9694,22.5692]);n.value[0]=F("startPoint_lng")?F("startPoint_lng"):n.value[0],n.value[1]=F("startPoint_lat")?F("startPoint_lat"):n.value[1],n.value[2]=F("endPoint_ing")?F("endPoint_ing"):n.value[2],n.value[3]=F("endPoint_lat")?F("endPoint_lat"):n.value[3];var a=Object(i["J"])(2);a.value=F("width")?parseFloat(F("width")):a.value;var o=F("Geojsonfile")?decodeURI(F("Geojsonfile")):"",r=F("Effectimage")?decodeURI(F("Effectimage")):"",l=Object(i["J"])(1e3);l.value=F("time")?parseFloat(F("time")):l.value;var c=Object(i["J"])(3e3);c.value=F("height")?parseFloat(F("height")):c.value;var s=Object(i["J"])(6);s.value=F("speed")?parseFloat(F("speed")):s.value;var u=Object(i["J"])(.1);u.value=F("percent")?parseFloat(F("percent")):u.value;var d=Object(i["J"])(.1);d.value=F("gradient")?parseFloat(F("gradient")):d.value;var f=Object(i["J"])(300);f.value=F("random")?parseFloat(F("random")):f.value;var p=Object(i["J"])("FlyLines");p.value=F("type")?F("type"):p.value;var m=function(t){e&&window.Gviewer.entities&&t&&e.changeLinesColor(p.value,t)},v=function(t){e&&window.Gviewer.entities&&e.changeLinesGradient(p.value,t)},h=function(t){e&&window.Gviewer.entities&&e.changeLinesSpeed(p.value,t)},g=function(t){e&&window.Gviewer.entities&&e.changeLinesPercent(p.value,t)},b=function(t){e&&window.Gviewer.entities&&e.changeLinesWidth(p.value,t)},C=function(t){e&&window.Gviewer.entities&&e.changeLinesTime(p.value,t)},O=function(){if(e&&window.Gviewer.entities){var i=n.value;n.value=[parseFloat(i[0]),parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3])],e.remakeFlyLines(n.value,t.value,a.value,c.value,s.value,u.value,d.value,f.value)}},j=function(){var i=new xe(window.Gviewer);if(i.init(),e=new bt(window.Gviewer,"road"),"FlyLines"===p.value){var m=n.value;n.value=[parseFloat(m[0]),parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3])],e.addFlyLines(n.value,t.value,a.value,c.value,s.value,u.value,d.value,f.value)}else"BusLines"===p.value?e.addBusLines(o,t.value,a.value,s.value,u.value,d.value):"RoadPic"===p.value&&e.addRoadPic(o,r,a.value,l.value)},y=function(){Re["b"].confirm("提交保存当前效果配置信息, 是否继续?","提示",{confirmButtonText:"保存",cancelButtonText:"取消",type:"warning"}).then((function(){var e=null;"FlyLines"===p.value?e={bbox:JSON.stringify(n.value),color:t.value,width:a.value,height:c.value,speed:s.value,percent:u.value,gradient:d.value,random:f.value}:"BusLines"===p.value?e={color:t.value,width:a.value,speed:s.value,percent:u.value,gradient:d.value}:"RoadPic"===p.value&&(e={width:a.value,time:l.value}),window.parent.postMessage(e,"*"),Object(Re["a"])({type:"success",message:"保存成功!"})})).catch((function(e){console.log(e)}))};return{onReadyMap:j,type:p,random:f,makeLines:O,height:c,width:a,lines_width_change:b,color:t,change_color:m,percent:u,lines_percent_change:g,lines_gradient_change:v,gradient:d,speed:s,lines_speed_change:h,bbox:n,save:y,time:l,lines_time_change:C}}});n("6000"),n("5e70");Ct.render=st,Ct.__scopeId="data-v-6662c565";var Ot=Ct,jt=Object(i["gb"])("data-v-78f23ff3");Object(i["H"])("data-v-78f23ff3");var yt={class:"EffectCongfig"},wt={class:"effect_con"},_t=Object(i["n"])("span",{class:"c_title"},"请选择效果：",-1),Mt=Object(i["n"])("br",null,null,-1),Pt=Object(i["n"])("br",null,null,-1),St=Object(i["n"])("span",{class:"c_title"},"lon经度：",-1),kt=Object(i["n"])("br",null,null,-1),xt=Object(i["n"])("br",null,null,-1),Rt=Object(i["n"])("span",{class:"c_title"},"lat纬度：",-1),It=Object(i["n"])("br",null,null,-1),Et=Object(i["n"])("br",null,null,-1),Tt=Object(i["n"])("span",{class:"c_title"},"高度(米)：",-1),Lt=Object(i["n"])("br",null,null,-1),Vt=Object(i["n"])("br",null,null,-1),Dt={class:"c_title"},Ft=Object(i["n"])("br",null,null,-1),zt=Object(i["n"])("br",null,null,-1),Bt={class:"c_title"},Nt=Object(i["n"])("br",null,null,-1),Gt={class:"c_title"},Ht=Object(i["n"])("br",null,null,-1),Ut={class:"c_title"},Jt=Object(i["n"])("br",null,null,-1),At={class:"c_title"},Wt=Object(i["n"])("br",null,null,-1),qt={class:"c_title"},Kt=Object(i["n"])("br",null,null,-1),Xt={class:"c_title"},$t=Object(i["n"])("br",null,null,-1),Zt=Object(i["m"])("保存当前设置");Object(i["F"])();var Yt=jt((function(e,t,n,a,o,r){var l=Object(i["N"])("el-select-v2"),c=Object(i["N"])("el-input"),s=Object(i["N"])("el-color-picker"),u=Object(i["N"])("el-slider"),d=Object(i["N"])("el-button"),f=Object(i["N"])("PannelBox"),p=Object(i["N"])("CesiumContainer");return Object(i["E"])(),Object(i["i"])(p,{"onUpdate:onReadyMap":e.onReadyMap},{configCom:jt((function(){return[Object(i["n"])("div",yt,[Object(i["n"])(f,null,{content:jt((function(){return[Object(i["n"])("div",wt,[_t,Object(i["n"])(l,{modelValue:e.selEffect,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selEffect=t}),size:"mini",placeholder:"效果类型",onChange:e.effect_selEffect_change,options:e.effectsList},null,8,["modelValue","onChange","options"]),Mt,Pt,St,Object(i["n"])(c,{class:"input_c_p",size:"small",modelValue:e.positionEffect[0],"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.positionEffect[0]=t}),onChange:e.effect_position_change},null,8,["modelValue","onChange"]),kt,xt,Rt,Object(i["n"])(c,{class:"input_c_p",size:"small",modelValue:e.positionEffect[1],"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.positionEffect[1]=t}),onChange:e.effect_position_change},null,8,["modelValue","onChange"]),It,Et,"SpreadWall"===e.selEffect?(Object(i["E"])(),Object(i["i"])(i["b"],{key:0},[Tt,Object(i["n"])(c,{class:"input_c_p",size:"small",modelValue:e.positionEffect[2],"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.positionEffect[2]=t}),onChange:e.effect_position_change},null,8,["modelValue","onChange"]),Lt,Vt],64)):Object(i["j"])("",!0),Object(i["n"])("span",Dt,"效果颜色："+Object(i["R"])(e.color),1),Object(i["n"])(s,{modelValue:e.color,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.color=t}),"show-alpha":"",size:"mini",class:"color-pick-s",onActiveChange:e.change_color},null,8,["modelValue","onActiveChange"]),Ft,zt,Object(i["n"])("span",Bt,"最大半径："+Object(i["R"])(e.maxRadius)+" 米",1),Object(i["n"])(u,{modelValue:e.maxRadius,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.maxRadius=t}),min:200,max:1e4,step:200,onInput:e.effect_maxRadius_change},null,8,["modelValue","onInput"]),Nt,"CircleScan"!==e.selEffect?(Object(i["E"])(),Object(i["i"])(i["b"],{key:1},[Object(i["n"])("span",Gt,"效果延迟："+Object(i["R"])(e.duration)+" 毫秒",1),Object(i["n"])(u,{modelValue:e.duration,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.duration=t}),min:500,max:1e4,step:500,onInput:e.effect_duration_change},null,8,["modelValue","onInput"]),Ht],64)):Object(i["j"])("",!0),"CircleScan"===e.selEffect?(Object(i["E"])(),Object(i["i"])(i["b"],{key:2},[Object(i["n"])("span",Ut,"步长："+Object(i["R"])(e.step),1),Object(i["n"])(u,{modelValue:e.step,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.step=t}),min:-.3,max:.3,step:.005,onInput:e.effect_step_change},null,8,["modelValue","min","max","step","onInput"]),Jt],64)):Object(i["j"])("",!0),"CircleWave"===e.selEffect?(Object(i["E"])(),Object(i["i"])(i["b"],{key:3},[Object(i["n"])("span",At,"波浪条纹数："+Object(i["R"])(e.waveCount)+" 个",1),Object(i["n"])(u,{modelValue:e.waveCount,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.waveCount=t}),min:1,max:10,step:1,onInput:e.effect_waveCount_change},null,8,["modelValue","onInput"]),Wt],64)):Object(i["j"])("",!0),"SpreadWall"===e.selEffect?(Object(i["E"])(),Object(i["i"])(i["b"],{key:4},[Object(i["n"])("span",qt,"效果墙高度："+Object(i["R"])(e.height)+" 米",1),Object(i["n"])(u,{modelValue:e.height,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.height=t}),min:0,max:1e3,step:20,onInput:e.effect_height_change},null,8,["modelValue","onInput"]),Kt,Object(i["n"])("span",Xt,"多边形边数："+Object(i["R"])(e.edgeCount)+" 个{0为圆形}",1),Object(i["n"])(u,{modelValue:e.edgeCount,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.edgeCount=t}),min:0,max:10,step:1,onInput:e.effect_edgeCount_change},null,8,["modelValue","onInput"]),$t],64)):Object(i["j"])("",!0),Object(i["n"])(d,{onClick:e.save,size:"mini"},{default:jt((function(){return[Zt]})),_:1},8,["onClick"])])]})),_:1})])]})),_:1},8,["onUpdate:onReadyMap"])})),Qt=n("45eb"),en=n("7e84"),tn=n("262e"),nn=n("2caf"),an=function(){function e(t,n){Object(R["a"])(this,e),this.viewer=t,this.id=n,this.duration=1e3,this.maxRadius=1e3,this.pointDraged=null,this.leftDownFlag=!1}return Object(I["a"])(e,[{key:"change_duration",value:function(e){this.duration=e}},{key:"change_color",value:function(e){var t=this.viewer.entities.getById(this.id);t._ellipse._material.color=new Cesium.Color.fromCssColorString(e)}},{key:"change_position",value:function(e){var t=Cesium.Cartesian3.fromDegrees(parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2])),n=this.viewer.entities.getById(this.id);n.position=t}},{key:"del",value:function(){this.viewer.entities.removeById(this.id)}},{key:"add",value:function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this;function r(e){o.pointDraged=o.viewer.scene.pick(e.position),o.pointDraged&&o.pointDraged.id&&o.pointDraged.id.id===o.id&&(o.leftDownFlag=!0,o.viewer.scene.screenSpaceCameraController.enableRotate=!1)}function l(e){o.leftDownFlag=!1,o.pointDraged=null,o.viewer.scene.screenSpaceCameraController.enableRotate=!0}function c(e){if(!0===o.leftDownFlag&&null!==o.pointDraged&&void 0!==o.pointDraged){var t=o.viewer.camera.getPickRay(e.endPosition),n=o.viewer.scene.globe.pick(t,o.viewer.scene);o.pointDraged.id.position=n;var i=o.viewer.scene.globe.ellipsoid,a=i.cartesianToCartographic(n),r=Cesium.Math.toDegrees(a.latitude),l=Cesium.Math.toDegrees(a.longitude),c=a.height;c=c<0?0:c,o.update_position&&o.update_position([l.toFixed(8),r.toFixed(8),c])}}this.duration=i,this.maxRadius=n,a&&(this.viewer.screenSpaceEventHandler.setInputAction(r,Cesium.ScreenSpaceEventType.LEFT_DOWN),this.viewer.screenSpaceEventHandler.setInputAction(l,Cesium.ScreenSpaceEventType.LEFT_UP),this.viewer.screenSpaceEventHandler.setInputAction(c,Cesium.ScreenSpaceEventType.MOUSE_MOVE))}}]),e}(),on=an;function rn(e,t){this._definitionChanged=new Cesium.Event,this._color=void 0,this._colorSubscription=void 0,this.color=e,this.duration=t,this._time=(new Date).getTime()}function ln(){console.log("EllipsoidFadeMaterialProperty init")}Object.defineProperties(rn.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color")}),rn.prototype.getType=function(e){return"EllipsoidFade"},rn.prototype.getValue=function(e,t){return Cesium.defined(t)||(t={}),t.color=Cesium.Property.getValueOrClonedDefault(this._color,e,Cesium.Color.WHITE,t.color),t.time=((new Date).getTime()-this._time)%this.duration/this.duration,t},rn.prototype.equals=function(e){var t=this===e||e instanceof rn&&Cesium.Property.equals(this._color,e._color);return t},Cesium.EllipsoidFadeMaterialProperty=rn,Cesium.Material.EllipsoidFadeType="EllipsoidFade",Cesium.Material.EllipsoidFadeSource="\nczm_material czm_getMaterial(czm_materialInput materialInput) {\n\tczm_material material = czm_getDefaultMaterial(materialInput);\n  \n\tmaterial.diffuse = 1.5 * color.rgb;\n\tvec2 st = materialInput.st;\n\tfloat dis = distance(st, vec2(0.5, 0.5));\n  float bl = .0;\n  float offset = 0.42;\n  if( dis > 0.5) {\n\t\tmaterial.alpha = 0.0;\n\t\tdiscard;\n\t}\n  if( dis > offset) {\n    bl = color.a * 1.0 / (0.5 - offset) * (dis - offset);\n    material.alpha =  pow(bl, 3.0);\n\t} else {\n    material.alpha = 0.0;\n\t\tdiscard;\n  }\n\treturn material;\n}\n",Cesium.Material._materialCache.addMaterial(Cesium.Material.EllipsoidFadeType,{fabric:{type:Cesium.Material.EllipsoidFadeType,uniforms:{color:new Cesium.Color(1,0,0,.5),time:0},source:Cesium.Material.EllipsoidFadeSource},translucent:function(e){return!0}});var cn=function(e){Object(tn["a"])(n,e);var t=Object(nn["a"])(n);function n(e,i){return Object(R["a"])(this,n),t.call(this,e,i)}return Object(I["a"])(n,[{key:"add",value:function(e,t,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];ln(),Object(Qt["a"])(Object(en["a"])(n.prototype),"add",this).call(this,e,t,i,a,o);var r=this,l=1,c=this.viewer.entities.add({id:r.id,position:Cesium.Cartesian3.fromDegrees(e[0],e[1],e[2]),ellipse:{semiMajorAxis:new Cesium.CallbackProperty((function(e){return l+=1e3/r.duration*50,l>r.maxRadius&&(l=1),l}),!1),semiMinorAxis:new Cesium.CallbackProperty((function(e){return l}),!1),material:new Cesium.EllipsoidFadeMaterialProperty(new Cesium.Color.fromCssColorString(t),r.duration)}});return c.id}}]),n}(on),sn=cn;function un(e){this._definitionChanged=new Cesium.Event,this._color=void 0,this._colorSubscription=void 0,this.color=e,this._time=(new Date).getTime()}function dn(){console.log("HexagonSpreadMaterialProperty init")}Object.defineProperties(un.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color")}),un.prototype.getType=function(e){return Cesium.Material.HexagonSpreadMaterialType},un.prototype.getValue=function(e,t){return Cesium.defined(t)||(t={}),t.color=Cesium.Property.getValueOrClonedDefault(this._color,e,Cesium.Color.WHITE,t.color),t.image=Cesium.Material.HexagonSpreadMaterialImage,t},un.prototype.equals=function(e){var t=this===e||e instanceof un&&Cesium.Property.equals(this._color,e._color);return t},Cesium.HexagonSpreadMaterialProperty=un,Cesium.Material.HexagonSpreadMaterialType="HexagonSpreadMaterial",Cesium.Material.HexagonSpreadMaterialImage="https://mapv-data.oss-cn-hangzhou.aliyuncs.com/pic/hexagon.png",Cesium.Material.HexagonSpreadSource="\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n     czm_material material = czm_getDefaultMaterial(materialInput);\n     vec2 st = materialInput.st;\n     vec4 colorImage = texture2D(image,  vec2(st));\n     material.alpha = colorImage.a * color.a * 0.5;\n     material.diffuse =  1.8 * color.rgb  ;\n     return material;\n }\n ",Cesium.Material._materialCache.addMaterial(Cesium.Material.HexagonSpreadMaterialType,{fabric:{type:Cesium.Material.HexagonSpreadMaterialType,uniforms:{color:new Cesium.Color(1,0,0,.5),image:Cesium.Material.HexagonSpreadMaterialImage},source:Cesium.Material.HexagonSpreadSource},translucent:function(e){return!0}});var fn=function(e){Object(tn["a"])(n,e);var t=Object(nn["a"])(n);function n(e,i){return Object(R["a"])(this,n),t.call(this,e,i)}return Object(I["a"])(n,[{key:"add",value:function(e,t,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];dn(),Object(Qt["a"])(Object(en["a"])(n.prototype),"add",this).call(this,e,t,i,a,o);var r=this,l=1;this.viewer.entities.add({id:r.id,position:Cesium.Cartesian3.fromDegrees(e[0],e[1],e[2]),ellipse:{semiMajorAxis:new Cesium.CallbackProperty((function(e){return l+=1e3/r.duration*50,l>r.maxRadius&&(l=1),l}),!1),semiMinorAxis:new Cesium.CallbackProperty((function(e){return l}),!1),material:new Cesium.HexagonSpreadMaterialProperty(new Cesium.Color.fromCssColorString(t))}})}}]),n}(on),pn=fn;function mn(e,t){this._definitionChanged=new Cesium.Event,this.color=e||Cesium.Color.YELLOW,this.speed=t||10}function vn(){console.log("ScanlineMaterialProperty init")}Object.defineProperties(mn.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed")}),mn.prototype.getType=function(e){return Cesium.Material.ScanlineType},mn.prototype.getValue=function(e,t){return Cesium.defined(t)||(t={}),t.color=Cesium.Property.getValueOrClonedDefault(this._color,e,Cesium.Color.WHITE,t.color),t.speed=this.speed,t},mn.prototype.equals=function(e){var t=this===e||e instanceof mn&&Cesium.Property.equals(this.color,e.color)&&Cesium.Property.equals(this.speed,e.speed);return t},Cesium.ScanlineMaterialProperty=mn,Cesium.Material.ScanlineType="Scanline",Cesium.Material.ScanlineSource="\nuniform vec4 color;\nuniform float speed;\nfloat circle(vec2 uv, float r, float blur) {\n  float d = length(uv) * 1.0; /* 2.0 */\n  float c = smoothstep(r+blur, r, d);\n  return c;\n}\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n  czm_material material = czm_getDefaultMaterial(materialInput);\n  vec2 st = materialInput.st - 0.5;\n  material.diffuse = 2.8 * color.rgb;\n  material.emission = vec3(0);\n  float t = fract(czm_frameNumber * (11000.0 - speed) / 500000.0);\n  float s = 0.3;\n  float radius1 = smoothstep(.0, s, t) * 0.5;\n  float alpha1 = circle(st, radius1, 0.01) * circle(st, radius1, -0.01);\n  float alpha2 = circle(st, radius1, 0.01 - radius1) * circle(st, radius1, 0.01);\n  float radius2 = 0.5 + smoothstep(s, 1.0, t) * 0.5;\n  float alpha3 = circle(st, radius1, radius2 + 0.01 - radius1) * circle(st, radius1, -0.01);\n  material.alpha = smoothstep(1.0, s, t) * (alpha1 + alpha2*0.1 + alpha3*0.1);\n  material.alpha *= color.a ;\n  return material;\n}\n",Cesium.Material._materialCache.addMaterial(Cesium.Material.ScanlineType,{fabric:{type:Cesium.Material.ScanlineType,uniforms:{color:new Cesium.Color(1,0,0,.5),time:0,speed:10},source:Cesium.Material.ScanlineSource},translucent:function(e){return!0}});var hn=function(e){Object(tn["a"])(n,e);var t=Object(nn["a"])(n);function n(e,i){return Object(R["a"])(this,n),t.call(this,e,i)}return Object(I["a"])(n,[{key:"change_duration",value:function(e){Object(Qt["a"])(Object(en["a"])(n.prototype),"change_duration",this).call(this,e);var t=this.viewer.entities.getById(this.id);t._ellipse._material.speed=e}},{key:"add",value:function(e,t,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];vn(),Object(Qt["a"])(Object(en["a"])(n.prototype),"add",this).call(this,e,t,i,a,o);var r=this;this.viewer.entities.add({id:r.id,position:Cesium.Cartesian3.fromDegrees(e[0],e[1],e[2]),ellipse:{semiMinorAxis:new Cesium.CallbackProperty((function(e){return r.maxRadius}),!1),semiMajorAxis:new Cesium.CallbackProperty((function(e){return r.maxRadius}),!1),material:new Cesium.ScanlineMaterialProperty(new Cesium.Color.fromCssColorString(t),a),classificationType:Cesium.ClassificationType.BOTH}})}}]),n}(on),gn=hn;function bn(e){this._definitionChanged=new Cesium.Event,this._color=void 0,this._colorSubscription=void 0,this.color=e.color,this.duration=Cesium.defaultValue(e.duration,1e3),this.count=Cesium.defaultValue(e.count,2),this.count<=0&&(this.count=1),this.gradient=Cesium.defaultValue(e.gradient,.1),0===this.gradient&&(this.gradient=0),this.gradient>1&&(this.gradient=1),this._time=(new Date).getTime()}function Cn(){console.log("CircleWaveMaterialProperty init")}Object.defineProperties(bn.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color"),duration:Cesium.createPropertyDescriptor("duration"),count:Cesium.createPropertyDescriptor("count")}),bn.prototype.getType=function(e){return Cesium.Material.CircleWaveMaterialType},bn.prototype.getValue=function(e,t){return Cesium.defined(t)||(t={}),t.color=Cesium.Property.getValueOrClonedDefault(this._color,e,Cesium.Color.WHITE,t.color),t.time=((new Date).getTime()-this._time)%this.duration/this.duration,t.count=this.count,t.gradient=1+10*(1-this.gradient),t},bn.prototype.equals=function(e){var t=this===e||e instanceof bn&&Cesium.Property.equals(this._color,e._color);return t},Cesium.CircleWaveMaterialProperty=bn,Cesium.Material.CircleWaveMaterialType="CircleWaveMaterial",Cesium.Material.CircleWaveSource="\n                                  czm_material czm_getMaterial(czm_materialInput materialInput) {\n                                    czm_material material = czm_getDefaultMaterial(materialInput);\n                                    material.diffuse = 1.5 * color.rgb;\n                                    vec2 st = materialInput.st;\n                                    vec3 str = materialInput.str;\n                                    float dis = distance(st, vec2(0.5, 0.5));\n                                    float per = fract(time);\n                                    if (abs(str.z) > 0.001) {\n                                      discard;\n                                    }\n                                    if (dis > 0.5) {\n                                      discard;\n                                    } else {\n                                      float perDis = 0.5 / count;\n                                      float disNum;\n                                      float bl = .0;\n                                      for (int i = 0; i <= 9; i++) {\n                                        if (float(i) <= count) {\n                                          disNum = perDis *float(i) - dis + per / count;\n                                          if (disNum > 0.0) {\n                                            if (disNum < perDis) {\n                                              bl = 1.0 - disNum / perDis;\n                                            } else if(disNum - perDis < perDis) {\n                                              bl = 1.0 - abs(1.0 - disNum / perDis);\n                                            }\n                                            material.alpha = pow(bl, gradient);\n                                          }\n                                        }\n                                      }\n                                    }\n                                    return material;\n                                  }\n                                  ",Cesium.Material._materialCache.addMaterial(Cesium.Material.CircleWaveMaterialType,{fabric:{type:Cesium.Material.CircleWaveMaterialType,uniforms:{color:new Cesium.Color(1,0,0,1),time:1,count:1,gradient:.1},source:Cesium.Material.CircleWaveSource},translucent:function(e){return!0}});var On=function(e){Object(tn["a"])(n,e);var t=Object(nn["a"])(n);function n(e,i){return Object(R["a"])(this,n),t.call(this,e,i)}return Object(I["a"])(n,[{key:"change_duration",value:function(e){Object(Qt["a"])(Object(en["a"])(n.prototype),"change_duration",this).call(this,e);var t=this.viewer.entities.getById(this.id);t._ellipse._material.duration=e}},{key:"change_waveCount",value:function(e){var t=this.viewer.entities.getById(this.id);t._ellipse._material.count=e}},{key:"add",value:function(e,t,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;Cn(),Object(Qt["a"])(Object(en["a"])(n.prototype),"add",this).call(this,e,t,i,a,o);var l=this;this.count=r,this.viewer.entities.add({id:l.id,position:Cesium.Cartesian3.fromDegrees(e[0],e[1],e[2]),ellipse:{semiMinorAxis:new Cesium.CallbackProperty((function(e){return l.maxRadius}),!1),semiMajorAxis:new Cesium.CallbackProperty((function(e){return l.maxRadius}),!1),material:new Cesium.CircleWaveMaterialProperty({duration:a,gradient:0,color:new Cesium.Color.fromCssColorString(t),count:r})}})}}]),n}(on),jn=On,yn=(n("a15b"),n("cb29"),function(e){Object(tn["a"])(n,e);var t=Object(nn["a"])(n);function n(e,i){var a;return Object(R["a"])(this,n),a=t.call(this,e,i),a.step=-.2,a.scanColor="rgba(19, 206, 102, 0.8)",a}return Object(I["a"])(n,[{key:"change_step",value:function(e){this.step=e}},{key:"change_color",value:function(e){this.scanColor=e}},{key:"add",value:function(e,t,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(Qt["a"])(Object(en["a"])(n.prototype),"add",this).call(this,e,t,i,a,o),this.step=a,this.scanColor=t;var r=this,l=0,c=document.createElement("canvas");c.setAttribute("width","800px"),c.setAttribute("height","800px"),c.setAttribute("id","canvas-a");var s=document.createElement("canvas");s.setAttribute("width","800px"),s.setAttribute("height","800px"),s.setAttribute("id","canvas-b");var u=c;this.viewer.entities.add({id:r.id,position:Cesium.Cartesian3.fromDegrees(e[0],e[1],e[2]),ellipse:{semiMinorAxis:new Cesium.CallbackProperty((function(e){return r.maxRadius}),!1),semiMajorAxis:new Cesium.CallbackProperty((function(e){return r.maxRadius}),!1),rotation:new Cesium.CallbackProperty((function(){return l-=r.step||-.02,l}),!1),stRotation:new Cesium.CallbackProperty((function(){return l-=r.step||-.02,l}),!1),material:new Cesium.ImageMaterialProperty({image:new Cesium.CallbackProperty((function(){u="canvas-a"===u.id?s:c;var e=u.getContext("2d");e.clearRect(0,0,u.width,u.height);var t=r.scanColor||"rgba(255,0,0,1)",n=t.split(",");n[3]="0)";var i=n.join(),a=e.createLinearGradient(175,100,u.width,u.height/2);return a.addColorStop(0,t),a.addColorStop(1,i),e.fillStyle=a,e.beginPath(),e.moveTo(400,400),e.arc(400,400,400,-30/180*Math.PI,0*Math.PI),e.fill(),u}),!1),transparent:!0})}})}}]),n}(on)),wn=yn;function _n(e){this._definitionChanged=new Cesium.Event,this._color=void 0,this._colorSubscription=void 0,this.color=e}function Mn(){console.log("WallGradientsMaterialProperty init")}Object.defineProperties(_n.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color")}),_n.prototype.getType=function(e){return Cesium.Material.WallGradientsType},_n.prototype.getValue=function(e,t){return Cesium.defined(t)||(t={}),t.color=Cesium.Property.getValueOrClonedDefault(this._color,e,Cesium.Color.WHITE,t.color),t.image=Cesium.Material.WallGradientsImage,t},_n.prototype.equals=function(e){var t=this===e||e instanceof _n&&Cesium.Property.equals(this._color,e._color);return t},Cesium.WallGradientsMaterialProperty=_n,Cesium.Material.WallGradientsType="WallGradients",Cesium.Material.WallGradientsImage="https://mapv-data.oss-cn-hangzhou.aliyuncs.com/pic/wallgradients.png",Cesium.Material.WallGradientsSource="\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n     czm_material material = czm_getDefaultMaterial(materialInput);\n     vec2 st = materialInput.st;\n     vec4 colorImage = texture2D(image, vec2(fract(st.t - time), st.t));\n     material.alpha = colorImage.a * color.a;\n     material.diffuse =  2.5 * color.rgb  ;\n     return material;\n }\n",Cesium.Material._materialCache.addMaterial(Cesium.Material.WallGradientsType,{fabric:{type:Cesium.Material.WallGradientsType,uniforms:{color:new Cesium.Color(0,1,0,.5),image:Cesium.Material.WallGradientsImage,time:0},source:Cesium.Material.WallGradientsSource},translucent:function(e){return!0}});var Pn=function(){function e(t,n){Object(R["a"])(this,e),this.viewer=t,this.id=n,this.duration=1e3,this.maxRadius=1e3,this.pointDraged=null,this.leftDownFlag=!1,this.position=null,this.edgeCount=0}return Object(I["a"])(e,[{key:"del",value:function(){this.viewer.entities.removeById(this.id)}},{key:"change_position",value:function(e){var t=Cesium.Cartographic.fromDegrees(parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));t.height<0&&(t.height=0),this.position=t}},{key:"change_color",value:function(e){var t=this.viewer.entities.getById(this.id);t._wall._material.color=new Cesium.Color.fromCssColorString(e)}},{key:"change_height",value:function(e){this.wallHeight=e}},{key:"change_duration",value:function(e){this.duration=e}},{key:"add",value:function(e,t,n,i,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,r=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Mn(),e=Cesium.Cartographic.fromDegrees(e[0],e[1],e[2]),e.height<0&&(e.height=0),this.position=e,this.wallHeight=a,this.duration=i,this.maxRadius=n,this.edgeCount=o;var l=n,c=this.getrPositions({},n,e,o,l),s=this;r&&this.mouseEvent(),this.viewer.entities.add({id:s.id,wall:{positions:new Cesium.CallbackProperty((function(e){var t=s.getPositions(l,s.maxRadius,s.getrPositions(c,s.maxRadius,s.position,s.edgeCount,l),s.getcenterDegrees(s.position),s.duration,s.edgeCount);return l=t.currentRadius,c=t.rPositions,c[l]}),!1),minimumHeights:new Cesium.CallbackProperty((function(e){var t=s.getminimumHeights(c[s.maxRadius]);return t}),!1),maximumHeights:new Cesium.CallbackProperty((function(e){var t=s.getmaximumHeights(c[s.maxRadius]);return t}),!1),material:new Cesium.WallGradientsMaterialProperty(new Cesium.Color.fromCssColorString(t))}})}},{key:"mouseEvent",value:function(){var e=this;function t(t){e.pointDraged=e.viewer.scene.pick(t.position),e.pointDraged&&e.pointDraged.id&&e.pointDraged.id.id===e.id&&(e.leftDownFlag=!0,e.viewer.scene.screenSpaceCameraController.enableRotate=!1)}function n(t){e.leftDownFlag=!1,e.pointDraged=null,e.viewer.scene.screenSpaceCameraController.enableRotate=!0}function i(t){if(!0===e.leftDownFlag&&null!==e.pointDraged&&void 0!==e.pointDraged){var n=e.viewer.camera.getPickRay(t.endPosition),i=e.viewer.scene.globe.pick(n,e.viewer.scene),a=e.viewer.scene.globe.ellipsoid,o=a.cartesianToCartographic(i),r=Cesium.Math.toDegrees(o.latitude),l=Cesium.Math.toDegrees(o.longitude),c=o.height;c=c<0?0:c,e.update_position&&e.update_position([l.toFixed(8),r.toFixed(8),c]),e.change_position([l.toFixed(8),r.toFixed(8),c])}}this.viewer.screenSpaceEventHandler.setInputAction(t,Cesium.ScreenSpaceEventType.LEFT_DOWN),this.viewer.screenSpaceEventHandler.setInputAction(n,Cesium.ScreenSpaceEventType.LEFT_UP),this.viewer.screenSpaceEventHandler.setInputAction(i,Cesium.ScreenSpaceEventType.MOUSE_MOVE)}},{key:"getrPositions",value:function(e,t,n,i,a){var o=this.getcenterDegrees(this.position);return n=this.generateCirclePoints([o[0],o[1]],a,i),n=this.pointsToPositions(n,o[2]),e[t]=n,e}},{key:"getcenterDegrees",value:function(e){var t=[Cesium.Math.toDegrees(e.longitude),Cesium.Math.toDegrees(e.latitude),e.height];return t}},{key:"getminimumHeights",value:function(e){return new Array(e.length).fill(this.position.height)}},{key:"getmaximumHeights",value:function(e){return new Array(e.length).fill(this.position.height+this.wallHeight)}},{key:"getPositions",value:function(e,t,n,i,a,o){if(e+=1e3/a*20,e>t&&(e=1))return{rPositions:n,currentRadius:e};var r=this.generateCirclePoints([i[0],i[1]],e,o);return r=this.pointsToPositions(r,i[2]),n[e]=r,{rPositions:n,currentRadius:e}}},{key:"pointsToPositions",value:function(e,t){var n=[];return e.map((function(e){n.push(Cesium.Cartesian3.fromDegrees(e[0],e[1],t))})),n}},{key:"generateCirclePoints",value:function(e,t,n){var i=[];if(n)for(var a=360/n,o=0;o<=360;o+=a)i.push(this.getCirclePoint(e[0],e[1],o,t));else for(var r=0;r<=360;r+=2)i.push(this.getCirclePoint(e[0],e[1],r,t));return i}},{key:"getCirclePoint",value:function(e,t,n,i){var a=i*Math.sin(n*Math.PI/180);return i*=Math.cos(n*Math.PI/180),[180*(a/((n=6356725+21412*(90-t)/90)*Math.cos(t*Math.PI/180))+e*Math.PI/180)/Math.PI,180*(i/n+t*Math.PI/180)/Math.PI]}}]),e}(),Sn=Pn,kn=Object(i["o"])({name:"EffectCongfig",components:{CesiumContainer:be,PannelBox:Me},setup:function(){var e=Object(i["J"])("CircleDiffusion");e.value=F("selEffect")?F("selEffect"):e.value;var t=Object(i["J"])([{value:"CircleDiffusion",label:"圆扩散"},{value:"Scanline",label:"线圈发光扩散"},{value:"CircleWave",label:"水波纹"},{value:"HexagonSpread",label:"六边形扩散"},{value:"CircleScan",label:"雷达圆扫"},{value:"SpreadWall",label:"墙推扩散"}]),n=Object(i["J"])("rgba(198, 6, 88, 0.7)");n.value=F("color")?F("color"):n.value;var a=Object(i["J"])(3e3);a.value=isNaN(F("duration","int"))?a.value:F("duration","int");var o=Object(i["J"])(1e3);o.value=isNaN(F("maxRadius","int"))?o.value:F("maxRadius","int");var r=Object(i["J"])(3);r.value=isNaN(F("waveCount","int"))?r.value:F("waveCount","int");var l=Object(i["J"])(-.01);l.value=isNaN(F("step","float"))?l.value:F("step","float");var c=Object(i["J"])(500);c.value=isNaN(F("height","int"))?c.value:F("height","int");var s=Object(i["J"])(5);s.value=isNaN(F("edgeCount","int"))?s.value:F("edgeCount","int");var u=Object(i["J"])([113.9218,22.5116,0]);u.value=F("position","array")?F("position","array"):u.value;var d=null,f=function(){var t=new xe(window.Gviewer);t.init(),p(e.value)},p=function(e){d&&d.del();var t=u.value;switch(t=[parseFloat(t[0]),parseFloat(t[1]),parseFloat(t[2])],e){case"CircleDiffusion":d=new sn(window.Gviewer,"effect-set-config"+e),d.add(t,n.value,o.value,a.value,!0);break;case"Scanline":d=new gn(window.Gviewer,"effect-set-config"+e),d.add(t,n.value,o.value,a.value,!0);break;case"CircleWave":d=new jn(window.Gviewer,"effect-set-config"+e),d.add(t,n.value,o.value,a.value,!0,r.value);break;case"HexagonSpread":d=new pn(window.Gviewer,"effect-set-config"+e),d.add(t,n.value,o.value,a.value,!0);break;case"CircleScan":d=new wn(window.Gviewer,"effect-set-config"+e),d.add(t,n.value,o.value,l.value,!0);break;case"SpreadWall":d=new Sn(window.Gviewer,"effect-set-config"+e),d.add(t,n.value,o.value,a.value,c.value,s.value,!0);break;default:}d.update_position=m},m=function(e){u.value=e},v=function(e){d.change_position(u.value)},h=function(e){d&&window.Gviewer.entities&&d.change_height(e)},g=function(e){d&&window.Gviewer.entities&&(d.edgeCount=e)},b=function(e){e||(e="rgba(255,255,255,1)",n.value=e),d&&window.Gviewer.entities&&d.change_color(e)},C=function(e){d&&window.Gviewer.entities&&d.change_duration(e)},O=function(e){d&&window.Gviewer.entities&&(d.maxRadius=e)},j=function(e){d&&window.Gviewer.entities&&d.change_waveCount(e)},y=function(e){d&&window.Gviewer.entities&&d.change_step(e)},w=function(){Re["b"].confirm("提交保存当前效果配置信息, 是否继续?","提示",{confirmButtonText:"保存",cancelButtonText:"取消",type:"warning"}).then((function(){window.parent.postMessage({selEffect:e.value,color:n.value,duration:a.value,maxRadius:o.value,waveCount:r.value,step:l.value,height:c.value,edgeCount:s.value,positionx:u.value[0],positiony:u.value[1],positionz:u.value[2]},"*"),Object(Re["a"])({type:"success",message:"保存成功!"})})).catch((function(e){console.log(e)}))};return{onReadyMap:f,selEffect:e,effectsList:t,change_color:b,color:n,duration:a,effect_duration_change:C,maxRadius:o,effect_maxRadius_change:O,positionEffect:u,effect_position_change:v,waveCount:r,effect_waveCount_change:j,effect_selEffect_change:p,step:l,effect_step_change:y,height:c,effect_height_change:h,edgeCount:s,effect_edgeCount_change:g,save:w}}});n("12cd"),n("4453");kn.render=Yt,kn.__scopeId="data-v-78f23ff3";var xn=kn,Rn=Object(i["gb"])("data-v-7c95958c");Object(i["H"])("data-v-7c95958c");var In={class:"ImageryCongfig"},En={class:"imagery_con"},Tn={class:"c_title"},Ln={class:"c_title"},Vn={class:"c_title"},Dn={class:"c_title"},Fn={class:"c_title"},zn=Object(i["n"])("span",{class:"c_title"},"是否反色：",-1),Bn=Object(i["n"])("br",null,null,-1),Nn={class:"c_title"},Gn=Object(i["n"])("br",null,null,-1),Hn=Object(i["n"])("br",null,null,-1),Un=Object(i["m"])("保存当前配置");Object(i["F"])();var Jn=Rn((function(e,t,n,a,o,r){var l=Object(i["N"])("el-slider"),c=Object(i["N"])("el-switch"),s=Object(i["N"])("el-color-picker"),u=Object(i["N"])("el-button"),d=Object(i["N"])("PannelBox"),f=Object(i["N"])("CesiumContainer");return Object(i["E"])(),Object(i["i"])(f,{ref:"CesiumContainerRef",isImagery:!0,"onUpdate:onReadyMap":e.onReadyMap},{configCom:Rn((function(){return[Object(i["n"])("div",In,[Object(i["n"])(d,null,{content:Rn((function(){return[Object(i["n"])("div",En,[Object(i["n"])("span",Tn,"饱和度："+Object(i["R"])(e.saturation),1),Object(i["n"])(l,{modelValue:e.saturation,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.saturation=t}),min:-5,max:5,step:.05,onInput:t[2]||(t[2]=function(t){return e.change_interfaceConfig("saturation")})},null,8,["modelValue","step"]),Object(i["n"])("span",Ln,"亮度："+Object(i["R"])(e.brightness),1),Object(i["n"])(l,{modelValue:e.brightness,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.brightness=t}),min:-10,max:10,step:.1,onInput:t[4]||(t[4]=function(t){return e.change_interfaceConfig("brightness")})},null,8,["modelValue","step"]),Object(i["n"])("span",Vn,"对比度："+Object(i["R"])(e.contrast),1),Object(i["n"])(l,{modelValue:e.contrast,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.contrast=t}),min:-10,max:10,step:.1,onInput:t[6]||(t[6]=function(t){return e.change_interfaceConfig("contrast")})},null,8,["modelValue","step"]),Object(i["n"])("span",Dn,"色调："+Object(i["R"])(e.hue),1),Object(i["n"])(l,{modelValue:e.hue,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.hue=t}),min:-2,max:2,step:.02,onInput:t[8]||(t[8]=function(t){return e.change_interfaceConfig("hue")})},null,8,["modelValue","step"]),Object(i["n"])("span",Fn,"伽马校正："+Object(i["R"])(e.gamma),1),Object(i["n"])(l,{modelValue:e.gamma,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.gamma=t}),min:-5,max:5,step:.05,onInput:t[10]||(t[10]=function(t){return e.change_interfaceConfig("gamma")})},null,8,["modelValue","step"]),zn,Object(i["n"])(c,{modelValue:e.invertColor,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.invertColor=t}),onChange:t[12]||(t[12]=function(t){return e.change_interfaceConfig("invertColor")})},null,8,["modelValue"]),Bn,Object(i["n"])("span",Nn,"滤镜颜色："+Object(i["R"])(e.color),1),Object(i["n"])(s,{modelValue:e.color,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.color=t}),"color-format":"rgb",size:"mini",class:"color-pick-s",onActiveChange:t[14]||(t[14]=function(t){return e.change_interfaceConfig("color",t)})},null,8,["modelValue"]),Gn,Hn,Object(i["n"])(u,{onClick:e.save},{default:Rn((function(){return[Un]})),_:1},8,["onClick"])])]})),_:1})])]})),_:1},8,["onUpdate:onReadyMap"])})),An=Object(i["o"])({name:"ImageryCongfig",components:{CesiumContainer:be,PannelBox:Me},setup:function(){var e=Object(i["J"])(1),t=Object(i["J"])(1),n=Object(i["J"])(1),a=Object(i["J"])(0),o=Object(i["J"])(1),r=Object(i["J"])(!0),l=Object(i["J"])("rgb(255,255,255)"),c=Object(i["J"])(),s=function(){Re["b"].confirm("提交保存当前图层的配置信息, 是否继续?","提示",{confirmButtonText:"保存",cancelButtonText:"取消",type:"warning"}).then((function(){window.parent.postMessage({color:L(l.value),invertColor:r.value,interfaceConfig:{saturation:e.value,brightness:t.value,contrast:n.value,hue:a.value,gamma:o.value}},"*"),Object(Re["a"])({type:"success",message:"保存成功!"})})).catch((function(e){console.log(e)}))};Object(i["B"])((function(){var i=F("urlArr");i=decodeURI(i),i=JSON.parse(i);var s=F("interfaceConfig");s=JSON.parse(decodeURI(s)),s&&((s.saturation||0===s.saturation)&&(e.value=s.saturation),(s.brightness||0===s.brightness)&&(t.value=s.brightness),(s.contrast||0===s.contrast)&&(n.value=s.contrast),(s.hue||0===s.hue)&&(a.value=s.hue),(s.gamma||0===s.gamma)&&(o.value=s.gamma));var u=F("invertColor","int");isNaN(u)||(r.value=1===u);var d=F("color");isNaN(d)&&!d||(l.value=d);var f=F("type"),p={type:f,classConfig:i,interfaceConfig:s,invertswitch:u,offset:"0,0",filterRGB:d};c.value.initImageryMap([p])}));var u=function(i){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=window.Gviewer.imageryLayers.get(0),u=null;try{switch(i){case"saturation":s[i]=e.value;break;case"brightness":s[i]=t.value;break;case"contrast":s[i]=n.value;break;case"hue":s[i]=a.value;break;case"gamma":s[i]=o.value;break;case"invertColor":s[i]=r.value?1:0;break;case"color":c||(c="rgba(255,255,255,0)",l.value=c),u=new Cesium.Color.fromCssColorString(c).toBytes(),s.filterRGB=[u[0],u[1],u[2]];break;default:}}catch(d){console.log(d)}},d=function(){};return{onReadyMap:d,CesiumContainerRef:c,saturation:e,change_interfaceConfig:u,brightness:t,contrast:n,hue:a,gamma:o,invertColor:r,color:l,save:s}}});n("5a04"),n("2d0d");An.render=Jn,An.__scopeId="data-v-7c95958c";var Wn=An,qn=Object(i["gb"])("data-v-559d7cdd");Object(i["H"])("data-v-559d7cdd");var Kn={class:"ModelCongfig"},Xn={class:"model_con"},$n={class:"c_title"},Zn=Object(i["n"])("br",null,null,-1),Yn=Object(i["n"])("br",null,null,-1),Qn=Object(i["n"])("span",{class:"c_title"},"颜色模式：",-1),ei=Object(i["m"])("高亮"),ti=Object(i["m"])("混合"),ni=Object(i["m"])("替换"),ii=Object(i["n"])("br",null,null,-1),ai=Object(i["n"])("br",null,null,-1),oi={class:"c_title"},ri=Object(i["n"])("br",null,null,-1),li={class:"c_title"},ci=Object(i["n"])("br",null,null,-1),si={class:"c_title"},ui=Object(i["n"])("br",null,null,-1),di=Object(i["n"])("br",null,null,-1),fi=Object(i["n"])("span",{class:"c_title"},"鼠标操控：",-1),pi=Object(i["m"])("移动到屏幕中心"),mi=Object(i["n"])("br",null,null,-1),vi=Object(i["n"])("span",{class:"c_title"},"lon经度：",-1),hi=Object(i["n"])("br",null,null,-1),gi=Object(i["n"])("span",{class:"c_title"},"lat纬度：",-1),bi=Object(i["n"])("br",null,null,-1),Ci=Object(i["n"])("br",null,null,-1),Oi={class:"c_title"},ji=Object(i["n"])("br",null,null,-1),yi={class:"c_title"},wi=Object(i["n"])("br",null,null,-1),_i=Object(i["n"])("br",null,null,-1),Mi={class:"c_title"},Pi=Object(i["n"])("br",null,null,-1),Si=Object(i["m"])("保存当前设置");Object(i["F"])();var ki=qn((function(e,t,n,a,o,r){var l=Object(i["N"])("el-color-picker"),c=Object(i["N"])("el-radio"),s=Object(i["N"])("el-radio-group"),u=Object(i["N"])("el-slider"),d=Object(i["N"])("el-switch"),f=Object(i["N"])("el-button"),p=Object(i["N"])("el-input"),m=Object(i["N"])("PannelBox"),v=Object(i["N"])("CesiumContainer");return Object(i["E"])(),Object(i["i"])(v,{"onUpdate:onReadyMap":e.onReadyMap},{configCom:qn((function(){return[Object(i["n"])("div",Kn,[Object(i["n"])(m,null,{content:qn((function(){return[Object(i["n"])("div",Xn,[Object(i["n"])("span",$n,"效果颜色："+Object(i["R"])(e.color),1),Object(i["n"])(l,{modelValue:e.color,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.color=t}),"show-alpha":"",size:"mini",class:"color-pick-s",onActiveChange:e.change_color},null,8,["modelValue","onActiveChange"]),Zn,Yn,Qn,Object(i["n"])(s,{modelValue:e.colorMode,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.colorMode=t}),onChange:e.change_colorMode,size:"small"},{default:qn((function(){return[Object(i["n"])(c,{label:"HIGHLIGHT"},{default:qn((function(){return[ei]})),_:1}),Object(i["n"])(c,{label:"MIX"},{default:qn((function(){return[ti]})),_:1}),Object(i["n"])(c,{label:"REPLACE"},{default:qn((function(){return[ni]})),_:1})]})),_:1},8,["modelValue","onChange"]),ii,ai,Object(i["n"])("span",oi,"旋转延迟："+Object(i["R"])(e.duration)+" 毫秒",1),Object(i["n"])(u,{modelValue:e.duration,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.duration=t}),min:0,max:100,step:1,onInput:e.duration_change},null,8,["modelValue","onInput"]),ri,Object(i["n"])("span",li,"转速："+Object(i["R"])(e.rotateSpeed),1),Object(i["n"])(u,{modelValue:e.rotateSpeed,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.rotateSpeed=t}),min:0,max:20,step:1,onInput:e.rotateSpeed_change},null,8,["modelValue","onInput"]),ci,Object(i["n"])("span",si,"旋转(横向)："+Object(i["R"])(e.LatRotation)+" °",1),Object(i["n"])(u,{modelValue:e.LatRotation,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.LatRotation=t}),min:0,max:7,step:.02,onInput:e.LatRotation_change},null,8,["modelValue","step","onInput"]),ui,di,fi,Object(i["n"])(d,{modelValue:e.ModelCanMove,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.ModelCanMove=t}),onChange:e.ModelCanMove_change},null,8,["modelValue","onChange"]),Object(i["n"])(f,{onClick:e.goToCenter,style:{float:"right"},size:"mini"},{default:qn((function(){return[pi]})),_:1},8,["onClick"]),mi,vi,Object(i["n"])(p,{class:"input_c_p",type:"number",size:"small",modelValue:e.positionLon,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.positionLon=t}),onChange:e.position_change},null,8,["modelValue","onChange"]),hi,gi,Object(i["n"])(p,{class:"input_c_p",type:"number",size:"small",modelValue:e.positionLat,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.positionLat=t}),onChange:e.position_change},null,8,["modelValue","onChange"]),bi,Ci,Object(i["n"])("span",Oi,"高度："+Object(i["R"])(e.height)+" 米",1),Object(i["n"])(u,{modelValue:e.height,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.height=t}),min:0,max:1e3,step:20,onInput:e.height_change},null,8,["modelValue","onInput"]),ji,Object(i["n"])("span",yi,"大小："+Object(i["R"])(e.scale)+" 倍",1),Object(i["n"])(p,{class:"input_c_p",type:"number",size:"small",modelValue:e.scale,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.scale=t}),onChange:e.scale_change},null,8,["modelValue","onChange"]),wi,_i,Object(i["n"])("span",Mi,"最小显示："+Object(i["R"])(e.minimumPixelSize)+" 像素",1),Object(i["n"])(u,{modelValue:e.minimumPixelSize,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.minimumPixelSize=t}),min:1,max:800,step:10,onInput:e.minimumPixelSize_change},null,8,["modelValue","onInput"]),Pi,Object(i["n"])(f,{onClick:e.save,size:"mini"},{default:qn((function(){return[Si]})),_:1},8,["onClick"])])]})),_:1})])]})),_:1},8,["onUpdate:onReadyMap"])})),xi=function(){return te.request("get","/primitive/getPrimitivesList")},Ri=function(){function e(t){Object(R["a"])(this,e),this.viewer=t,this.pointDraged=null,this.leftDownFlag=!1,this.id="",this.update_position=null,this.modelList=[]}return Object(I["a"])(e,[{key:"removeMouseEvent",value:function(){this.viewer.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOWN),this.viewer.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_UP),this.viewer.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE)}},{key:"addMouseEvent",value:function(){var e=this;function t(t){e.pointDraged=e.viewer.scene.pick(t.position),e.pointDraged&&e.pointDraged.id===e.id&&(e.leftDownFlag=!0,e.viewer.scene.screenSpaceCameraController.enableRotate=!1)}function n(t){e.leftDownFlag=!1,e.pointDraged=null,e.viewer.scene.screenSpaceCameraController.enableRotate=!0}function i(t){if(!0===e.leftDownFlag&&null!==e.pointDraged&&void 0!==e.pointDraged){var n=e.viewer.camera.getPickRay(t.endPosition),i=e.viewer.scene.globe.pick(n,e.viewer.scene),a=e.viewer.scene.globe.ellipsoid,o=a.cartesianToCartographic(i),r=Cesium.Math.toDegrees(o.latitude),l=Cesium.Math.toDegrees(o.longitude);e.pointDraged.primitive.attributes.lon=l,e.pointDraged.primitive.attributes.lat=r,e.update_position&&e.update_position({lon:l.toFixed(8),lat:r.toFixed(8)})}}this.viewer.screenSpaceEventHandler.setInputAction(t,Cesium.ScreenSpaceEventType.LEFT_DOWN),this.viewer.screenSpaceEventHandler.setInputAction(n,Cesium.ScreenSpaceEventType.LEFT_UP),this.viewer.screenSpaceEventHandler.setInputAction(i,Cesium.ScreenSpaceEventType.MOUSE_MOVE)}},{key:"changePrimitiveVisibility",value:function(e,t){e.forEach((function(e){e.show=t}))}},{key:"deletePrimitiveCollection",value:function(e){var t=this;e.forEach((function(e){e.setIntervalId&&clearInterval(e.setIntervalId),t.viewer.scene.primitives.remove(e)}))}},{key:"changePrimitiveVisibilityById",value:function(e,t){var n=this.viewer.scene.primitives,i=null;n.forEach((function(t){t.id===e&&(i=t)})),i?i.show=t:console.log("不存在id为".concat(e,"的primitive"))}},{key:"changePrimitiveColor",value:function(e,t){var n=this.findPrimitiveById(e);n&&(n.color=new Cesium.Color.fromCssColorString(t))}},{key:"changePrimitiveIntervalTime",value:function(e,t){var n=this,i=this.findPrimitiveById(e);if(i){i.setIntervalId&&clearInterval(i.setIntervalId);var a=setInterval((function(){i.heading+=Cesium.Math.toRadians(i.attributes.rotateSpeed||0),i.modelMatrix=n._changeModelMatrix(i)}),t);i.setIntervalId=a}}},{key:"changePrimitiverotateSpeed",value:function(e,t){var n=this.findPrimitiveById(e);n&&(n.attributes.rotateSpeed=t)}},{key:"changePrimitiveMinimumPixelSize",value:function(e,t){var n=this.findPrimitiveById(e);n&&(n.minimumPixelSize=t)}},{key:"changePrimitiveHeight",value:function(e,t){var n=this.findPrimitiveById(e);n&&(n.attributes.height=t)}},{key:"changePrimitivePosition",value:function(e,t,n){var i=this.findPrimitiveById(e);i&&(i.attributes.lon=t,i.attributes.lat=n)}},{key:"changePrimitiveLatRotation",value:function(e,t){var n=this.findPrimitiveById(e);n&&(n.attributes.heading=t,n.heading=t,n.modelMatrix=this._changeModelMatrix(n))}},{key:"changePrimitiveScale",value:function(e,t){var n=this.findPrimitiveById(e);n&&(n.scale=t)}},{key:"changePrimitiveColorBlendMode",value:function(e,t){var n=this.findPrimitiveById(e);if(n){var i=Cesium.ColorBlendMode.HIGHLIGHT;switch(t){case"HIGHLIGHT":i=Cesium.ColorBlendMode.HIGHLIGHT;break;case"MIX":i=Cesium.ColorBlendMode.MIX;break;case"REPLACE":i=Cesium.ColorBlendMode.REPLACE;break;default:}n.colorBlendMode=i}}},{key:"findPrimitiveById",value:function(e){var t=this.viewer.scene.primitives._primitives,n=null;return t.forEach((function(t){t.id===e&&(n=t)})),n}},{key:"deleteprimitiveById",value:function(e){var t=this.viewer.scene.primitives,n=null;t.forEach((function(t){t.id===e&&(n=t)})),n?(n.setIntervalId&&clearInterval(n.setIntervalId),this.viewer.scene.primitives.remove(n)):console.log("不存在id为".concat(e,"的primitive"))}},{key:"_changeModelMatrix",value:function(e){var t=Cesium.defaultValue(e.attributes.pitch,0),n=Cesium.defaultValue(e.attributes.roll,0),i=new Cesium.HeadingPitchRoll(e.heading,t,n),a=Cesium.Cartesian3.fromDegrees(e.attributes.lon,e.attributes.lat,e.attributes.height),o=Cesium.Transforms.headingPitchRollToFixedFrame(a,i);return o}}]),e}(),Ii=function(e){Object(tn["a"])(n,e);var t=Object(nn["a"])(n);function n(e){return Object(R["a"])(this,n),t.call(this,e)}return Object(I["a"])(n,[{key:"init",value:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xi();case 2:t=e.sent,n=this,t.data&&t.data.forEach((function(e,t){var i={id:"pimitiveModelList"+e.id,lon:e.positionLon,lat:e.positionLat,height:e.height,heading:e.latRotation,pitch:0,roll:0,colorMode:e.colorModelist,uri:e.url,scale:e.scale,rotateSpeed:e.rotateSpeed,modelColor:e.color,minimumPixelSize:e.minimumPixelSize,duration:e.duration},a={};n.modelList.push(n.showModels(i,a))}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"showModels",value:function(e,t){var n,i,a,o,r,l,c,s=this,u=this.viewer.scene.primitives;a=Cesium.Math.toRadians;var d=e;return n=d.id?d.id:"pimitiveModel_0",s.id=n,c=new Cesium.Color.fromCssColorString(d.modelColor||t.modelColor||"rgba(0,255,255,0.5)"),o=Cesium.Cartesian3.fromDegrees(d.lon,d.lat,d.height),l=new Cesium.HeadingPitchRoll(a(d.heading),a(d.pitch),a(d.roll)),r=Cesium.Transforms.headingPitchRollToFixedFrame(o,l),i=u.add(Cesium.Model.fromGltf({id:n,url:d.uri,scale:d.scale,modelMatrix:r,color:c,colorBlendMode:Cesium.ColorBlendMode.MIX,maximumScale:5e3,minimumPixelSize:d.minimumPixelSize||20,scene:s.viewer.scene,heightReference:Cesium.HeightReference.RELATIVE_TO_GROUND})),this.changePrimitiveColorBlendMode(n,d.colorMode),i.attributes=d,i.heading=d.heading,i.readyPromise.then((function(e){var t=setInterval((function(){e.heading+=Cesium.Math.toRadians(e.attributes.rotateSpeed||0),e.modelMatrix=s._changeModelMatrix(e)}),d.duration);e.setIntervalId=t})),i}}]),n}(Ri),Ei=Ii,Ti=Object(i["o"])({name:"ModelCongfig",components:{CesiumContainer:be,PannelBox:Me},setup:function(){var e="pimitiveModelConfig",t=Object(i["J"])("rgba(255, 255, 255, 1)");t.value=F("color")?F("color"):t.value;var n=F("url")?decodeURI(F("url")):"https://mapv-data.oss-cn-hangzhou.aliyuncs.com/model/pyramid.glb",a=Object(i["J"])("HIGHLIGHT");a.value=F("colorMode")?F("colorMode"):a.value;var o=Object(i["J"])(20);o.value=parseFloat(F("duration")?F("duration"):o.value);var r=Object(i["J"])("121.51568329");r.value=F("positionLon")?F("positionLon"):r.value;var l=Object(i["J"])("31.22982201");l.value=F("positionLat")?F("positionLat"):l.value;var c=Object(i["J"])(240);c.value=parseFloat(F("height")?F("height"):c.value);var s=Object(i["J"])(641);s.value=parseFloat(F("scale")?F("scale"):s.value);var u=Object(i["J"])(0);u.value=parseFloat(F("rotateSpeed")?F("rotateSpeed"):u.value);var d=Object(i["J"])(21);d.value=parseFloat(F("minimumPixelSize")?F("minimumPixelSize"):d.value);var f=Object(i["J"])(!1),p=null,m=function(n){n||(n="rgba(255,255,255,1)",t.value=n),p&&window.Gviewer.entities&&p.changePrimitiveColor(e,n)},v=function(t){p&&window.Gviewer.entities&&p.changePrimitiverotateSpeed(e,t)},h=function(t){p&&window.Gviewer.entities&&p.changePrimitiveColorBlendMode(e,t)},g=function(t){p&&window.Gviewer.entities&&p.changePrimitiveIntervalTime(e,t)},b=function(t){p&&window.Gviewer.entities&&p.changePrimitiveHeight(e,t)},C=Object(i["J"])(3.76);C.value=parseFloat(F("LatRotation")?F("LatRotation"):C.value);var O=function(t){p&&window.Gviewer.entities&&p.changePrimitiveLatRotation(e,t)},j=function(t){p&&window.Gviewer.entities&&p.changePrimitiveScale(e,t)},y=function(e){p&&window.Gviewer.entities&&(e?p.addMouseEvent():p.removeMouseEvent())},w=function(t){p&&window.Gviewer.entities&&p.changePrimitiveMinimumPixelSize(e,t)},_=function(){p&&window.Gviewer.entities&&p.changePrimitivePosition(e,parseFloat(r.value),parseFloat(l.value))},M=function(e){r.value=e.lon,l.value=e.lat},P=function(){Re["b"].confirm("提交保存当前效果配置信息, 是否继续?","提示",{confirmButtonText:"保存",cancelButtonText:"取消",type:"warning"}).then((function(){var e={color:t.value,colorMode:a.value,duration:o.value,rotateSpeed:u.value,LatRotation:C.value,positionLon:r.value,positionLat:l.value,height:c.value,scale:s.value,minimumPixelSize:d.value};window.parent.postMessage(e,"*"),Object(Re["a"])({type:"success",message:"保存成功!"})})).catch((function(e){console.log(e)}))},S=function(){if(p&&window.Gviewer.entities){var t=N.getCurCenterlonLat(window.Gviewer);p.changePrimitivePosition(e,t.lon,t.lat),M(t)}},k=function(){var i=new xe(window.Gviewer);i.init(),p=new Ei(window.Gviewer),p.update_position=M;var f={id:e,lon:parseFloat(r.value),lat:parseFloat(l.value),height:c.value,heading:C.value,pitch:0,roll:0,colorMode:a.value,uri:n,scale:s.value,rotateSpeed:u.value,modelColor:t.value,minimumPixelSize:d.value,duration:o.value},m={};p.showModels(f,m)};return{onReadyMap:k,change_color:m,color:t,colorMode:a,change_colorMode:h,duration_change:g,duration:o,height_change:b,height:c,scale_change:j,scale:s,rotateSpeed_change:v,rotateSpeed:u,minimumPixelSize:d,minimumPixelSize_change:w,positionLon:r,positionLat:l,position_change:_,goToCenter:S,save:P,LatRotation_change:O,LatRotation:C,ModelCanMove:f,ModelCanMove_change:y}}});n("35cb"),n("4aa1");Ti.render=ki,Ti.__scopeId="data-v-559d7cdd";var Li=Ti,Vi=Object(i["gb"])("data-v-4c2f48fa");Object(i["H"])("data-v-4c2f48fa");var Di=Object(i["n"])("div",{class:"Cesium3DIndex",id:"cesiumContainer"},null,-1);Object(i["F"])();var Fi=Vi((function(e,t,n,a,o,r){var l=Object(i["N"])("ShowLngLat"),c=Object(i["N"])("ButtonTools");return Object(i["E"])(),Object(i["i"])(i["b"],null,[Di,Object(i["n"])(l,{ref:"ShowLngLatRef"},null,512),Object(i["n"])(c,{ref:"ButtonToolsRef"},null,512)],64)})),zi=Object(i["gb"])("data-v-b0e4a3b0");Object(i["H"])("data-v-b0e4a3b0");var Bi={class:"ButtonToolsContainer"},Ni=Object(i["m"])("记录视角位置");Object(i["F"])();var Gi=zi((function(e,t,n,a,o,r){var l=Object(i["N"])("el-button");return Object(i["E"])(),Object(i["i"])("div",Bi,[e.IsShow?(Object(i["E"])(),Object(i["i"])(l,{key:0,type:"info",plain:"",onClick:t[1]||(t[1]=function(t){return e.save()})},{default:zi((function(){return[Ni]})),_:1})):Object(i["j"])("",!0)])})),Hi=Object(i["o"])({name:"ButtonTools",components:{},setup:function(){var e=Object(i["J"])(!1),t=Object(i["J"])(),n=function(){var e=window.Gviewer.scene.camera,t=e.direction,n=e.up,i=e.position,a=window.Gviewer.scene.globe.ellipsoid,o=new Cesium.Cartesian3(i.x,i.y,i.z),r=a.cartesianToCartographic(o),l=Cesium.Math.toDegrees(r.latitude),c=Cesium.Math.toDegrees(r.longitude),s=r.height;Re["b"].confirm("提交保存此摄像头视图, 是否继续?","提示",{confirmButtonText:"保存",cancelButtonText:"取消",type:"warning"}).then(Object(x["a"])(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,oe({lat:l,lng:c,height:s,direction:t,up:n});case 2:i=e.sent,a=i.reData,console.log(a),Object(Re["a"])({type:"success",message:"保存成功!"});case 6:case"end":return e.stop()}}),e)})))).catch((function(e){console.log(e)}))},a=function(){var n=Object(x["a"])(regeneratorRuntime.mark((function n(){var i,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,ie();case 2:if(t.value=n.sent.data,t.value=Object(re["zipObject"])(Object(re["map"])(t.value,"name"),Object(re["map"])(t.value,"value")),e.value="1"===t.value.showSaveButton,"0"!==t.value.flytoView){n.next=7;break}return n.abrupt("return");case 7:i=window.Gviewer.scene.globe.ellipsoid,a=Cesium.Cartographic.fromDegrees(parseFloat(t.value.lng),parseFloat(t.value.lat),parseFloat(t.value.height)),o=i.cartographicToCartesian(a),window.Gviewer.scene.camera.flyTo({destination:{x:o.x,y:o.y,z:o.z},orientation:{direction:new Cesium.Cartesian3(parseFloat(t.value.direction_x),parseFloat(t.value.direction_y),parseFloat(t.value.direction_z)),up:new Cesium.Cartesian3(parseFloat(t.value.up_x),parseFloat(t.value.up_y),parseFloat(t.value.up_z))},duration:t.value.duration});case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(i["x"])((function(){})),{IsShow:e,FirstMapView:t,save:n,flyTo:a}}});n("8d52");Hi.render=Gi,Hi.__scopeId="data-v-b0e4a3b0";var Ui=Hi,Ji=function(){function e(t){Object(R["a"])(this,e),this.viewer=t,this.EffectsList=[]}return Object(I["a"])(e,[{key:"init",value:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ut();case 2:t=e.sent,n=this,t.data&&t.data.forEach((function(e,t){n.add(e,t)}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"add",value:function(e,t){var n,i=null,a=[e.lon,e.lat,e.height];switch(e.effect_type){case"CircleDiffusion":i=new sn(this.viewer,"effect-set-config"+e.effect_type+t),i.add(a,e.color,e.radius,e.duration);break;case"Scanline":i=new gn(this.viewer,"effect-set-config"+e.effect_type+t),i.add(a,e.color,e.radius,e.duration);break;case"CircleWave":i=new jn(this.viewer,"effect-set-config"+e.effect_type+t),n=JSON.parse(e.ext),i.add(a,e.color,e.radius,e.duration,!1,n.waveCount);break;case"HexagonSpread":i=new pn(this.viewer,"effect-set-config"+e.effect_type+t),i.add(a,e.color,e.radius,e.duration);break;case"CircleScan":i=new wn(this.viewer,"effect-set-config"+e.effect_type+t),n=JSON.parse(e.ext),i.add(a,e.color,e.radius,n.step);break;case"SpreadWall":i=new Sn(this.viewer,"effect-set-config"+e.effect_type+t),n=JSON.parse(e.ext),i.add(a,e.color,e.radius,e.duration,n.height,n.edgeCount);break;default:}i&&this.EffectsList.push(i)}}]),e}(),Ai=Ji,Wi=Object(i["o"])({name:"Cesium3DIndex",components:{ShowLngLat:he,ButtonTools:Ui},setup:function(){var e=null,t=Object(i["J"])(),n=Object(i["J"])(),a=function(i,a){e=N.init(i,a),window.Gviewer=e,t.value.initCesiumHandler(e),n.value.flyTo();var o=new xe(e);o.init();var r=new Ei(e);r.init();var l=new Ai(e);l.init();var c=new bt(e,"road");c.init()};return Object(i["x"])((function(){Object(i["v"])(Object(x["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:return t=e.sent,e.next=5,se();case 5:n=e.sent,a(t,n);case 7:case"end":return e.stop()}}),e)}))))})),{ShowLngLatRef:t,ButtonToolsRef:n}}});n("21a6");Wi.render=Fi,Wi.__scopeId="data-v-4c2f48fa";var qi=Wi,Ki=[{path:"/model",name:"Model",component:Li},{path:"/effect",name:"Effect",component:xn},{path:"/imagery",name:"Imagery",component:Wn},{path:"/lines",name:"Lines",component:Ot},{path:"/titleset",name:"TitleSet",component:Ee},{path:"/",name:"Cesium",component:qi}],Xi=Object(l["a"])({history:Object(l["b"])("/assets/addons/cesiummapv/vue3/"),routes:Ki}),$i=Xi,Zi=n("5502"),Yi=Object(Zi["a"])({state:{},mutations:{},actions:{},modules:{}}),Qi=(n("7dd6"),Object(i["h"])(r).use(Yi).use($i));Qi.use(Re["c"],{size:"small",zIndex:3e3}),Qi.mount("#app")},f5b7:function(e,t,n){"use strict";n("95ab")},f928:function(e,t,n){},fa20:function(e,t,n){},fcde:function(e,t,n){}});